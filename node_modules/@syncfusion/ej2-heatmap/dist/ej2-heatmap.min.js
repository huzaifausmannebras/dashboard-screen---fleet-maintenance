/*!
*  filename: ej2-heatmap.min.js
*  version : 23.1.36
*  Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("SyncfusionBase"),require("SyncfusionSvgBase"),require("SyncfusionData"),require("SyncfusionPdfExport")):"function"==typeof define&&define.amd?define(["SyncfusionBase","SyncfusionSvgBase","SyncfusionData","SyncfusionPdfExport"],t):"object"==typeof exports?exports.SyncfusionHeatmap=t(require("SyncfusionBase"),require("SyncfusionSvgBase"),require("SyncfusionData"),require("SyncfusionPdfExport")):e.SyncfusionHeatmap=t(e.SyncfusionBase,e.SyncfusionSvgBase,e.SyncfusionData,e.SyncfusionPdfExport)}(this,function(e,t,i,l){return function(e){function t(l){if(i[l])return i[l].exports;var n=i[l]={i:l,l:!1,exports:{}};return e[l].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,l){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:l})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=18)}([function(e,t,i){"use strict";function l(e,t){return null!==e&&void 0!==e?-1!==e.indexOf("%")?t/100*parseInt(e,10):parseInt(e,10):null}function n(e,t){var l=e||"",n=document.getElementById("heatmapmeasuretext");if(null===n&&(n=i.i(P.createElement)("text",{id:"heatmapmeasuretext"}),document.body.appendChild(n)),"string"==typeof e&&(e.indexOf("<")>-1||e.indexOf(">")>-1)){for(var a=e.split(" "),o=0;o<a.length;o++)-1===a[o].indexOf("<br/>")&&(a[o]=a[o].replace(/[<>]/g,"&"));e=a.join(" ")}return n.innerText=l.indexOf("<br>")>-1||l.indexOf("<br/>")>-1?l:e,n.style.position="absolute",n.style.visibility="hidden",n.style.fontSize=-1!==t.size.indexOf("px")?t.size:t.size+"px",n.style.fontWeight=t.fontWeight,n.style.fontStyle=t.fontStyle,n.style.fontFamily=t.fontFamily,n.style.top="-100",n.style.left="0",n.style.whiteSpace="nowrap",n.style.lineHeight="normal",new z(n.clientWidth,n.clientHeight)}function a(e,t,i,l){return"Near"===l.textAlignment?t:"Center"===l.textAlignment?t+e/2:e+t}function o(e,t,l,n,a,o,h){var d=s(e,t),p=null,c=t.dataSource;if(!t.dataSourceSettings.isJsonData||"Cell"!==t.dataSourceSettings.adaptorType&&"Table"!==t.dataSourceSettings.adaptorType)p={value:n.value,xLabel:a[n.xIndex],yLabel:o[n.yIndex]};else{var u="Numeric"===t.yAxis.valueType?t.yAxis.labels:o,g="Numeric"===t.xAxis.valueType?t.xAxis.labels:a;c.forEach(function(e){var i="Cell"===t.dataSourceSettings.adaptorType?Object.keys(e).some(function(t){return e[t]===u[n.yIndex]}):Object.prototype.hasOwnProperty.call(e,u[n.yIndex]);Object.keys(e).some(function(t){return e[t]===g[n.xIndex]})&&i&&(p=e)})}if(!i.i(P.isNullOrUndefined)(d)){var v=d(p,t,d,t.element.id+"_Template"+h,!1),m=r(v,t.element.id+"_LabelTemplate_"+h);m.style.cssText="opacity: 1; display: flex; align-items: center; justify-content: center; z-index: 2; position: absolute;top:"+n.y+"px;left:"+n.x+"px;height:"+n.height+"px;width:"+n.width+"px;";for(var y=0;y<m.children.length;y++)m.children[y].style.pointerEvents="none";l.appendChild(m)}return l}function s(e,t){var l=null;try{"function"!=typeof e&&document.querySelectorAll(e).length?l=i.i(P.compile)(document.querySelector(e).innerHTML.trim()):t.isVue||t.isVue3?l=i.i(P.compile)(e):"function"==typeof e&&(l=i.i(P.compile)(e))}catch(t){l=i.i(P.compile)(e)}return l}function r(e,t){var l=i.i(P.createElement)("div",{id:t});l.style.cssText="position: absolute;pointer-events: auto;";for(var n=e.length;n>0;)l.appendChild(e[0]),n--;return l}function h(e){for(var t=0,i=0,l=e;i<l.length;i++){t+=l[i]}return t}function d(e,t,i,l){return"Near"===l.textAlignment?e.height-i:"Center"===l.textAlignment?e.height/2:t}function p(e,t,l){var a,o,s,r,h=new O.SvgRenderer("heatmapMeasureRotateText"),d=h.createSvg({id:"heatmapMeasureRotateText_svg",width:100,height:100}),p={"font-size":e.size,"font-style":e.fontStyle.toLowerCase(),"font-family":e.fontFamily,"font-weight":e.fontWeight.toLowerCase(),transform:"rotate("+l+", 0, 0)","text-anchor":"middle"},c=h.createText(p,t[0]);if("string"!=typeof t&&t.length>1)for(var u=1,g=t.length;u<g;u++)a=n(t[u],e).height,o=0+u*a,s=t[u],r=h.createTSpan({x:0,id:"heatmapMeasureRotateText_"+u,y:o},s),c.appendChild(r);d.appendChild(c),document.body.appendChild(d);var v=c.getBoundingClientRect();return i.i(P.remove)(d),new z(v.right-v.left,v.bottom-v.top)}function c(e,t,i){var l=[];switch(t.textOverflow){case"Wrap":l=g(e,i,t);break;case"Trim":l.push(v(i,e,t));break;default:l.push(m(i,e,t))}return l}function u(e){for(var t=!1,i=0;i<e.length;i++)if(-1!==e[i].indexOf("<br>")||-1!==e[i].indexOf("<br/>")){t=!0;break}return t}function g(e,t,i){for(var l,a=e.split(" "),o="",s=[],r=0,h=a.length;r<h;r++)l=a[r],n(o.concat(l),i).width<t?o=o.concat((""===o?"":" ")+l):""!==o?(s.push(v(t,o,i)),o=l):(s.push(v(t,l,i)),l=""),o&&r===h-1&&s.push(v(t,o,i));return s}function v(e,t,i){var l=t,a=n(t,i).width;if(a>e)for(var o=t.length,s=o-1;s>=0;--s)if(l=t.substring(0,s)+"...",(a=n(l,i).width)<=e)return l;return l}function m(e,t,i){var l=t,a=n(t,i).width;if(a>e)for(var o=t.length,s=o-1;s>=0;--s)if(l=t.substring(0,s),(a=n(l,i).width)<=e)return l;return l}function y(e,t,l,a,o,s,r,h){var d=document.getElementById(o),p=n(e,{fontFamily:"Segoe UI",size:"12px",fontStyle:"Normal",fontWeight:"Regular"}),c=p.width+5;t=t+c>a?t-c:t,t=t<0?5:t,d?(d.innerText=e,d.style.top=(l+15).toString()+"px",d.style.left=(t+15).toString()+"px"):(d=i.i(P.createElement)("div",{id:o}),d.style.cssText="top:"+(l+15).toString()+"px;left:"+(t+15).toString()+"px;background-color: rgb(255, 255, 255) !important; color:black !important; position:absolute;border:1px solid rgb(112, 112, 112); padding-left : 3px; padding-right : 2px;padding-bottom : 2px; padding-top : 2px; font-size:12px; font-family: Segoe UI",d.innerText=e,s.appendChild(d)),e===h.titleSettings.text?d.style.width=t+15+p.width+7>h.availableSize.width?(h.availableSize.width-(t+15)).toString()+"px":"":(d.style.left=t+15+p.width+7>h.availableSize.width?(h.availableSize.width-(p.width+7)).toString()+"px":t.toString()+"px",d.style.top=l+15+p.height+6>h.availableSize.height?(l-(p.height+6)-10).toString()+"px":d.style.top),r&&(this.tooltipTimer&&window.clearTimeout(this.tooltipTimer),this.tooltipTimer=setTimeout(function(){f(o)},1500))}function f(e){var t=b(e);t&&(i.i(P.remove)(t),x())}function x(){f("heatmapmeasuretext")}function b(e){return document.getElementById(e)}function S(e,t,i,l){var n=new Date(e);switch(t=Math.ceil(t*l),i){case"Years":n.setFullYear(n.getFullYear()+t);break;case"Months":n.setMonth(n.getMonth()+t);break;case"Days":n.setDate(n.getDate()+t);break;case"Hours":n.setHours(n.getHours()+t);break;case"Minutes":n.setMinutes(n.getMinutes()+t)}return n}function C(e,t,i){for(var l,n,a,o=e.length,s=0;s<o;s++)if(l=e[s],n=l.region,t>=n.x&&t<=n.x+n.width&&i>=n.y&&i<=n.y+n.height){a=l.text;break}return a}function M(e){e="transparent"===e?"white":e;var t=document.getElementById("heatmapmeasuretext");t.style.color=e,e=window.getComputedStyle(t).color;var i=e.replace(/[()RGBrgba ]/g,"").split(",");return w(new A.b(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)))}function w(e){return"#"+L(e.R)+L(e.G)+L(e.B)}function L(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function R(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?new A.b(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)):new A.b(255,255,255)}function T(e,t,i,l){return e?t.replace("{value}",l(i)):l(i)}t.a=l,t.b=n,i.d(t,"c",function(){return D}),t.d=a,i.d(t,"e",function(){return z}),i.d(t,"f",function(){return V}),i.d(t,"g",function(){return I}),t.h=o,t.i=s,t.j=r,i.d(t,"k",function(){return E}),i.d(t,"l",function(){return B}),i.d(t,"m",function(){return N}),i.d(t,"n",function(){return F}),i.d(t,"o",function(){return H}),i.d(t,"p",function(){return G}),i.d(t,"q",function(){return k}),i.d(t,"r",function(){return j}),i.d(t,"s",function(){return W}),i.d(t,"t",function(){return U}),i.d(t,"u",function(){return Y}),t.v=h,t.w=d,t.x=p,i.d(t,"y",function(){return X}),t.z=c,t.A=u,t.B=g,t.C=v,t.D=m,i.d(t,"E",function(){return J}),i.d(t,"F",function(){return q}),t.G=y,t.H=f,t.I=x,t.J=b,t.K=S,i.d(t,"L",function(){return K}),t.M=C,i.d(t,"N",function(){return Q}),i.d(t,"O",function(){return Z}),i.d(t,"P",function(){return $}),i.d(t,"Q",function(){return ee}),i.d(t,"R",function(){return te}),t.S=M,t.T=w,t.U=L,t.V=R,t.W=T,i.d(t,"X",function(){return ie});var P=i(1),O=(i.n(P),i(4)),A=(i.n(O),i(5)),_=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function l(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(l.prototype=i.prototype,new l)}}(),D=function(){function e(e,t){this["font-size"]=e.size,this["font-style"]=e.fontStyle.toLowerCase(),this["font-family"]=e.fontFamily,this["font-weight"]=e.fontWeight.toLowerCase(),this.fill=t||""}return e}(),z=function(){function e(e,t){this.width=e,this.height=t}return e}(),V=function(){function e(e){this.id=e}return e}(),I=function(e){function t(t,i,l,n,a,o,s){var r=e.call(this,t)||this;return r.opacity=a,r.fill=i,r.stroke=n||"",r["stroke-width"]=parseFloat(l.toString()),r["stroke-dasharray"]=o,r.d=s,r}return _(t,e),t}(V),E=function(){function e(e,t,i,l,n,a,o,s,r,h,d,p,c,u){this.x=e,this.y=t,this.width=i,this.height=l,this.value=n,this.id=a,this.xIndex=o,this.yIndex=s,this.xValue=r,this.yValue=h,this.visible=d,this.displayText=p,this.textId=c,this.allowCollection=u}return e}(),B=function(){function e(e,t,i,l,n,a,o,s,r,h,d,p){this.value=e,this.xLabel=t,this.yLabel=i,this.xValue=l,this.yValue=n,this.cellElement=a,this.xPosition=o,this.yPosition=s,this.width=r,this.height=h,this.x=d,this.y=p}return e}(),N=function(e){function t(t,i,l,n,a,o,s,r,h,d){var p=e.call(this,t,i,l.width,o,n,d)||this;return p.y=a.y,p.x=a.x,p.height=a.height>0?a.height:0,p.width=a.width>0?a.width:0,p.rx=s||0,p.ry=r||0,p.transform=h||"",p}return _(t,e),t}(I),F=function(e){function t(t,i,l,n,a,o,s,r){var h=e.call(this,t,i,l.width,a,n)||this;return h.cx=o||0,h.cy=s||0,h.r=r||0,h}return _(t,e),t}(I),H=function(){function e(e,t,i,l){this.x=e,this.y=t,this.width=i,this.height=l}return e}(),G=function(e){function t(t,i,l,n){var a=e.call(this,l,n)||this;return a.transform="",a["dominant-baseline"]="auto",a.labelRotation=0,a.baseline="auto",a.id=t,a.x=i.x,a.y=i.y,a["text-anchor"]=i["text-anchor"],a.text=i.text,a.transform=i.transform,a.labelRotation=i.labelRotation,a["dominant-baseline"]=i["dominant-baseline"],a.baseline=i.baseline,a.dy=i.dy,a}return _(t,e),t}(D),k=function(){function e(e,t,i,l,n,a,o,s){this.transform="",this["dominant-baseline"]="auto",this.labelRotation=0,this.baseline="auto",this.x=e||0,this.y=t||0,this["text-anchor"]=i||"start",this.text=l||"",this.transform=a||"",this.labelRotation=n,this["dominant-baseline"]=o||"auto",this.baseline=o||"",this.dy=s||""}return e}(),j=function(){function e(e,t,i,l){this.x1=e,this.y1=t,this.x2=i,this.y2=l}return e}(),W=function(e){function t(t,i,l,n,a,o){var s=e.call(this,t,null,n,l,a,o,null)||this;return s.x1=i.x1,s.y1=i.y1,s.x2=i.x2,s.y2=i.y2,s}return _(t,e),t}(I),U=function(e){function t(t,i,l,n,a,o,s){var r=e.call(this,t,l,a,s,o,null)||this;return r.d=i.d,r.x=i.x,r.y=i.y,r}return _(t,e),t}(I),Y=function(){function e(e,t,i,l,n,a,o,s,r,h,d,p){this.d=e,this.innerR=t,this.cx=o,this.cy=s,this.x=i,this.y=l,this.x1=n,this.y1=a,this.start=r,this.end=h,this.radius=d,this.counterClockWise=p}return e}(),X=function(){function e(e){this.heatMap=e}return e.prototype.drawRectangle=function(e,t,i){this.heatMap.enableCanvasRendering?this.drawCanvasRectangle(this.heatMap.canvasRenderer,e,i):(delete e.d,t.appendChild(this.heatMap.renderer.drawRectangle(e)))},e.prototype.drawCircle=function(e,t){this.heatMap.enableCanvasRendering?this.drawCanvasCircle(this.heatMap.canvasRenderer,e):(delete e.d,t.appendChild(this.heatMap.renderer.drawCircle(e)))},e.prototype.drawPath=function(e,t,i){this.heatMap.enableCanvasRendering?this.drawCanvasPath(this.heatMap.canvasRenderer,e,t):(delete e.x,delete e.y,i.appendChild(this.heatMap.renderer.drawPath(e)))},e.prototype.createText=function(e,t,i){this.heatMap.enableCanvasRendering?this.canvasDrawText(e,i):(delete e.labelRotation,delete e.baseline,delete e.text,t.appendChild(this.heatMap.renderer.createText(e,i)),e.text=i)},e.prototype.createWrapText=function(e,t,i){var l,a,o,s={};s={id:e.id,x:e.x,y:e.y,fill:e.fill,"font-size":t.size,"font-style":t.fontStyle,"font-family":t.fontFamily,"font-weight":t.fontWeight.toLowerCase(),"text-anchor":e["text-anchor"],transform:e.transform,"dominant-baseline":e["dominant-baseline"]};var r=e.text[0];if(this.heatMap.enableCanvasRendering?this.heatMap.canvasRenderer.createText(e,r):l=this.heatMap.renderer.createText(s,r),"string"!=typeof e.text&&e.text.length>1)for(var h=1,d=e.text.length;h<d;h++)o=n(e.text[h],t).height,this.heatMap.enableCanvasRendering?(e.id=e.id+h,e.y+=o,this.heatMap.canvasRenderer.createText(e,e.text[h])):(a=this.heatMap.renderer.createTSpan({x:e.x,id:e.id+h,y:e.y+h*o},e.text[h]),l.appendChild(a));this.heatMap.enableCanvasRendering||i.appendChild(l)},e.prototype.drawLine=function(e,t){this.heatMap.enableCanvasRendering?this.heatMap.canvasRenderer.drawLine(e):(delete e.d,t.appendChild(this.heatMap.renderer.drawLine(e)))},e.prototype.canvasDrawText=function(e,t,l,n,a,o,s){var r=this.heatMap.canvasRenderer.ctx;l||(l=e.x),n||(n=e.y);var h=this.getOptionValue(e,"font-weight");i.i(P.isNullOrUndefined)(h)||"regular"!==h.toLowerCase()||(h="normal");var d=this.getOptionValue(e,"font-family"),p=-1===e["font-size"].toString().indexOf("px")?e["font-size"]+"px":e["font-size"],c=this.getOptionValue(e,"text-anchor"),u=this.getOptionValue(e,"font-style").toLowerCase(),g=u+" "+h+" "+p+" "+d;if("middle"===c&&(c="center"),r.save(),r.fillStyle=e.fill,r.font=g,r.textAlign=c,e.baseline&&(r.textBaseline=e.baseline),r.translate(l,n),r.rotate(e.labelRotation*Math.PI/180),s)for(var v=0;v<a.length;v++)e.y=0!==v?e.y+o:e.y,r.fillText(a[v],e.x-l,e.y-n);else r.fillText(t,e.x-l,e.y-n);r.restore()},e.prototype.getOptionValue=function(e,t){return e[t]},e.prototype.setAttributes=function(e,t){e.ctx.lineWidth=t["stroke-width"];var l=t["stroke-dasharray"];if(!i.i(P.isNullOrUndefined)(l)){var n=l.split(",");e.ctx.setLineDash([parseInt(n[0],10),parseInt(n[1],10)])}e.ctx.strokeStyle=t.stroke},e.prototype.drawCanvasRectangle=function(e,t,i){var l=e.ctx;e.ctx.save(),e.ctx.beginPath(),e.ctx.globalAlpha=t.opacity,this.setAttributes(e,t),this.drawCornerRadius(e,t),(t["stroke-width"]&&0!==t["stroke-width"]||i)&&e.ctx.stroke(),e.ctx.restore(),e.ctx=l},e.prototype.drawCornerRadius=function(e,t){var i=t.rx,l=t.x,n=t.y,a=t.width,o=t.height;"none"===t.fill&&(t.fill="transparent"),e.ctx.fillStyle=t.fill,a<2*i&&(i=a/2),o<2*i&&(i=o/2),e.ctx.beginPath(),e.ctx.moveTo(l+a-i,n),e.ctx.arcTo(l+a,n,l+a,n+o,i),e.ctx.arcTo(l+a,n+o,l,n+o,i),e.ctx.arcTo(l,n+o,l,n,i),e.ctx.arcTo(l,n,l+a,n,i),e.ctx.closePath(),e.ctx.fill()},e.prototype.drawCanvasCircle=function(e,t){e.ctx.save(),e.ctx.beginPath(),e.ctx.arc(t.cx,t.cy,t.r,0,2*Math.PI),e.ctx.fillStyle=t.fill,e.ctx.globalAlpha=t.opacity,e.ctx.fill(),this.setAttributes(e,t),t["stroke-width"]&&0!==t["stroke-width"]&&e.ctx.stroke(),e.ctx.restore()},e.prototype.drawCanvasPath=function(e,t,i){var l=t.d,n=l.split(" ");e.ctx.save(),e.ctx.beginPath(),e.ctx.globalAlpha=t.opacity,e.ctx.fillStyle=t.fill,this.setAttributes(e,t);for(var a=0;a<n.length;a+=3){var o=parseFloat(n[a+1]),s=parseFloat(n[a+2]);switch(n[a]){case"M":e.ctx.moveTo(o,s);break;case"L":e.ctx.lineTo(o,s);break;case"A":case"a":e.ctx.arc(i.x,i.y,i.radius,.0174533*i.start,.0174533*i.end,!1),a="a"===n[a]?a+13:a+5;break;case"Z":e.ctx.closePath()}}e.ctx.fill(),t["stroke-width"]&&0!==t["stroke-width"]&&e.ctx.stroke(),e.ctx.restore()},e}(),J=function(){function e(e,t,i,l,n){this.id=e,this.x1=t,this.x2=i,this.y1=l,this.y2=n}return e}(),q=function(){function e(e,t){this.color=e,this.colorStop=t}return e}(),K=function(){function e(e,t){this.region=new H(0,0,0,0),this.text=e,this.region=t}return e}(),Q=function(){function e(){}return e}(),Z=function(){function e(e,t,i,l,n,a){this.pathX1=e,this.pathY1=t,this.pathX2=i,this.pathY2=l,this.pathX3=n,this.pathY3=a}return e}(),$=function(){function e(e,t,i,l,n,a){this.x=e,this.y=t,this.width=i,this.height=l,this.label=n,this.id=a}return e}(),ee=function(){function e(e,t,i,l,n,a,o){this.x=e,this.y=t,this.width=i,this.height=l,this.value=n,this.visible=a,this.currentPage=o}return e}(),te=function(){function e(e,t,i,l){this.visible=e,this.value=t,this.startValue=i,this.endValue=l}return e}(),ie=function(){function e(e,t){this.x=e,this.y=t}return e}()},function(t,i){t.exports=e},function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i.d(t,"b",function(){return r}),i.d(t,"c",function(){return h}),i.d(t,"d",function(){return d}),i.d(t,"e",function(){return p}),i.d(t,"f",function(){return c}),i.d(t,"g",function(){return u}),i.d(t,"h",function(){return g}),i.d(t,"i",function(){return v}),i.d(t,"j",function(){return m}),i.d(t,"k",function(){return y}),i.d(t,"l",function(){return f}),i.d(t,"m",function(){return x}),i.d(t,"n",function(){return b}),i.d(t,"o",function(){return S}),i.d(t,"p",function(){return C});var l=i(1),n=(i.n(l),i(3)),a=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function l(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(l.prototype=i.prototype,new l)}}(),o=this&&this.__decorate||function(e,t,i,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,l);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,i,o):n(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(l.Property)("16px")],t.prototype,"size",void 0),o([i.i(l.Property)("")],t.prototype,"color",void 0),o([i.i(l.Property)("Segoe UI")],t.prototype,"fontFamily",void 0),o([i.i(l.Property)("Normal")],t.prototype,"fontWeight",void 0),o([i.i(l.Property)("Normal")],t.prototype,"fontStyle",void 0),o([i.i(l.Property)("Center")],t.prototype,"textAlignment",void 0),o([i.i(l.Property)("Trim")],t.prototype,"textOverflow",void 0),t}(l.ChildProperty),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(l.Property)(10)],t.prototype,"left",void 0),o([i.i(l.Property)(10)],t.prototype,"right",void 0),o([i.i(l.Property)(10)],t.prototype,"top",void 0),o([i.i(l.Property)(10)],t.prototype,"bottom",void 0),t}(l.ChildProperty),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(l.Property)("")],t.prototype,"color",void 0),o([i.i(l.Property)(1)],t.prototype,"width",void 0),o([i.i(l.Property)("")],t.prototype,"radius",void 0),t}(l.ChildProperty),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(l.Property)("")],t.prototype,"color",void 0),o([i.i(l.Property)(0)],t.prototype,"width",void 0),t}(l.ChildProperty),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(l.Property)(null)],t.prototype,"size",void 0),o([i.i(l.Property)(null)],t.prototype,"color",void 0),t}(l.ChildProperty),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(l.Property)("")],t.prototype,"text",void 0),o([i.i(l.Complex)({},s)],t.prototype,"textStyle",void 0),t}(l.ChildProperty),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(l.Property)("#eeeeee")],t.prototype,"minColor",void 0),o([i.i(l.Property)("#eeeeee")],t.prototype,"maxColor",void 0),t}(l.ChildProperty),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(l.Property)(null)],t.prototype,"value",void 0),o([i.i(l.Property)(null)],t.prototype,"color",void 0),o([i.i(l.Property)(null)],t.prototype,"label",void 0),o([i.i(l.Property)(null)],t.prototype,"startValue",void 0),o([i.i(l.Property)(null)],t.prototype,"endValue",void 0),o([i.i(l.Property)(null)],t.prototype,"minColor",void 0),o([i.i(l.Property)(null)],t.prototype,"maxColor",void 0),t}(l.ChildProperty),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(l.Property)("#b5b5b5")],t.prototype,"color",void 0),o([i.i(l.Property)(1)],t.prototype,"width",void 0),o([i.i(l.Property)("Rectangle")],t.prototype,"type",void 0),t}(l.ChildProperty),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(l.Property)("0%")],t.prototype,"minimum",void 0),o([i.i(l.Property)("100%")],t.prototype,"maximum",void 0),t}(l.ChildProperty),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(l.Property)(null)],t.prototype,"start",void 0),o([i.i(l.Property)(null)],t.prototype,"end",void 0),o([i.i(l.Property)("")],t.prototype,"text",void 0),o([i.i(l.Property)(null)],t.prototype,"maximumTextWidth",void 0),t}(l.ChildProperty),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(l.Property)("Center")],t.prototype,"alignment",void 0),o([i.i(l.Property)("Wrap")],t.prototype,"overflow",void 0),o([i.i(l.Complex)(n.a.axisLabelFont,s)],t.prototype,"textStyle",void 0),o([i.i(l.Complex)({color:"#b5b5b5",width:1,type:"Rectangle"},v)],t.prototype,"border",void 0),o([i.i(l.Collection)([],y)],t.prototype,"categories",void 0),t}(l.ChildProperty),x=function(){function e(e,t,i,l,n,a,o){this.value=e,this.color=t,this.label=i,this.startValue=l,this.endValue=n,this.minColor=a,this.maxColor=o}return e}(),b=function(){function e(e,t,i){this.mappingName=e,this.bubbleData=t,this.valueType=i}return e}(),S=function(){function e(e,t,i,l,n,a,o,s){this.value=e,this.color=t,this.label=i,this.startValue=l,this.endValue=n,this.minColor=a,this.maxColor=o,this.isHidden=s}return e}(),C=function(){function e(e,t,i,l,n){this.index=1,this.row=1,this.start=e,this.end=t,this.index=i,this.label=l,this.row=n}return e}()},function(e,t,i){"use strict";function l(e){var t;switch(e.toLowerCase()){case"highcontrastlight":case"highcontrast":t={heatMapTitle:"#ffffff",axisTitle:"#ffffff",axisLabel:"#ffffff",cellBorder:"#EEEEEE",background:"#000000",cellTextColor:"#000000",toggledColor:"#000000",emptyCellColor:"#EEEEEE",legendLabel:"#ffffff",palette:[{color:"#BEE7EE"},{color:"#85c4cf"},{color:"#4CA1AF"}]};break;case"materialdark":case"fabricdark":case"bootstrapdark":t={heatMapTitle:"#ffffff",axisTitle:"#ffffff",axisLabel:"#DADADA",cellBorder:"#EEEEEE",background:"#000000",cellTextColor:"#000000",toggledColor:"#000000",emptyCellColor:"#EEEEEE",legendLabel:"#ffffff",palette:[{color:"#BEE7EE"},{color:"#85c4cf"},{color:"#4CA1AF"}]};break;case"bootstrap4":t={heatMapTitle:"#212529",axisTitle:"#212529",axisLabel:"#212529",cellBorder:"#E9ECEF",background:"#FFFFFF",cellTextColor:"#212529",toggledColor:"#ffffff",emptyCellColor:"#E9ECEF",legendLabel:"#212529",palette:[{color:"#BEE7EE"},{color:"#85c4cf"},{color:"#4CA1AF"}]};break;case"tailwind":t={heatMapTitle:"#374151",axisTitle:"#374151",axisLabel:"#6B7280",cellBorder:"#E5E7EB",background:"transparent",cellTextColor:"#111827",toggledColor:"transparent",emptyCellColor:"#E5E7EB",legendLabel:"#374151",palette:[{color:"#5A61F6"},{color:"#65A30D"},{color:"#14B8A6"}]};break;case"tailwinddark":t={heatMapTitle:"#D1D5DB",axisTitle:"#D1D5DB",axisLabel:"#9CA3AF",cellBorder:"#4B5563",background:"transparent",cellTextColor:"#FFFFFF",toggledColor:"transparent",emptyCellColor:"#374151",legendLabel:"#D1D5DB",palette:[{color:"#8B5CF6"},{color:"#22D3EE"},{color:"#F87171"}]};break;case"bootstrap5":t={heatMapTitle:"#343A40",axisTitle:"#343A40",axisLabel:"#495057",cellBorder:"#D1D5DB",background:"transparent",cellTextColor:"#111827",toggledColor:"transparent",emptyCellColor:"#E5E7EB",legendLabel:"#343A40",palette:[{color:"#D7E7FF"},{color:"#0D6EFD"},{color:"#013889"}]};break;case"bootstrap5dark":t={heatMapTitle:"#E9ECEF",axisTitle:"#E9ECEF",axisLabel:"#CED4DA",cellBorder:"#4B5563",background:"transparent",cellTextColor:"#FFFFFF",toggledColor:"transparent",emptyCellColor:"#343A40",legendLabel:"#E9ECEF",palette:[{color:"#A860F1"},{color:"#5ECB9B"},{color:"#557EF7"}]};break;case"fluent":t={heatMapTitle:"#201F1E",axisTitle:"#201F1E",axisLabel:"#201F1E",cellBorder:"#EDEBE9",background:"transparent",cellTextColor:"#111827",toggledColor:"transparent",emptyCellColor:"#EDEBE9",legendLabel:"#201F1E",palette:[{color:"#EDEBE9"},{color:"#614570"},{color:"#4C6FB1"}]};break;case"fluentdark":t={heatMapTitle:"#F3F2F1",axisTitle:"#F3F2F1",axisLabel:"#F3F2F1",cellBorder:"#EDEBE9",background:"transparent",cellTextColor:"#FFFFFF",toggledColor:"transparent",emptyCellColor:"#292827",legendLabel:"#F3F2F1",palette:[{color:"#292827"},{color:"#2A72D5"},{color:"#43B786"}]};break;case"material3":t={heatMapTitle:"#1C1B1F",axisTitle:"#1C1B1F",axisLabel:"#1C1B1F",cellBorder:"#C4C7C5",background:"transparent",cellTextColor:"#1C1B1F",toggledColor:"#F6F0FB",emptyCellColor:"#F6F0FB",legendLabel:"#49454E",palette:[{color:"#6200EE"},{color:"#E77A16"},{color:"#82C100"}]};break;case"material3dark":t={heatMapTitle:"#E6E1E5",axisTitle:"#E6E1E5",axisLabel:"#E6E1E5",cellBorder:"#444746",background:"transparent",cellTextColor:"#E6E1E5",toggledColor:"#49454F",emptyCellColor:"#49454E",legendLabel:"#CAC4D0",palette:[{color:"#4EAAFF"},{color:"#FA4EAB"},{color:"#FFF500"}]};break;default:t={heatMapTitle:"#424242",axisTitle:"#424242",axisLabel:"#686868",cellBorder:"#EEEEEE",cellTextColor:"#000000",toggledColor:"#ffffff",background:"#FFFFFF",emptyCellColor:"#EEEEEE",legendLabel:"#353535",palette:[{color:"#BEE7EE"},{color:"#85c4cf"},{color:"#4CA1AF"}]}}return t}i.d(t,"a",function(){return n}),t.b=l;var n;!function(e){e.heatMapTitleFont={size:"15px",fontWeight:"500",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},e.titleFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI",textOverflow:"None"},e.axisTitleFont={size:"12px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},e.axisLabelFont={size:"12px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI",textOverflow:"None"},e.legendLabelFont={size:"12px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI",textOverflow:"None"},e.rectLabelFont={size:"12px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI",textOverflow:"None"},e.tooltipFont={size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI",textOverflow:"None"}}(n||(n={}))},function(e,i){e.exports=t},function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return h}),i.d(t,"c",function(){return d});var l=i(1),n=(i.n(l),i(2)),a=i(0),o=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function l(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(l.prototype=i.prototype,new l)}}(),s=this&&this.__decorate||function(e,t,i,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,l);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,i,o):n(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),s([i.i(l.Collection)([{}],n.h)],t.prototype,"palette",void 0),s([i.i(l.Property)("Gradient")],t.prototype,"type",void 0),s([i.i(l.Property)("")],t.prototype,"emptyPointColor",void 0),s([i.i(l.Property)("Table")],t.prototype,"colorGradientMode",void 0),s([i.i(l.Complex)({},n.g)],t.prototype,"fillColor",void 0),t}(l.ChildProperty),h=function(){function e(e,t,i){this.R=e,this.G=t,this.B=i}return e}(),d=function(){function e(e){this.heatMap=e}return e.prototype.convertToRGB=function(e,t){var i,l,n=this.heatMap.isColorRange?t[0].startValue:t[0].value,a=0,o=0;if(this.heatMap.isColorRange&&"Gradient"===this.heatMap.paletteSettings.type)for(o=0;o<t.length;o++){var s=Number(t[o].endValue);if(e<=s&&e>=Number(t[o].startValue)){a=s,i=this.heatMap.colorCollection[o].minColor,l=this.heatMap.colorCollection[o].maxColor;break}if(t[0].startValue!==this.heatMap.dataSourceMinValue&&e<t[0].startValue){a=t[0].startValue,n=this.heatMap.dataSourceMinValue,i=this.heatMap.paletteSettings.fillColor.minColor,l=this.heatMap.paletteSettings.fillColor.maxColor;break}if(e>s&&e<=(o===t.length-1?this.heatMap.dataSourceMaxValue:t[o+1].startValue)){a=o===t.length-1?this.heatMap.dataSourceMaxValue:t[o+1].startValue,n=s,i=this.heatMap.paletteSettings.fillColor.minColor,l=this.heatMap.paletteSettings.fillColor.maxColor;break}a=s,n=s}else for(o=1;o<t.length;o++){var s=Number(t[o].value);if(e<=s){a=s,i=this.getEqualColor(t,n),l=this.getEqualColor(t,a);break}a=s,n=s}var r=0;return r=(e-n)/(a-n),r=isNaN(r)?0:r,this.getPercentageColor(r,i,l)},e.prototype.rgbToHex=function(e,t,i){return"#"+this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(i)},e.prototype.componentToHex=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},e.prototype.getEqualColor=function(e,t){for(var i=0;i<e.length;i++)if(Number(e[i].value)===t){var l=e[i].color;return-1!==l.indexOf("rgb")?l=this.convertToHex(l):-1===l.indexOf("#")&&(l="#FFFFFF"),l}return"#00000"},e.prototype.convertToHex=function(e){var t=e.substr(3);t=t.split("(")[1].split(")")[0];var i=t.split(",");return t=this.rgbToHex(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10))},e.prototype.getPercentageColor=function(e,t,i){var l=i.split("#")[1],n=t.split("#")[1],a=this.getPercentage(e,parseInt(n.substr(0,2),16),parseInt(l.substr(0,2),16)),o=this.getPercentage(e,parseInt(n.substr(2,2),16),parseInt(l.substr(2,2),16)),s=this.getPercentage(e,parseInt(n.substr(4,2),16),parseInt(l.substr(4,2),16));return new h(a,o,s)},e.prototype.getPercentage=function(e,t,i){var l=i-t;return Math.round(t+l*e)},e.prototype.getColorCollection=function(){var e=this.heatMap;e.colorCollection=[],e.legendColorCollection=[];for(var t,a=0;a<this.heatMap.paletteSettings.palette.length;a++){if(null===this.heatMap.paletteSettings.palette[a].startValue||null===this.heatMap.paletteSettings.palette[a].endValue){this.heatMap.isColorRange=!1;break}this.heatMap.isColorRange=!0}var o=e.bubbleSizeWithColor?e.minColorValue:e.dataSourceMinValue,s=e.bubbleSizeWithColor?e.maxColorValue:e.dataSourceMaxValue;e.emptyPointColor=e.paletteSettings.emptyPointColor?e.paletteSettings.emptyPointColor:e.themeStyle.emptyCellColor;var r=this.orderbyOffset(this.heatMap.isColorRange?e.paletteSettings.palette:e.paletteSettings.palette&&e.paletteSettings.palette.length>1?e.paletteSettings.palette:e.themeStyle.palette);if(r.isCompact)e.colorCollection=r.offsets,e.legendColorCollection=i.i(l.extend)([],r.offsets,null,!0);else if(t="Gradient"===e.paletteSettings.type?(s-o)/(r.offsets.length-1):(s-o)/r.offsets.length,r.offsets.length>=2)for(var h=0;h<r.offsets.length;h++)e.colorCollection.push(new n.m(Math.round(100*(o+h*t))/100,r.offsets[h].color,r.offsets[h].label,r.offsets[h].startValue,r.offsets[h].endValue,r.offsets[h].minColor,r.offsets[h].maxColor)),e.legendColorCollection.push(new n.o(Math.round(100*(o+h*t))/100,r.offsets[h].color,r.offsets[h].label,r.offsets[h].startValue,r.offsets[h].endValue,r.offsets[h].minColor,r.offsets[h].maxColor,!1));this.heatMap.isColorRange||this.updateLegendColorCollection(o,s,r)},e.prototype.updateLegendColorCollection=function(e,t,i){"Fixed"===this.heatMap.paletteSettings.type&&(i.isCompact||i.isLabel)||(Math.round(100*e)/100<this.heatMap.legendColorCollection[0].value&&this.heatMap.legendColorCollection.unshift(new n.o(Math.round(100*e)/100,this.heatMap.legendColorCollection[0].color,this.heatMap.legendColorCollection[0].label,this.heatMap.legendColorCollection[0].startValue,this.heatMap.legendColorCollection[0].endValue,this.heatMap.legendColorCollection[0].minColor,this.heatMap.legendColorCollection[0].maxColor,!0)),Math.round(100*t)/100>this.heatMap.legendColorCollection[this.heatMap.legendColorCollection.length-1].value&&this.heatMap.legendColorCollection.push(new n.o(Math.round(100*t)/100,this.heatMap.legendColorCollection[this.heatMap.legendColorCollection.length-1].color,this.heatMap.legendColorCollection[this.heatMap.legendColorCollection.length-1].label,this.heatMap.legendColorCollection[this.heatMap.legendColorCollection.length-1].startValue,this.heatMap.legendColorCollection[this.heatMap.legendColorCollection.length-1].endValue,this.heatMap.legendColorCollection[this.heatMap.legendColorCollection.length-1].minColor,this.heatMap.legendColorCollection[this.heatMap.legendColorCollection.length-1].maxColor,!0)))},e.prototype.orderbyOffset=function(e){var t=new a.N,n=this.heatMap.isColorRange?"to":"value";return t.isCompact=!0,t.isLabel=!0,t.offsets=e.sort(function(e,a){return i.i(l.isNullOrUndefined)(e.label)&&i.i(l.isNullOrUndefined)(a.label)&&(t.isLabel=!1),i.i(l.isNullOrUndefined)(e[n])||i.i(l.isNullOrUndefined)(a[n])?(t.isCompact=!1,e):e[n]-a[n]}),t.isCompact||(t.offsets=this.heatMap.paletteSettings.palette&&this.heatMap.paletteSettings.palette.length>1?this.heatMap.paletteSettings.palette:this.heatMap.themeStyle.palette),t},e.prototype.getColorByValue=function(e){var t,i="",l=0;if(""!==e.toString())if("Bubble"!==this.heatMap.cellSettings.tileType||"Size"!==this.heatMap.cellSettings.bubbleType&&"Sector"!==this.heatMap.cellSettings.bubbleType)if("Fixed"===this.heatMap.paletteSettings.type)for(var n=0;n<this.heatMap.colorCollection.length;n++){l=this.heatMap.isColorRange?this.heatMap.paletteSettings.palette[n].startValue:this.heatMap.colorCollection[n+1]?this.heatMap.colorCollection[n+1].value:this.heatMap.colorCollection[n].value;var a=this.heatMap.dataSourceMinValue===this.heatMap.dataSourceMaxValue;if(this.heatMap.isColorRange){var o=void 0;if(e<=this.heatMap.colorCollection[n].endValue&&e>=this.heatMap.colorCollection[n].startValue){this.heatMap.legendVisibilityByCellType&&(o=this.heatMap.legendModule.legendRange),i=this.heatMap.legendVisibilityByCellType&&o[n]&&!o[n].visible?this.heatMap.themeStyle.toggledColor:this.heatMap.colorCollection[n].minColor;break}i=this.heatMap.paletteSettings.fillColor.minColor}else if(e<=l&&a&&0===n||e<l||e>=l&&n===this.heatMap.colorCollection.length-1){var o=void 0;this.heatMap.legendVisibilityByCellType&&(o=this.heatMap.legendModule.legendRange),i=this.heatMap.legendVisibilityByCellType&&o[n]&&!o[n].visible?this.heatMap.themeStyle.toggledColor:this.heatMap.colorCollection[n].color;break}}else"Table"!==this.heatMap.paletteSettings.colorGradientMode&&this.getColorCollection(),e<this.heatMap.colorCollection[0].value&&!this.heatMap.isColorRange?i=this.heatMap.colorCollection[0].color:e>this.heatMap.colorCollection[this.heatMap.colorCollection.length-1].value&&!this.heatMap.isColorRange?i=this.heatMap.colorCollection[this.heatMap.colorCollection.length-1].color:(t=this.convertToRGB(e,this.heatMap.colorCollection),i=this.rgbToHex(t.R,t.G,t.B));else i=this.heatMap.isColorRange?this.heatMap.colorCollection[0].minColor:this.heatMap.colorCollection[0].color;else i=this.heatMap.emptyPointColor;return i},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var l=i(0),n=i(1),a=(i.n(n),function(){function e(e){this.heatMap=e,this.padding=10,this.drawSvgCanvas=new l.y(e)}return e.prototype.renderAxes=function(){this.initialClipRect=this.heatMap.initialClipRect;var e,t,i=this.heatMap;i.enableCanvasRendering||(e=this.heatMap.renderer.createGroup({id:i.element.id+"AxisCollection"}));for(var l=this.heatMap.axisCollections,n=0,a=l.length;n<a;n++){var o=l[n];"Horizontal"===o.orientation?(i.enableCanvasRendering||(t=this.heatMap.renderer.createGroup({id:i.element.id+"XAxisGroup"})),this.drawXAxisLine(t,o),this.drawXAxisTitle(o,t,o.rect),this.drawXAxisLabels(o,t,o.rect)):(t=i.renderer.createGroup({id:i.element.id+"YAxisGroup"}),this.drawYAxisLine(t,o),this.drawYAxisTitle(o,t,o.rect),this.drawYAxisLabels(o,t,o.rect)),o.multiLevelLabels.length>0&&this.drawMultiLevels(t,o),i.enableCanvasRendering||e.appendChild(t)}i.enableCanvasRendering||this.heatMap.svgObject.appendChild(e)},e.prototype.drawXAxisLine=function(e,t){var i=this.initialClipRect.y+(t.opposedPosition?0:this.initialClipRect.height),n=new l.s(this.heatMap.element.id+"_XAxisLine",new l.r(this.initialClipRect.x,i,this.initialClipRect.x+this.initialClipRect.width,i),"transparent",0);this.drawSvgCanvas.drawLine(n,e)},e.prototype.drawYAxisLine=function(e,t){var i=this.initialClipRect.x+(t.opposedPosition?this.initialClipRect.width:0),n=new l.s(this.heatMap.element.id+"_YAxisLine",new l.r(i,this.initialClipRect.y,i,this.initialClipRect.height+this.initialClipRect.y),"transparent",0);this.drawSvgCanvas.drawLine(n,e)},e.prototype.drawXAxisTitle=function(e,t,n){var a="0px"===e.textStyle.size?0:10,o=n.y+(e.opposedPosition?-(e.maxLabelSize.height+a+i.i(l.v)(e.xAxisMultiLabelHeight)):e.maxLabelSize.height+a+i.i(l.v)(e.xAxisMultiLabelHeight));if(e.title.text){var s=this.heatMap,r=e.title,h=i.i(l.b)(r.text,r.textStyle),d=this.padding,p="Near"===r.textStyle.textAlignment?"start":"Far"===r.textStyle.textAlignment?"end":"middle";d=e.opposedPosition?-(d+h.height/4):d+3*h.height/4;var c=new l.p(s.element.id+"_XAxisTitle",new l.q(n.x+i.i(l.d)(n.width,0,0,r.textStyle),o+d,p,r.text),r.textStyle,r.textStyle.color||s.themeStyle.axisTitle);this.drawSvgCanvas.createText(c,t,r.text)}},e.prototype.drawYAxisTitle=function(e,t,n){if(e.title.text){var a=e.title,o=this.heatMap,s=e.opposedPosition?90:-90,r="Near"===a.textStyle.textAlignment?"start":"Far"===a.textStyle.textAlignment?"end":"middle",h=10;h=e.opposedPosition?h:-h;var d="0px"===e.textStyle.size?0:h,p=n.x+d+(e.opposedPosition?e.maxLabelSize.width+i.i(l.v)(e.yAxisMultiLabelHeight):-(e.maxLabelSize.width+i.i(l.v)(e.yAxisMultiLabelHeight))),c=n.y+i.i(l.w)(n,0,0,a.textStyle)+(e.opposedPosition?this.padding:-this.padding),u=new l.p(o.element.id+"_YAxisTitle",new l.q(p,c-this.padding,r,a.text,s,"rotate("+s+","+p+","+c+")","auto"),a.textStyle,a.textStyle.color||o.themeStyle.axisTitle);this.heatMap.enableCanvasRendering?this.drawSvgCanvas.canvasDrawText(u,a.text,p,c):this.drawSvgCanvas.createText(u,t,a.text)}},e.prototype.calculateVisibleLabels=function(){for(var e,t=this.heatMap,i=t.axisCollections,l=this.heatMap.dataSourceSettings,n=!(l&&l.isJsonData&&"Cell"===l.adaptorType),a=0,o=i.length;a<o;a++)e=i[a],"Numeric"===e.valueType&&n?(e.clearAxisLabel(),e.calculateNumericAxisLabels(this.heatMap)):"DateTime"===e.valueType&&n?(e.clearAxisLabel(),e.calculateDateTimeAxisLabel(this.heatMap)):"Category"===e.valueType&&(e.clearAxisLabel(),e.calculateCategoryAxisLabels()),e.tooltipLabels=e.isInversed?e.tooltipLabels.reverse():e.tooltipLabels},e.prototype.measureAxis=function(e){for(var t,n=this.heatMap,a=n.axisCollections,o=a.length-1;o>=0;o--){t=a[o];var s="0px"===t.textStyle.size?0:this.padding;t.nearSizes=[],t.farSizes=[],t.computeSize(t,n,e),t.opposedPosition?"Horizontal"===t.orientation?(e.y+=i.i(l.v)(t.farSizes)+s,e.height-=i.i(l.v)(t.farSizes)+s):e.width-=i.i(l.v)(t.farSizes)+s:"Horizontal"===t.orientation?e.height-=i.i(l.v)(t.nearSizes)+s:(e.x+=i.i(l.v)(t.nearSizes)+s,e.width-=i.i(l.v)(t.nearSizes)+s)}},e.prototype.calculateAxisSize=function(e){for(var t=this.heatMap,l=t.axisCollections,a=0,o=l.length;a<o;a++){var s=l[a];s.rect=i.i(n.extend)({},e,null,!0),"Horizontal"===s.orientation&&0!==s.multiLevelLabels.length&&(s.opposedPosition&&(s.rect.y+=0===s.angle||180===s.angle||360===s.angle?0:this.padding,this.heatMap.initialClipRect.y+=0===s.angle||180===s.angle||360===s.angle?0:this.padding),e.height-=0===s.angle||180===s.angle||360===s.angle?0:this.padding),"Horizontal"!==s.orientation||s.opposedPosition||(s.rect.y=e.y+e.height,s.rect.height=0),"Vertical"===s.orientation&&s.opposedPosition&&(s.rect.x=e.x+e.width,s.rect.width=0),s.multiLevelPosition=[];for(var r=0;r<s.multiLevelLabels.length;r++){var h=s.multiPosition(s,r);s.multiLevelPosition.push(h)}}},e.prototype.drawXAxisLabels=function(e,t,n){var a=this.heatMap,o=e.axisLabels,s=!1,r=this.heatMap.cellSettings.border.width>5?this.heatMap.cellSettings.border.width/2:0,h=(n.width-r)/e.axisLabelSize,d=0,p=e.interval?e.interval:1,c=n.width/(e.axisLabelSize/e.axisLabelInterval),u=e.axisLabelInterval;if(c>0)for(;c<parseInt(e.textStyle.size,10);)u+=1,c=n.width/(e.axisLabelSize/u);else u=e.tooltipLabels.length;e.axisLabelInterval<u&&(d=u,o=e.tooltipLabels,p=u);var g,v,m=10,y=n.x+(e.isInversed?n.width:0),f=e.angle;m=this.padding;var x,b;a.enableCanvasRendering||(x=this.heatMap.renderer.createGroup({id:a.element.id+"XAxisLabels"}),b=this.heatMap.renderer.createGroup({id:a.element.id+"XAxisLabelBorder"})),e.isInversed&&"MultipleRows"===e.labelIntersectAction&&e.multipleRow.reverse(),s=i.i(l.A)(o);for(var S=0,C=o.length;S<C;S++){var M=new l.o(y,n.y,h,n.height),w="Wrap"!==e.textStyle.textOverflow&&!s&&"Trim"!==e.textStyle.textOverflow&&"Trim"===e.labelIntersectAction&&e.isIntersect?"DateTime"!==e.valueType||"None"===e.showLabelOn?i.i(l.C)(h*p,o[S],e.textStyle):i.i(l.C)(e.dateTimeAxisLabelInterval[S]*h,o[S],e.textStyle):o[S];w=!e.enableTrim&&"Trim"!==e.textStyle.textOverflow||s?w:i.i(l.C)("Trim"===e.textStyle.textOverflow?h-e.border.width/2:e.maxLabelLength,o[S],e.textStyle);var L=w,R=[],T=new l.e(0,0);"Wrap"!==e.textStyle.textOverflow&&!s||e.enableTrim?(s&&e.enableTrim&&(R=this.getLabels(L,h-e.border.width/2,e,s),L=i.i(l.C)(e.maxLabelLength,R[0],e.textStyle),L=-1===w.indexOf("<br>")&&-1===w.indexOf("<br/>")||-1!==L.indexOf("...")?L:L+"...",R=[]),R.push(L)):(R=this.getLabels(L,h-e.border.width/2,e,s),L=this.getMaxLabel(R,e));var P=i.i(l.b)(L,e.textStyle),O=void 0;v=e.opposedPosition?-m:m+(f%360==0?P.height/2:0),P.width=e.isInversed&&P.width>h?h:P.width;var A=M.x+(e.isInversed?-M.width/2:M.width/2);if("Near"===e.textStyle.textAlignment?A=M.x-(e.isInversed?M.width:0):"Far"===e.textStyle.textAlignment&&(A=M.x+(e.isInversed?-P.width:M.width-P.width)),"Trim"===e.labelIntersectAction?A=e.isInversed?A>y-h?A:y-h:A>=M.x?A:M.x:f%180==0&&(A=A<n.x?n.x:A,A=A+P.width>n.x+n.width?n.x+n.width-P.width:A),"Wrap"!==e.textStyle.textOverflow&&!s||e.isInversed||(A=A<M.x?M.x:A),"MultipleRows"===e.labelIntersectAction&&"Wrap"!==e.textStyle.textOverflow&&"Trim"!==e.textStyle.textOverflow&&0===e.labelRotation){var _=e.opposedPosition?-(e.multipleRow[S].index-1):e.multipleRow[S].index-1;g=e.multipleRow[S].index>1?n.y+v+P.height*_+(e.opposedPosition?-.5*P.height/2*e.multipleRow[S].index:.5*P.height/2*e.multipleRow[S].index):n.y+v+(e.opposedPosition?-.5*P.height/2:.5*P.height/2)}else g=n.y+(("Wrap"===e.textStyle.textOverflow||s)&&e.opposedPosition&&f%360==0?-(e.farSizes.length>=1?e.farSizes[1]:0)+m:v);this.drawXAxisBorder(e,b,e.rect,A,P.width,S),f%360!=0&&(f=f>360?f%360:f,T=i.i(l.x)(e.textStyle,R,f),A=M.x+(e.isInversed?-M.width/2:M.width/2)+(90===f?P.height*((R.length-1)/2):270===f?-P.height*(R.length-1)/2:0),g+=e.opposedPosition?("Wrap"!==e.textStyle.textOverflow&&!s||e.enableTrim?-T.height/2:(f%360==180?m:0)+T.height/2-(e.farSizes.length>=1?e.farSizes[1]:0))+e.border.width/2:f%360==0?0:f%360==180?T.height/2-e.border.width+m:T.height/2-e.border.width,R.length>1&&(g-=f>0&&f<80||f>300&&f<360?P.height*((R.length-1)/2):f>120&&f<240&&180!==f&&R.length>2?-P.height*((R.length-2)/2):0,A+=f>0&&f<70?P.height*((R.length-1)/2):0),O="rotate("+f+","+A+","+g+")"),this.heatMap.cellSettings.border.width>5&&e.opposedPosition&&(g-=this.heatMap.cellSettings.border.width/2),this.heatMap.yAxis.opposedPosition&&this.heatMap.cellSettings.border.width>5&&(A+=this.heatMap.cellSettings.border.width/2),this.heatMap.xAxis.isInversed&&this.heatMap.cellSettings.border.width>5&&(A-=this.heatMap.cellSettings.border.width/2),P.width>=h&&(A=e.border.width?A+e.border.width/2:A),A="Near"===e.textStyle.textAlignment?A+e.border.width/2:"Far"===e.textStyle.textAlignment?A-e.border.width/2:A,A=f%360==0&&"Center"===e.textStyle.textAlignment&&P.width>h?M.x+(e.isInversed?-P.width/2:P.width/2):A;var D=new l.p(a.element.id+"_XAxis_Label"+S,new l.q(A,g,f%360==0?"Center"===e.textStyle.textAlignment?"middle":"start":"middle",w,f,O),e.textStyle,e.textStyle.color||a.themeStyle.axisLabel);if(D.text=s?R:i.i(l.z)(D.text,e.textStyle,M.width-e.border.width/2),0!==f&&this.heatMap.enableCanvasRendering?this.drawSvgCanvas.canvasDrawText(D,null,null,null,R,P.height,!0):"Wrap"===e.textStyle.textOverflow||s?this.drawSvgCanvas.createWrapText(D,e.textStyle,x):this.drawSvgCanvas.createText(D,x,w),0===d){var z="DateTime"===e.valueType&&"None"!==e.showLabelOn?e.dateTimeAxisLabelInterval[S]:e.axisLabelInterval;y+=e.isInversed?-z*h:z*h}else y+=e.isInversed?-d*h:d*h;if(-1!==L.indexOf("...")){var V=e.angle%360!=0?A-T.width/2:"Center"===e.textStyle.textAlignment?A-P.width/2:A,I=g-(e.angle%360!=0?T.height/2:P.height);w=-1!==o[S].indexOf("<br>")||-1!==o[S].indexOf("<br/>")?o[S].replace(/<br\s*\/?>/g," "):o[S],this.heatMap.tooltipCollection.push(new l.L(w,new l.o(V,I,e.angle%360!=0?T.width:P.width,e.angle%360!=0?T.height:P.height*R.length)))}0!==d&&(S+=d-1)}a.enableCanvasRendering||(t.appendChild(x),t.appendChild(b))},e.prototype.getWrappedLabels=function(e,t,n){for(var a=e.split(/<br\s*\/?>/,-1),o=0;o<a.length;o++){var s=a[o];a[o]=i.i(l.C)(t,s,n.textStyle)}return a},e.prototype.getMaxLabel=function(e,t){for(var n="",a=0,o=new l.e(0,0),s=0;s<e.length;s++)o=i.i(l.b)(e[s],t.textStyle),o.width>a&&(a=o.width,n=e[s]);return n},e.prototype.getLabels=function(e,t,n,a){return a?this.getWrappedLabels(e,t,n):i.i(l.B)(e,t,n.textStyle)},e.prototype.drawYAxisLabels=function(e,t,a){var o,s=this.heatMap,r=e.axisLabels,h=a.height/e.axisLabelSize,d=0,p=a.height/(e.axisLabelSize/e.axisLabelInterval),c=e.axisLabelInterval;if(p>0)for(;p<parseInt(e.textStyle.size,10);)c+=1,p=a.height/(e.axisLabelSize/c);else c=e.tooltipLabels.length;e.axisLabelInterval<c&&(d=c,r=e.tooltipLabels);var u=10,g=a.y+(e.isInversed?0:a.height),v=e.opposedPosition?"start":"end";u=e.opposedPosition?u:-u;var m,y;s.enableCanvasRendering||(m=this.heatMap.renderer.createGroup({id:s.element.id+"YAxisLabels"}),y=this.heatMap.renderer.createGroup({id:s.element.id+"YAxisLabelBorder"}));for(var f=i.i(l.A)(r),x=0,b=r.length;x<b;x++){var S=new l.o(a.x,g,a.width,h),C=e.isInversed?S.height/2:-S.height/2,M=this.heatMap.cellSettings.border.width>=20?this.heatMap.cellSettings.border.width/2:0,w=this.heatMap.cellSettings.border.width>5?this.heatMap.cellSettings.border.width/2/b*(e.isInversed?x:b-x):0;o=!e.enableTrim&&"Trim"!==e.textStyle.textOverflow||f?r[x]:i.i(l.C)(e.maxLabelLength,r[x],e.textStyle);var L=i.i(l.b)(o,e.textStyle),R=1,T=[],P=new l.e(0,0);if("Wrap"!==e.textStyle.textOverflow&&!f||e.enableTrim){if(f&&e.enableTrim){T=this.getLabels(o,e.maxLabelLength,e,f);var O=i.i(l.C)(e.maxLabelLength,T[0],e.textStyle);o=-1===o.indexOf("<br>")&&-1===o.indexOf("<br/>")||-1!==O.indexOf("...")?O:O+"...",T=[]}T.push(o)}else{T=this.getLabels(o,e.maxLabelLength,e,f);for(var A=0;A<T.length;A++)L.height*T.length>p+5&&T.length>0&&90!==e.angle&&270!==e.angle&&(T.pop(),T.length>0&&(T[T.length-1]=T[T.length-1]+"...",T[T.length-1]=i.i(l.C)(e.maxLabelLength,T[T.length-1],e.textStyle)));if(!f){o=0!==T.length?"":o;for(var _=0;_<T.length;_++)o=i.i(n.isNullOrUndefined)(o)?T[_]:o+" "+T[_]}R=T.length}var D=S.x+u+(e.opposedPosition?("Wrap"===e.textStyle.textOverflow&&e.angle%360!=0?R*(L.height/2):0)+M:-M);"Far"===e.textStyle.textAlignment&&e.angle%360==0?C=e.isInversed?S.height-(R>1?L.height*R-L.height/2:L.height/2):-(R>1?L.height*R-L.height/2:L.height/2):"Near"===e.textStyle.textAlignment&&e.angle%360==0&&(C=(e.isInversed?L.height/2:L.height/2-S.height)+e.border.width/2);var z=S.y-w+C-(R>1&&"Center"===e.textStyle.textAlignment||e.angle%360!=0&&e.opposedPosition?L.height*R/2-L.height/2:0);if(e.angle%360!=0&&(v="middle",e.angle=e.angle>360?e.angle%360:e.angle,P=i.i(l.x)(e.textStyle,T,e.angle),D=S.x+(e.opposedPosition?P.width/2+u:-(P.width/2-u))+(90===e.angle?L.height*((T.length-1)/2):270===e.angle?-L.height*(T.length-1)/2:0),z=S.y+(e.isInversed?S.height/2:-S.height/2)+(180===e.angle?L.height*((T.length-1)/2):0),T.length>1)){var V=L.height*((T.length-1)/2);z-=e.angle>0&&e.angle<60||e.angle>290&&e.angle<360?V:e.angle>115&&e.angle<240&&180!==e.angle?-V:0,D+=e.angle>20&&e.angle<160&&90!==e.angle?V:e.angle>200&&e.angle<330&&270!==e.angle?-V-(e.angle>200&&e.angle<240&&!e.opposedPosition&&T.length>2?-L.height*((T.length-2)/2):0):e.angle>=330&&e.angle<350?-V/2:0}var I=new l.p(s.element.id+"_YAxis_Label"+x,new l.q(D,z,v,o,e.angle,"rotate("+e.angle+","+D+","+z+")","middle"),e.textStyle,e.textStyle.color||s.themeStyle.axisLabel);if(n.Browser.isIE&&!s.enableCanvasRendering&&(I.dy="1ex"),I.text=f?T:i.i(l.z)(I.text,e.textStyle,e.maxLabelLength),0!==e.angle&&this.heatMap.enableCanvasRendering?this.drawSvgCanvas.canvasDrawText(I,null,null,null,T,L.height,!0):"Wrap"===e.textStyle.textOverflow||f?this.drawSvgCanvas.createWrapText(I,e.textStyle,m):this.drawSvgCanvas.createText(I,m,o),0===d){var E="DateTime"===e.valueType&&"None"!==e.showLabelOn?e.dateTimeAxisLabelInterval[x]:e.axisLabelInterval;g+=e.isInversed?E*h:-E*h}else g+=e.isInversed?d*h:-d*h,x+=d-1;if(this.drawYAxisBorder(e,y,e.rect,z,L.height,x),o=this.getMaxLabel(T,e),-1!==o.indexOf("...")){var B=e.opposedPosition?D:D-(e.angle%360!=0?P.width/2:L.width),N=z-(e.angle%360!=0?P.height/2:L.height);o=-1!==r[x].indexOf("<br>")||-1!==r[x].indexOf("<br/>")?r[x].replace(/<br\s*\/?>/g," "):r[x],this.heatMap.tooltipCollection.push(new l.L(o,new l.o(B,N,e.angle%360!=0?P.width:L.width,e.angle%360!=0?P.height:L.height*T.length)))}}s.enableCanvasRendering||(t.appendChild(m),t.appendChild(y))},e.prototype.drawXAxisBorder=function(e,t,i,l,n,a){var o,s,r=i.width/e.axisLabelSize,h="",d=e.interval?e.interval:1,p=e.isInversed?i.x+i.width-r*a*d:i.x+r*a*d,c=i.y;s=c+(e.opposedPosition?-(e.maxLabelSize.height+10):e.maxLabelSize.height+10),o=e.isInversed?p-r:p+r;var u=e.isInversed?l+n+10:l-10,g=e.isInversed?l-10:l+n+10;switch(e.border.type){case"Rectangle":h="M "+p+" "+c+" L "+p+" "+s+" L "+o+" "+s+" L "+o+" "+c+" L "+p+" "+c;break;case"WithoutTopBorder":h="M "+p+" "+c+" L "+p+" "+s+" L "+o+" "+s+" L "+o+" "+c+" ";break;case"WithoutBottomBorder":h="M "+p+" "+s+" L "+p+" "+c+" L "+o+" "+c+" L "+o+" "+s+" ";break;case"WithoutTopandBottomBorder":h="M "+p+" "+c+" L "+p+" "+s+" M "+o+" "+c+" L "+o+" "+s+" ";break;case"Brace":s=c+(s-c)/2+(e.opposedPosition?0:5),h="M "+p+" "+c+" L "+p+" "+s+" L "+u+" "+s+" M "+g+" "+s+" L "+o+" "+s+" L "+o+" "+c+" "}e.border.width>0&&"WithoutBorder"!==e.border.type&&this.createAxisBorderElement(e,h,t,a)},e.prototype.drawYAxisBorder=function(e,t,i,l,n,a){var o,s,r=i.height/e.axisLabelSize,h="",d=e.interval?e.interval:1,p=i.x,c=e.isInversed?i.y+r*a*d:i.y+i.height-r*a*d;o=p+(e.opposedPosition?e.maxLabelSize.width+20:-(e.maxLabelSize.width+20)),s=e.isInversed?c+r:c-r;var u=e.isInversed?l-n/2:l+n/2,g=e.isInversed?l+n/2:l-n/2;switch(e.border.type){case"Rectangle":h="M "+p+" "+c+" L "+p+" "+s+" L "+o+" "+s+" L "+o+" "+c+" L "+p+" "+c;break;case"WithoutTopBorder":h="M "+p+" "+c+" L "+o+" "+c+" L "+o+" "+s+" L "+p+" "+s+" ";break;case"WithoutBottomBorder":h="M "+o+" "+c+" L "+p+" "+c+" L "+p+" "+s+" L "+o+" "+s+" ";break;case"WithoutTopandBottomBorder":h="M "+p+" "+c+" L "+o+" "+c+" M "+o+" "+s+" L "+p+" "+s+" ";break;case"Brace":o=p-(p-o)/2,h="M "+p+" "+c+" L "+o+" "+c+" L "+o+" "+u+" M "+o+" "+g+" L "+o+" "+s+" L "+p+" "+s}e.border.width>0&&"WithoutBorder"!==e.border.type&&this.createAxisBorderElement(e,h,t,a)},e.prototype.createAxisBorderElement=function(e,t,i,n){var a="Horizontal"===e.orientation?"_XAxis_Label_Border":"_YAxis_Label_Border",o=new l.g(this.heatMap.element.id+a+n,"transparent",e.border.width,e.border.color,1,"none",t);if(this.heatMap.enableCanvasRendering)this.heatMap.canvasRenderer.drawPath(o,void 0);else{var s=this.heatMap.renderer.drawPath(o);i.appendChild(s)}},e.prototype.drawMultiLevels=function(e,t){var i;this.heatMap.enableCanvasRendering||(i=this.heatMap.renderer.createGroup({id:this.heatMap.element.id+"_"+t.orientation+"_MultiLevelLabel"})),"Horizontal"===t.orientation?this.renderXAxisMultiLevelLabels(t,i):this.renderYAxisMultiLevelLabels(t,i),this.heatMap.enableCanvasRendering||e.appendChild(i)},e.prototype.renderXAxisMultiLevelLabels=function(e,t){var n,a,o,s,r,h,d,p,c,u,g,v=this,m=0,y=0,f=e.isInversed,x=e.opposedPosition,b="",S=(f?e.rect.width:0)+e.rect.x;e.multiLevelLabels.map(function(C,M){c=v.heatMap.renderer.createGroup({id:v.heatMap.element.id+"_XAxisMultiLevelLabel"+M}),C.categories.map(function(w,L){"Bootstrap5"!==v.heatMap.theme&&"Bootstrap5Dark"!==v.heatMap.theme||C.setProperties({textStyle:{fontFamily:'system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"'}},!0),"Tailwind"!==v.heatMap.theme&&"TailwindDark"!==v.heatMap.theme||C.setProperties({textStyle:{fontFamily:"Inter"}},!0),"Material3"!==v.heatMap.theme&&"Material3Dark"!==v.heatMap.theme||C.setProperties({textStyle:{fontFamily:"Roboto"}},!0),"Fluent"!==v.heatMap.theme&&"FluentDark"!==v.heatMap.theme||C.setProperties({textStyle:{fontFamily:'"Segoe UI", -apple-system, BlinkMacSystemFont, "Roboto", "Helvetica Neue", sans-serif'}},!0),s=!1,r="number"==typeof w.start?w.start:Number(new Date(w.start)),h="number"==typeof w.end?w.end:Number(new Date(w.end)),a=S+v.calculateLeftPosition(e,r,w.start,e.rect),o=e.multiLevelPosition[M].y,y=S+v.calculateWidth(e,w.end,h,e.rect),d=i.i(l.b)(w.text,C.textStyle),u=(null===w.maximumTextWidth?Math.abs(y-a):w.maximumTextWidth)-10,n=o+(x?-(e.xAxisMultiLabelHeight[M]-d.height):d.height),m=f?a-u:a+10,"Center"===C.alignment?(m=(y-a)/2+a,m-=(d.width>u?u:d.width)/2):"Far"===C.alignment?(m=f?a-10:y-10,m-=d.width>u?u:d.width):m=f?y+10:a+10,"None"===C.overflow&&d.width>Math.abs(y-a)&&(m=f?a-d.width-10:a+10,p="start");var R=new l.q(m,n,p,w.text,0,"translate(0,0)"),T=new l.p(v.heatMap.element.id+"_XAxis_MultiLevel"+M+"_Text"+L,R,C.textStyle,C.textStyle.color||v.heatMap.themeStyle.axisLabel);if("Wrap"===C.overflow?(T.text=i.i(l.B)(w.text,u,C.textStyle),g=T.text.length):"Trim"===C.overflow&&(T.text=i.i(l.C)(u,w.text,C.textStyle),g=1),"Wrap"===C.overflow&&T.text.length>1){v.drawSvgCanvas.createWrapText(T,C.textStyle,c);for(var P=0;P<T.text.length;P++)if(-1!==T.text[P].indexOf("...")){s=!0;break}}else v.drawSvgCanvas.createText(T,c,T.text);v.heatMap.enableCanvasRendering||t.appendChild(c),(-1!==T.text.indexOf("...")||-1!==T.text[0].indexOf("...")||s)&&v.heatMap.tooltipCollection.push(new l.L(w.text,new l.o(m,n-d.height,u,d.height*g))),C.border.width>0&&"WithoutBorder"!==C.border.type&&(b=v.renderXAxisLabelBorder(M,e,a,o,y,b,M,d,u,m))}),""!==b&&(v.createBorderElement(M,e,b,t),b="")}),this.heatMap.enableCanvasRendering||t.appendChild(c)},e.prototype.renderXAxisLabelBorder=function(e,t,i,l,n,a,o,s,r,h){var d,p,c=l+(t.opposedPosition?-t.xAxisMultiLabelHeight[e]:t.xAxisMultiLabelHeight[e]);switch(t.multiLevelLabels[o].border.type){case"Rectangle":a+="M "+i+" "+l+" L "+i+" "+c+" L "+n+" "+c+" L "+n+" "+l+" L "+i+" "+l+" ";break;case"WithoutTopBorder":a+="M "+i+" "+l+" L "+i+" "+c+" L "+n+" "+c+" L "+n+" "+l+" ";break;case"WithoutBottomBorder":a+="M "+i+" "+c+" L "+i+" "+l+" L "+n+" "+l+" L "+n+" "+c+" ";break;case"WithoutTopandBottomBorder":a+="M "+i+" "+l+" L "+i+" "+c+" M "+n+" "+l+" L "+n+" "+c+" ";break;case"Brace":d=t.isInversed?(s.width>r?r:s.width)+h+3:h-3,p=t.isInversed?h-3:(s.width>r?r:s.width)+h+3,a+="M "+i+" "+l+" L "+i+" "+(l+(c-l)/2)+" L "+d+" "+(l+(c-l)/2)+" M "+p+" "+(l+(c-l)/2)+" L "+n+" "+(l+(c-l)/2)+" L "+n+" "+l+" "}return a},e.prototype.renderYAxisMultiLevelLabels=function(e,t){var n,a,o,s,r,h,d,p,c,u,g=this,v=0,m=e.isInversed,y="",f=(m?0:e.rect.height)+e.rect.y;e.multiLevelLabels.map(function(x,b){o=e.multiLevelPosition[b].y,p=g.heatMap.renderer.createGroup({id:g.heatMap.element.id+"_YAxisMultiLevelLabel"+b}),x.categories.map(function(S,C){"Tailwind"!==g.heatMap.theme&&"TailwindDark"!==g.heatMap.theme||x.setProperties({textStyle:{fontFamily:"Inter"}},!0),"Material3"!==g.heatMap.theme&&"Material3Dark"!==g.heatMap.theme||x.setProperties({textStyle:{fontFamily:"Roboto"}},!0),"Bootstrap5"!==g.heatMap.theme&&"Bootstrap5Dark"!==g.heatMap.theme||x.setProperties({textStyle:{fontFamily:'system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"'}},!0),r="number"==typeof S.start?S.start:Number(new Date(S.start)),h="number"==typeof S.end?S.end:Number(new Date(S.end)),o=f+g.calculateLeftPosition(e,r,S.start,e.rect),a=e.multiLevelPosition[b].x,s=f+g.calculateWidth(e,S.start,h,e.rect),d=i.i(l.b)(S.text,x.textStyle),c=(null===S.maximumTextWidth?Math.abs(a):S.maximumTextWidth)-10;var M=Math.abs(a-(a-e.multiLevelSize[b].width-20))/2-d.width/2;v=(e.opposedPosition?a:a-e.multiLevelSize[b].width-20)+M,n=o+10,"None"!==x.overflow&&(u="Wrap"===x.overflow?i.i(l.B)(S.text,c,x.textStyle):i.i(l.C)(c,S.text,x.textStyle)),"Center"===x.alignment?n+=(s-o)/2-u.length*d.height/2:n="Far"===x.alignment?m?s-d.height/2:n-d.height:m?n+d.height/2:s+d.height,x.border.width>0&&"WithoutBorder"!==x.border.type&&(y=g.renderYAxisLabelBorder(b,e,a,o,s,y,b,d,c,n));var w=new l.q(v,n,"start",S.text,0,"translate(0,0)"),L=new l.p(g.heatMap.element.id+"_YAxis_MultiLevel"+b+"_Text"+C,w,x.textStyle,x.textStyle.color||g.heatMap.themeStyle.axisLabel);L.text=u,g.drawSvgCanvas.createText(L,p,L.text),-1!==L.text.indexOf("...")&&g.heatMap.tooltipCollection.push(new l.L(S.text,new l.o(v,n-d.height,c,d.height))),g.heatMap.enableCanvasRendering||t.appendChild(p)}),""!==y&&(g.createBorderElement(b,e,y,t),y="")}),this.heatMap.enableCanvasRendering||t.appendChild(p)},e.prototype.renderYAxisLabelBorder=function(e,t,i,l,n,a,o,s,r,h){var d,p,c=20,u=i-(t.opposedPosition?-(t.multiLevelSize[e].width+c):t.multiLevelSize[e].width+c);switch(t.multiLevelLabels[o].border.type){case"Rectangle":a+="M "+i+" "+l+" L "+u+" "+l+" L "+u+" "+n+" L "+i+" "+n+" L "+i+" "+l+" ";break;case"WithoutTopBorder":a+="M "+i+" "+l+" L "+u+" "+l+" L "+u+" "+n+" L "+i+" "+n+" ";break;case"WithoutBottomBorder":a+="M "+u+" "+l+" L "+i+" "+l+" L "+i+" "+n+" L "+u+" "+n+" ";break;case"WithoutTopandBottomBorder":a+="M "+i+" "+l+" L "+u+" "+l+" M "+i+" "+n+" L "+u+" "+n+" ";break;case"Brace":c=10,d=t.isInversed?h-c-5:h+s.height-c,p=t.isInversed?h+s.height-c:h-c-5,a+="M "+i+" "+l+" L "+(i+(u-i)/2)+" "+l+" L "+(i+(u-i)/2)+" "+d+" M "+(i+(u-i)/2)+" "+p+" L "+(i+(u-i)/2)+" "+n+" L "+i+" "+n+" "}return a},e.prototype.createBorderElement=function(e,t,i,n){var a="Horizontal"===t.orientation?"XAxis":"YAxis",o=new l.g(this.heatMap.element.id+"_"+a+"_MultiLevel_Rect_"+e,"Transparent",t.multiLevelLabels[e].border.width,t.multiLevelLabels[e].border.color,1,"",i),s=this.heatMap.renderer.drawPath(o);this.heatMap.enableCanvasRendering?this.heatMap.canvasRenderer.drawPath(o,void 0):n.appendChild(s)},e.prototype.calculateLeftPosition=function(e,t,i,l){var n,a;if("number"==typeof i){if("Numeric"===e.valueType&&(e.minimum||e.maximum)){t-=e.minimum?e.minimum:0}a=("Horizontal"===e.orientation?l.width:l.height)/(e.axisLabelSize*e.increment),n=(e.isInversed?-1:1)*t*a,n="Horizontal"===e.orientation?n:-n}else a=this.calculateNumberOfDays(t,e,!0,l),n=e.isInversed?-a:a,n="Horizontal"===e.orientation?n:-n;return n},e.prototype.calculateWidth=function(e,t,i,l){var n,a;if("number"==typeof t){if("Numeric"===e.valueType&&(e.minimum||e.maximum)){i-=e.minimum?e.minimum:0}n=("Horizontal"===e.orientation?l.width:l.height)/(e.axisLabelSize*e.increment),a=(e.isInversed?-1:1)*(i+1)*n,a="Horizontal"===e.orientation?a:-a}else n=this.calculateNumberOfDays(i,e,!1,l),a=n,a=e.isInversed?-a:a,a="Horizontal"===e.orientation?a:-a;return a},e.prototype.calculateNumberOfDays=function(e,t,i,l){for(var n,a,o,s=t.labelValue,r=("Horizontal"===t.orientation?l.width:l.height)/t.axisLabelSize,h=new Date(Number(e)),d=0,p=0;p<t.axisLabelSize;p++){if(n=new Date(Number(s[p])),a=t.isInversed?new Date(Number(s[p-1])):new Date(Number(s[p+1])),p===(t.isInversed?0:t.axisLabelSize-1))if(a=new Date(Number(s[p])),"Hours"===t.intervalType)a=new Date(Number(a.setHours(a.getHours()+1)));else if("Minutes"===t.intervalType)a=new Date(Number(a.setMinutes(a.getMinutes()+1)));else if("Days"===t.intervalType)a=new Date(Number(a.setDate(a.getDate()+1)));else{var c="Months"===t.intervalType?new Date(a.getFullYear(),a.getMonth()+1,0).getDate():a.getFullYear()%4==0?366:365;a=new Date(Number(a.setDate(a.getDate()+c)))}if(Number(n)<=e&&Number(a)>=e){if("Minutes"===t.intervalType||"Hours"===t.intervalType){d=r/Math.round(Math.abs((n.getTime()-a.getTime())/6e4))*Math.abs((n.getTime()-h.getTime())/6e4),p=t.isInversed?t.axisLabelSize-1-p:p,o=p*r+d;break}var c=Math.round(Math.abs((n.getTime()-a.getTime())/864e5));i?h.getDate():h.setDate(h.getDate()+1),0!==c&&(d=r/c*Math.abs((n.getTime()-h.getTime())/864e5)),p=t.isInversed?t.axisLabelSize-1-p:p,o=p*r+d;break}}return o},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var l=i(1),n=(i.n(l),i(14)),a=(i.n(n),i(2)),o=i(3),s=i(0),r=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function l(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(l.prototype=i.prototype,new l)}}(),h=this&&this.__decorate||function(e,t,i,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,l);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,i,o):n(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.multipleRow=[],t.rect=new s.o(void 0,void 0,0,0),t.nearSizes=[],t.farSizes=[],t.maxLabelSize=new s.e(0,0),t.titleSize=new s.e(0,0),t.multilevel=[],t.axisLabels=[],t.tooltipLabels=[],t.labelValue=[],t.axisLabelSize=0,t.axisLabelInterval=0,t.dateTimeAxisLabelInterval=[],t.maxLength=0,t.min=0,t.max=0,t.isIntersect=!1,t.jsonCellLabel=[],t.multiLevelSize=[],t.xAxisMultiLabelHeight=[],t.yAxisMultiLabelHeight=[],t.multiLevelPosition=[],t}return r(t,e),t.prototype.computeSize=function(e,t,i){var l=new s.e(0,0);this.titleSize=e.getTitleSize(e,10),this.maxLabelSize=e.getMaxLabelSize(e,t),this.getMultilevelLabelsHeight(e,i,t);for(var n=0;n<this.multiLevelLabels.length;n++)l=e.multiLevelLabelSize(10,n),this.multiLevelSize.push(l)},t.prototype.multiPosition=function(e,t){var i="Horizontal"===e.orientation?10:20,l=new s.X(0,0);if("Horizontal"===e.orientation){var n=e.maxLabelSize.height+i+(0===e.angle||180===e.angle||360===e.angle?0:i),a=this.xAxisMultiLabelHeight[t-1];l.x=e.isInversed?e.rect.x+e.rect.width:e.rect.x,l.y=0===t?e.rect.y+(e.opposedPosition?-n:n):e.multiLevelPosition[t-1].y+(e.opposedPosition?-a:a)}else{var n=e.maxLabelSize.width+i,a=0!==t&&this.multiLevelSize[t-1].width;l.x=0===t?e.rect.x-(e.opposedPosition?-n:n):e.multiLevelPosition[t-1].x-(e.opposedPosition?-(a+i):a+i),l.y=e.isInversed?e.rect.y:e.rect.y+e.rect.height}return l},t.prototype.multiLevelLabelSize=function(e,t){for(var l=new s.e(0,0),n=this.multiLevelLabels,a=n[t].categories,o=0;o<a.length;o++){var r=i.i(s.b)(a[o].text,n[t].textStyle);l.width=l.width>r.width?l.width:r.width,l.height=l.height>r.height?l.height:r.height}var h="Horizontal"===this.orientation?this.xAxisMultiLabelHeight[t]:this.yAxisMultiLabelHeight[t];return this.opposedPosition?this.farSizes.push(h):this.nearSizes.push(h),l},t.prototype.getMultilevelLabelsHeight=function(e,t,l){var n,a,o,r,h,d,p,c=[],u="Vertical"===e.orientation,g="Vertical"===e.orientation?20:10;this.multiLevelLabels.map(function(v,m){v.categories.map(function(y){r="number"==typeof y.start?y.start:Number(new Date(y.start)),h="number"==typeof y.end?y.end:Number(new Date(y.end)),""!==y.text&&null!==y.start&&null!==y.end&&(n=i.i(s.b)(y.text,v.textStyle),o=u?n.width:n.height,d=l.heatMapAxis.calculateLeftPosition(e,r,y.start,t),p=l.heatMapAxis.calculateWidth(e,y.end,h,t),n=i.i(s.b)(y.text,v.textStyle),a=null===y.maximumTextWidth?Math.abs(p-d):y.maximumTextWidth,n.width>a-g&&"Wrap"===v.overflow&&!u&&(o*=i.i(s.B)(y.text,a-g,v.textStyle).length),c[m]=c[m]?c[m]<o?o+g:c[m]:o+g)})}),u?this.yAxisMultiLabelHeight=c:this.xAxisMultiLabelHeight=c},t.prototype.getTitleSize=function(e,t){var l=new s.e(0,0);return this.title.text&&(l=i.i(s.b)(this.title.text,this.title.textStyle),l.height+=t),e.opposedPosition?this.farSizes.push(l.height):this.nearSizes.push(l.height),l},t.prototype.getMaxLabelSize=function(e,t){var n=new s.e(0,0),o=this.axisLabels,r=e.border.width>0||e.multiLevelLabels.length>0?10:0,h=1,d="DateTime"===e.valueType&&"None"!==e.showLabelOn||"Wrap"===e.textStyle.textOverflow||"Trim"===e.textStyle.textOverflow?t.initialClipRect.width/e.axisLabelSize:t.initialClipRect.width/e.axisLabels.length;e.angle=e.labelRotation,e.isIntersect=!1;var p=i.i(s.A)(o);if(("Horizontal"===e.orientation&&("Rotate45"===e.labelIntersectAction||e.labelRotation%180==0&&"Trim"===e.labelIntersectAction||e.enableTrim)||"MultipleRows"===e.labelIntersectAction)&&"Wrap"!==e.textStyle.textOverflow&&"Trim"!==e.textStyle.textOverflow){var c=t.initialClipRect.x+(e.isInversed?t.initialClipRect.width:0),u=void 0,g=void 0;this.clearMultipleRow();for(var v=0,m=o.length;v<m;v++){var y=o[v],f=i.i(s.b)(y,e.textStyle),x="DateTime"===e.valueType&&"None"!==e.showLabelOn?e.dateTimeAxisLabelInterval[v]*d:d,b=c+(e.isInversed?-(d+f.width)/2:(d-f.width)/2);b=b<t.initialClipRect.x?t.initialClipRect.x:b;var S=b+f.width;if(e.isInversed){if(i.i(l.isNullOrUndefined)(g))g=b;else if(g<S&&"MultipleRows"!==e.labelIntersectAction){"Rotate45"!==e.labelIntersectAction||p||e.enableTrim?e.isIntersect=!0:e.angle=45;break}g=b}else{if(i.i(l.isNullOrUndefined)(u))u=S;else if(b<u&&"MultipleRows"!==e.labelIntersectAction){"Rotate45"!==e.labelIntersectAction||p||e.enableTrim?e.isIntersect=!0:e.angle=45;break}u=S}c+=e.isInversed?-x:x,"Horizontal"===e.orientation&&"MultipleRows"===e.labelIntersectAction&&0===e.labelRotation&&this.multipleRow.push(new a.p(b,S,h,y,1))}"Horizontal"===e.orientation&&"MultipleRows"===e.labelIntersectAction&&e.isInversed&&(this.multipleRow=this.multipleRow.reverse())}for(var C=1,v=0;v<o.length;v++){var M=this.multipleRow,y=void 0;y=e.enableTrim||"Trim"===e.textStyle.textOverflow&&-1===o[v].indexOf("<br>")&&-1===o[v].indexOf("<br/>")?i.i(s.C)("Trim"===e.textStyle.textOverflow&&"Horizontal"===e.orientation?d:e.maxLabelLength,o[v],e.textStyle):o[v];var w=[];if("Wrap"!==e.textStyle.textOverflow&&!p||e.enableTrim){if(p&&e.enableTrim){w=y.split(/<br\s*\/?>/,-1);var L=i.i(s.C)(e.maxLabelLength,w[0],e.textStyle);y=-1===y.indexOf("<br>")&&-1===y.indexOf("<br/>")||-1!==L.indexOf("...")?L:L+"...",w=[]}w.push(y)}else{var R="Horizontal"===e.orientation?d:e.maxLabelLength;if(p){w=y.split(/<br\s*\/?>/,-1);for(var T=0;T<w.length;T++)w[T]=i.i(s.C)(R,w[T],e.textStyle)}else w=i.i(s.B)(y,R,e.textStyle);if(C=w.length>C&&!e.enableTrim?w.length:C,"Vertical"===e.orientation||"Horizontal"===e.orientation&&e.angle%180!=0)for(var P=0,O=0;O<w.length;O++){var A=i.i(s.b)(w[O],e.textStyle);A.width>P&&(P=A.width,y=w[O])}if("Vertical"===e.orientation)for(var _=t.initialClipRect.height/(e.axisLabelSize/e.axisLabelInterval),O=0;O<w.length;O++)i.i(s.b)(y,e.textStyle).height*w.length>_-10&&w.length>0&&90!==e.angle&&270!==e.angle&&(w.pop(),w.length>0&&(w[w.length-1]=w[w.length-1]+"...",w[w.length-1]=i.i(s.C)(e.maxLabelLength,w[w.length-1],e.textStyle)))}var D=e.angle%180==0?i.i(s.b)(y,e.textStyle):i.i(s.x)(e.textStyle,w,e.angle);if(n.width=n.width>D.width?n.width:D.width,"MultipleRows"===e.labelIntersectAction&&"Horizontal"===e.orientation&&"Wrap"!==e.textStyle.textOverflow&&"Trim"!==e.textStyle.textOverflow&&v>0&&0===e.labelRotation){M[v].end>=t.initialClipRect.width&&v<o.length-1&&(M[v].row=M[v].row+1);for(var z=1;z<=e.multilevel.length;z++)if(M[v].start<M[v-1].end){if(e.multilevel[z]<M[v].start){h=z;break}if(z===e.multilevel.length-1){h=e.multilevel.length;break}}else if(D.width<d)for(var V=1;V<=e.multilevel.length;V++)if(e.multilevel[V]<M[v].start){h=V,M[V].row=h;break}n.height=n.height>D.height*h+.5*D.height/2*(h-1)?n.height:D.height*h+.5*D.height/2*h,this.multipleRow[v].index=h,e.multilevel[h]=M[v].end}else"Horizontal"===e.orientation&&"MultipleRows"===e.labelIntersectAction&&0===v&&0===e.labelRotation&&"Wrap"!==e.textStyle.textOverflow&&"Trim"!==e.textStyle.textOverflow&&(e.multilevel[1]=M[v].end),n.height=n.height>D.height?n.height:D.height}return n.height=e.angle%180==0?n.height*C:n.height,t.cellSettings.border.width>=20&&"Horizontal"!==e.orientation&&(n.width=n.width+t.cellSettings.border.width/4),e.opposedPosition?this.farSizes.push("Horizontal"===e.orientation?n.height:n.width+r):this.nearSizes.push("Horizontal"===e.orientation?n.height:n.width+r),n},t.prototype.calculateNumericAxisLabels=function(e){var t,n,a=0,o=0,r=this.interval?this.interval:1;e.adaptorModule&&e.isCellData&&(t="Horizontal"===this.orientation?e.adaptorModule.adaptiveXMinMax.min:e.adaptorModule.adaptiveYMinMax.min,n="Horizontal"===this.orientation?e.adaptorModule.adaptiveXMinMax.max:e.adaptorModule.adaptiveYMinMax.max),a=i.i(l.isNullOrUndefined)(this.minimum)?t||0:this.minimum,o=i.i(l.isNullOrUndefined)(this.maximum)?n||this.maxLength*this.increment:this.maximum;var h;this.minimum&&this.maximum&&a>o&&(h=a,a=o,o=h),o=i.i(l.isNullOrUndefined)(this.maximum)?n||o+a:o;var d=this.labelFormat,p=null!==d.match("{value}");this.format=e.intl.getNumberFormat({format:p?"":d});for(var c=a;c<=o;c+=r*this.increment){var u=i.i(s.W)(p,d,c,this.format);this.axisLabels.push(u)}this.min=0,this.axisLabelSize=Math.floor((o-a)/this.increment+1),this.max=this.axisLabelSize-1,this.axisLabelInterval=r;for(var c=a;c<=o;c+=this.increment){var u=i.i(s.W)(p,d,c,this.format);this.tooltipLabels.push(u),this.labelValue.push(c)}this.labelValue=this.isInversed?this.labelValue.reverse():this.labelValue},t.prototype.calculateCategoryAxisLabels=function(){var e=this.labels?this.labels:[];e=e.length>0?e:this.jsonCellLabel;var t,n=i.i(l.isNullOrUndefined)(this.minimum)||this.minimum instanceof Date?0:this.minimum,a=i.i(l.isNullOrUndefined)(this.maximum)||this.maximum instanceof Date?this.maxLength:this.maximum,o=this.interval?this.interval:1,s=this.labelFormat,r=null!==s.match("{value}");if(!i.i(l.isNullOrUndefined)(this.minimum)&&!i.i(l.isNullOrUndefined)(this.maximum)&&n>a&&(t=n,n=a,a=t),e&&e.length>0)for(var h=n;h<=a;h+=o){var d=i.i(l.isNullOrUndefined)(e[h])?r?s.replace("{value}",h.toString()):h.toString():r?s.replace("{value}",e[h].toString()):e[h].toString();this.axisLabels.push(d)}else for(var h=n;h<=a;h+=o){var d=r?s.replace("{value}",h.toString()):h.toString();this.axisLabels.push(d)}for(var h=n;h<=a;h++)this.tooltipLabels.push(i.i(l.isNullOrUndefined)(e[h])?r?s.replace("{value}",h.toString()):h.toString():r?s.replace("{value}",e[h].toString()):e[h].toString()),this.labelValue.push(i.i(l.isNullOrUndefined)(e[h])?h.toString():e[h].toString());this.min=n,this.max=a,this.axisLabelSize=a-n+1,this.axisLabelInterval=o,this.labelValue=this.isInversed?this.labelValue.reverse():this.labelValue},t.prototype.calculateDateTimeAxisLabel=function(e){var t,l,a=this.interval?this.interval:1,o={skeleton:"full",type:"dateTime"},r=e.intl.getDateParser(o),h=e.intl.getDateFormat(o),d=null,p=null;e.adaptorModule&&e.isCellData&&(d="Horizontal"===this.orientation?e.adaptorModule.adaptiveXMinMax.min:e.adaptorModule.adaptiveYMinMax.min,p="Horizontal"===this.orientation?e.adaptorModule.adaptiveXMinMax.max:e.adaptorModule.adaptiveYMinMax.max);var c=this.minimum?this.minimum:d||null,u=this.maximum?this.maximum:p||null;if(null===c&&null===u){t=0,l=this.maxLength*this.increment;for(var g=t;g<=l;g+=a*this.increment)this.axisLabels.push(g.toString()),this.tooltipLabels.push(g.toString()),this.labelValue.push(g.toString());this.min=0,this.max=this.maxLength,this.axisLabelSize=(l-t)/this.increment+1,this.axisLabelInterval=a}else{null!==c&&null===u?(t=Date.parse(r(h(new Date(n.DataUtil.parse.parseJson({val:c}).val)))),l=i.i(s.K)(t,this.maxLength,this.intervalType,this.increment).getTime()):null===c&&null!==u?(l=Date.parse(r(h(new Date(n.DataUtil.parse.parseJson({val:u}).val)))),t=i.i(s.K)(l,-this.maxLength,this.intervalType,this.increment).getTime()):(t=Date.parse(r(h(new Date(n.DataUtil.parse.parseJson({val:c}).val)))),l=Date.parse(r(h(new Date(n.DataUtil.parse.parseJson({val:u}).val))))),this.format=e.intl.getDateFormat({format:this.labelFormat,skeleton:this.getSkeleton()});for(var v=t;v<=l;){var m=this.format(new Date(v));this.axisLabels.push(m),"None"!==this.showLabelOn&&(a=this.calculateLabelInterval(v),this.dateTimeAxisLabelInterval.push(a)),v=i.i(s.K)(v,a,this.intervalType,this.increment).getTime()}for(this.min=0,this.axisLabelInterval=a,this.axisLabelSize=this.getTotalLabelLength(t,l),this.max=this.axisLabelSize-1,v=t;v<=l;){var m=this.format(new Date(v));this.tooltipLabels.push(m),this.labelValue.push(new Date(v)),v=i.i(s.K)(v,1,this.intervalType,this.increment).getTime()}}this.labelValue=this.isInversed?this.labelValue.reverse():this.labelValue},t.prototype.calculateLabelInterval=function(e){var t,i,l=new Date(e).getFullYear(),n=new Date(e).getMonth()+1,a=new Date(e).getDate();if("Years"===this.showLabelOn||"Months"===this.showLabelOn)"Years"===this.showLabelOn&&"Months"===this.intervalType?i=Math.ceil(12/this.increment):(t="Years"===this.showLabelOn?l%4==0?366:365:new Date(l,n,0).getDate(),t+=1-a,i="Days"===this.intervalType?Math.ceil(t/this.increment):"Hours"===this.intervalType?Math.ceil(24*t/this.increment):"Minutes"===this.intervalType?Math.ceil(24*t*60/this.increment):1);else if("Days"===this.showLabelOn)i="Hours"===this.intervalType?Math.ceil(24/this.increment):"Minutes"===this.intervalType?Math.ceil(1440/this.increment):1;else if("Hours"===this.showLabelOn){var o=new Date(e).getMinutes();i="Minutes"===this.intervalType?Math.ceil((60-o)/this.increment):1}else i=1;return i},t.prototype.getSkeleton=function(){return"Years"===this.intervalType?"yMMM":"Months"===this.intervalType?"MMMd":"Days"===this.intervalType?"yMd":"Hours"===this.intervalType?"EHm":(this.intervalType,"Hms")},t.prototype.getTotalLabelLength=function(e,t){var i,l,n=0,a=new Date(e),o=new Date(t);switch(this.intervalType){case"Years":var s=(o.getFullYear()-a.getFullYear())/this.increment+1;n=Math.floor(s);break;case"Months":var r=12*(o.getFullYear()-a.getFullYear());r-=a.getMonth(),r+=o.getMonth(),n=r<=0?1:Math.floor(r/this.increment+1);break;case"Days":i=Math.abs(a.getTime()-o.getTime()),l=Math.floor(i/864e5),n=Math.floor(l/this.increment+1);break;case"Hours":i=Math.abs(a.getTime()-o.getTime());var h=Math.floor(i/36e5);n=Math.floor(h/this.increment)+1;break;case"Minutes":i=Math.abs(a.getTime()-o.getTime());var d=Math.floor(i/6e4);n=Math.floor(d/this.increment)+1}return n},t.prototype.clearAxisLabel=function(){this.axisLabels=[],this.tooltipLabels=[],this.dateTimeAxisLabelInterval=[],this.labelValue=[]},t.prototype.clearMultipleRow=function(){this.multipleRow=[],this.multilevel=[]},h([i.i(l.Complex)({text:"",textStyle:o.a.axisTitleFont},a.f)],t.prototype,"title",void 0),h([i.i(l.Property)(!1)],t.prototype,"opposedPosition",void 0),h([i.i(l.Property)(null)],t.prototype,"labels",void 0),h([i.i(l.Complex)(o.a.axisLabelFont,a.a)],t.prototype,"textStyle",void 0),h([i.i(l.Property)(0)],t.prototype,"labelRotation",void 0),h([i.i(l.Property)(!1)],t.prototype,"isInversed",void 0),h([i.i(l.Property)("Category")],t.prototype,"valueType",void 0),h([i.i(l.Property)(1)],t.prototype,"increment",void 0),h([i.i(l.Property)("None")],t.prototype,"showLabelOn",void 0),h([i.i(l.Property)(null)],t.prototype,"minimum",void 0),h([i.i(l.Property)(null)],t.prototype,"maximum",void 0),h([i.i(l.Property)(null)],t.prototype,"interval",void 0),h([i.i(l.Property)("")],t.prototype,"labelFormat",void 0),h([i.i(l.Property)("Days")],t.prototype,"intervalType",void 0),h([i.i(l.Property)("Trim")],t.prototype,"labelIntersectAction",void 0),h([i.i(l.Property)(!1)],t.prototype,"enableTrim",void 0),h([i.i(l.Property)(35)],t.prototype,"maxLabelLength",void 0),h([i.i(l.Complex)({color:"#b5b5b5",width:0,type:"Rectangle"},a.i)],t.prototype,"border",void 0),h([i.i(l.Collection)([],a.l)],t.prototype,"multiLevelLabels",void 0),t}(l.ChildProperty)},function(e,t,i){"use strict";i.d(t,"a",function(){return h}),i.d(t,"b",function(){return d}),i.d(t,"c",function(){return p});var l=i(1),n=(i.n(l),i(14)),a=(i.n(n),i(0)),o=i(2),s=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function l(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(l.prototype=i.prototype,new l)}}(),r=this&&this.__decorate||function(e,t,i,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,l);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,i,o):n(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),r([i.i(l.Property)(!1)],t.prototype,"isJsonData",void 0),r([i.i(l.Property)("None")],t.prototype,"adaptorType",void 0),r([i.i(l.Property)("")],t.prototype,"xDataMapping",void 0),r([i.i(l.Property)("")],t.prototype,"yDataMapping",void 0),r([i.i(l.Property)("")],t.prototype,"valueMapping",void 0),r([i.i(l.Complex)({},o.e)],t.prototype,"bubbleDataMapping",void 0),t}(l.ChildProperty),d=function(){function e(){}return e}(),p=function(){function e(e){this.reconstructedXAxis=[],this.reconstructedYAxis=[],this.adaptiveXMinMax=new d,this.adaptiveYMinMax=new d,this.heatMap=e}return e.prototype.constructDatasource=function(e,t){if("Cell"===t.adaptorType){var n=this.heatMap.xAxis,a=this.heatMap.yAxis;this.adaptiveXMinMax.min=n.minimum,this.adaptiveXMinMax.max=n.maximum,this.adaptiveYMinMax.min=a.minimum,this.adaptiveYMinMax.max=a.maximum,("Numeric"!==n.valueType&&"DateTime"!==n.valueType||!i.i(l.isNullOrUndefined)(n.minimum)&&!i.i(l.isNullOrUndefined)(n.maximum))&&("Numeric"!==a.valueType&&"DateTime"!==a.valueType||!i.i(l.isNullOrUndefined)(a.minimum)&&!i.i(l.isNullOrUndefined)(a.maximum))||this.getMinMaxValue(e,t,n,a),this.heatMap.isCellData=!0}"None"===t.adaptorType?this.heatMap.completeAdaptDataSource=e:t.isJsonData||"Table"!==t.adaptorType?t.isJsonData&&"Table"===t.adaptorType?this.heatMap.completeAdaptDataSource=this.processJsonTableData(e,t):t.isJsonData&&"Cell"===t.adaptorType?this.heatMap.completeAdaptDataSource=this.processJsonCellData(e,t):t.isJsonData||"Cell"!==t.adaptorType||(this.constructAdaptiveAxis(),this.heatMap.completeAdaptDataSource=this.processCellData(e),this.heatMap.isCellData=!0):this.heatMap.completeAdaptDataSource=e},e.prototype.constructAdaptiveAxis=function(){var e=this.heatMap.xAxis,t=this.heatMap.yAxis;"Numeric"===e.valueType&&(this.reconstructedXAxis=this.getNumericAxisCollection(this.adaptiveXMinMax.min,this.adaptiveXMinMax.max,e.increment)),"Numeric"===t.valueType&&(this.reconstructedYAxis=this.getNumericAxisCollection(this.adaptiveYMinMax.min,this.adaptiveYMinMax.max,t.increment)),"DateTime"===e.valueType&&(this.reconstructedXAxis=this.getDateAxisCollection(this.adaptiveXMinMax.min,this.adaptiveXMinMax.max,e.intervalType,e.increment)),"DateTime"===t.valueType&&(this.reconstructedYAxis=this.getDateAxisCollection(this.adaptiveYMinMax.min,this.adaptiveYMinMax.max,t.intervalType,t.increment))},e.prototype.getNumericAxisCollection=function(e,t,i){for(var l=e,n=[];l<=t;)n.push(l.toString()),l+=i;return n},e.prototype.getDateAxisCollection=function(e,t,l,o){var s={skeleton:"full",type:"dateTime"},r=this.heatMap.intl.getDateParser(s),h=this.heatMap.intl.getDateFormat(s);e=Date.parse(r(h(new Date(n.DataUtil.parse.parseJson({val:e}).val))));for(var d=e,p=[];d<=t;)p.push(new Date(d).toString()),d=i.i(a.K)(d,1,l,o).getTime();return p},e.prototype.getMinMaxValue=function(e,t,n,a){var o=e,s=Object.keys(o[0]);o.length>0&&(this.adaptiveXMinMax.min=i.i(l.isNullOrUndefined)(n.minimum)?t.isJsonData?o[0][s[0]]:o[0][0]:n.minimum,this.adaptiveYMinMax.min=i.i(l.isNullOrUndefined)(a.minimum)?t.isJsonData?o[0][s[1]]:o[0][1]:a.minimum,this.adaptiveXMinMax.max=i.i(l.isNullOrUndefined)(n.maximum)?t.isJsonData?o[0][s[0]]:o[0][0]:n.maximum,this.adaptiveYMinMax.max=i.i(l.isNullOrUndefined)(a.maximum)?t.isJsonData?o[0][s[1]]:o[0][1]:a.maximum);for(var r=0;r<o.length;r++){var h=t.isJsonData?o[r][s[0]]:o[r][0],d=t.isJsonData?o[r][s[1]]:o[r][1];h<this.adaptiveXMinMax.min&&i.i(l.isNullOrUndefined)(n.minimum)&&(this.adaptiveXMinMax.min=h),h>this.adaptiveXMinMax.max&&i.i(l.isNullOrUndefined)(n.maximum)&&(this.adaptiveXMinMax.max=h),d<this.adaptiveYMinMax.min&&i.i(l.isNullOrUndefined)(a.minimum)&&(this.adaptiveYMinMax.min=d),d>this.adaptiveYMinMax.max&&i.i(l.isNullOrUndefined)(a.maximum)&&(this.adaptiveYMinMax.max=d)}},e.prototype.processCellData=function(e){var t=e,n=this.reconstructedXAxis,a=this.reconstructedYAxis,o=0,s=0;if(this.reconstructData=[],t&&t.length)for(var r=0;r<t.length;r++)if((o="Category"===this.heatMap.xAxis.valueType?t[r][0]:n.indexOf(t[r][0].toString()))>-1){for(;!this.reconstructData[o];)this.reconstructData.push([]);if(-1!==(s="Category"===this.heatMap.yAxis.valueType?t[r][1]:a.indexOf(t[r][1].toString()))){for(;""!==this.reconstructData[o][s];)this.reconstructData[o].push("");this.reconstructData[o][s]=i.i(l.isNullOrUndefined)(t[r][2])?"":t[r][2]}}return this.reconstructData},e.prototype.processJsonCellData=function(e,t){var n=e,a=this.heatMap.xAxis.labels?this.heatMap.xAxis.labels:[],o=this.heatMap.yAxis.labels?this.heatMap.yAxis.labels:[],s=this.heatMap.axisCollections;0!==a.length&&0!==o.length||this.generateAxisLabels(e,t);var r="Category"===this.heatMap.xAxis.valueType?a.length>0?this.heatMap.xAxis.labels:s[0].jsonCellLabel:s[0].labelValue,h="Category"===this.heatMap.yAxis.valueType?o.length>0?this.heatMap.yAxis.labels:s[1].jsonCellLabel:s[1].labelValue,d=0,p=0;if(n.length){this.reconstructData=[];for(var c=0;c<n.length;c++)if(-1!==(d=this.getSplitDataValue(n[c],t,r,t.xDataMapping.split("."),this.heatMap.xAxis.valueType))){for(;!this.reconstructData[d];)this.reconstructData.push([]);if(-1!==(p=this.getSplitDataValue(n[c],t,h,t.yDataMapping.split("."),this.heatMap.yAxis.valueType))){for(;i.i(l.isNullOrUndefined)(this.reconstructData[d][p]);)this.reconstructData[d].push("");this.heatMap.bubbleSizeWithColor?this.reconstructData[d][p]=[this.getSplitDataValue(n[c],t,null,t.bubbleDataMapping.size.split("."),""),this.getSplitDataValue(n[c],t,null,t.bubbleDataMapping.color.split("."),"")]:this.reconstructData[d][p]=this.getSplitDataValue(n[c],t,null,t.valueMapping.split("."),"")}}}return this.reconstructData},e.prototype.generateAxisLabels=function(e,t){for(var i=e,l=this.heatMap.xAxis.labels?this.heatMap.xAxis.labels:[],n=this.heatMap.yAxis.labels?this.heatMap.yAxis.labels:[],a=l.length>0,o=n.length>0,s=this.heatMap.axisCollections,r=0;r<s.length;r++){var h=s[r].valueType,d=s[r];if("Category"===h){var p=void 0,c=void 0,u=void 0;if("Horizontal"===d.orientation?(p=a,c=t.xDataMapping,d.jsonCellLabel=u=[]):(p=o,c=t.yDataMapping,d.jsonCellLabel=u=[]),!p)for(var g=0;g<i.length;g++)if(c in i[g]){var v=i[g][c].toString();-1===u.indexOf(v.toString())&&u.push(v)}}else"DateTime"===h?(d.clearAxisLabel(),d.calculateDateTimeAxisLabel(this.heatMap)):(d.clearAxisLabel(),d.calculateNumericAxisLabels(this.heatMap))}},e.prototype.getSplitDataValue=function(e,t,n,a,o){var s=-1;this.tempSplitDataCollection=e;for(var r=0;r<a.length&&(s=i.i(l.isNullOrUndefined)(n)?null:"DateTime"!==o?n.indexOf(this.tempSplitDataCollection[a[r]]):n.map(Number).indexOf(+new Date(this.tempSplitDataCollection[a[r]]).setHours(0,0,0,0)),i.i(l.isNullOrUndefined)(this.tempSplitDataCollection)||(this.tempSplitDataCollection=-1===s||i.i(l.isNullOrUndefined)(n)?this.tempSplitDataCollection[a[r]]:this.tempSplitDataCollection),!i.i(l.isNullOrUndefined)(this.tempSplitDataCollection));r++);return s=i.i(l.isNullOrUndefined)(n)?i.i(l.isNullOrUndefined)(this.tempSplitDataCollection)||""===this.tempSplitDataCollection.toString()?"":parseFloat(this.tempSplitDataCollection.toString()):s},e.prototype.processJsonTableData=function(e,t){var n,a=e,o=0,s=0,r=this.heatMap.xAxis.labels?this.heatMap.xAxis.labels:[],h=this.heatMap.yAxis.labels?this.heatMap.yAxis.labels:[];if(a.length){this.reconstructData=[];for(var d=0;d<a.length;d++)if(-1!==(o=this.getSplitDataValue(a[d],t,r,t.xDataMapping.split("."),this.heatMap.xAxis.valueType))){for(;!this.reconstructData[o];)this.reconstructData.push([]);for(var p=0;p<Object.keys(this.tempSplitDataCollection).length;p++)if(n=Object.keys(this.tempSplitDataCollection)[p],-1!==(s=n!==t.xDataMapping?h.indexOf(n):-1)){for(;i.i(l.isNullOrUndefined)(this.reconstructData[o][s]);)this.reconstructData[o].push("");this.reconstructData[o][s]=i.i(l.isNullOrUndefined)(this.tempSplitDataCollection[n])?"":this.tempSplitDataCollection[n]}}}return this.reconstructData},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"Adaptor"},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var l=i(1),n=(i.n(l),function(){function e(e){this.heatMap=e}return e.prototype.processDataSource=function(e){var t=i.i(l.extend)([],e,null,!0);this.heatMap.clonedDataSource=[],this.completeDataSource=[];var n,a,o=this.heatMap.axisCollections,s=o[0].maxLength+1,r=o[0].axisLabelSize+(o[0].min>0?o[0].min:0),h=s>r?s:r;s=o[1].maxLength+1,r=o[1].axisLabelSize+(o[1].min>0?o[1].min:0);var d,p=s>r?s:r,c=0,u=[];this.tempSizeArray=[],this.tempColorArray=[],this.heatMap.minColorValue=null,this.heatMap.maxColorValue=null,this.heatMap.dataMax=[],this.heatMap.dataMin=[],"Column"===this.heatMap.paletteSettings.colorGradientMode&&h<p&&(h=p);for(var g="Category"===o[1].valueType?o[1].min:0;g<("Column"===this.heatMap.paletteSettings.colorGradientMode?h:p);g++){var v="Category"===o[0].valueType?o[0].min:0;for(this.completeDataSource.push([]);v<h;)v>=o[0].min&&v<=o[0].max&&this.processDataArray(t,v,g,c),v++;if("Column"===this.heatMap.paletteSettings.colorGradientMode&&"Gradient"===this.heatMap.paletteSettings.type){d=i.i(l.extend)([],t[c],null,!0);for(var m=0;m<d.length;m++)"object"==typeof d[m]&&null!==d[m]&&(d[m]=d[m][0])}else d=i.i(l.extend)([],this.completeDataSource[c],null,!0);var y=this.getMinMaxValue(n,a,d);"Column"!==this.heatMap.paletteSettings.colorGradientMode&&"Row"!==this.heatMap.paletteSettings.colorGradientMode||"Gradient"!==this.heatMap.paletteSettings.type||(this.heatMap.dataMax[g]=y[1],this.heatMap.dataMin[g]=y[0]),n=y[0],a=y[1],this.heatMap.xAxis.isInversed&&(this.completeDataSource[c]=this.completeDataSource[c].reverse()),g>=this.heatMap.axisCollections[1].min&&g<=this.heatMap.axisCollections[1].max&&u.push(this.completeDataSource[c]),c++}"Row"!==this.heatMap.paletteSettings.colorGradientMode||this.heatMap.yAxis.isInversed||"Gradient"!==this.heatMap.paletteSettings.type||(this.heatMap.dataMax=this.heatMap.dataMax.reverse(),this.heatMap.dataMin=this.heatMap.dataMin.reverse()),"Column"===this.heatMap.paletteSettings.colorGradientMode&&this.heatMap.xAxis.isInversed&&"Gradient"===this.heatMap.paletteSettings.type&&(this.heatMap.dataMax=this.heatMap.dataMax.reverse(),this.heatMap.dataMin=this.heatMap.dataMin.reverse()),this.heatMap.yAxis.isInversed||(this.completeDataSource.reverse(),u.reverse()),this.heatMap.clonedDataSource=u,this.heatMap.dataSourceMinValue=i.i(l.isNullOrUndefined)(n)?0:parseFloat(n.toString()),this.heatMap.dataSourceMaxValue=i.i(l.isNullOrUndefined)(a)?0:parseFloat(a.toString()),this.heatMap.isColorValueExist=!i.i(l.isNullOrUndefined)(this.heatMap.minColorValue),this.heatMap.minColorValue=i.i(l.isNullOrUndefined)(this.heatMap.minColorValue)?this.heatMap.dataSourceMinValue:parseFloat(this.heatMap.minColorValue.toString()),this.heatMap.maxColorValue=i.i(l.isNullOrUndefined)(this.heatMap.maxColorValue)?this.heatMap.dataSourceMaxValue:parseFloat(this.heatMap.maxColorValue.toString())},e.prototype.processDataArray=function(e,t,n,a){if(this.heatMap.bubbleSizeWithColor)if(e[t]&&!i.i(l.isNullOrUndefined)(e[t][n])&&"object"==typeof e[t][n]){for(var o=e[t][n],s=0;s<o.length;s++)if((i.i(l.isNullOrUndefined)(o[s])||isNaN(o[s]))&&(o[s]=""),0===s)this.tempSizeArray.push(o[s]);else if(1===s){this.tempColorArray.push(o[s]);break}this.completeDataSource[a].push(o)}else!i.i(l.isNullOrUndefined)(e[t])&&(e[t][n]||0===e[t][n]&&""!==e[t][n].toString())?(this.completeDataSource[a].push([e[t][n]]),this.tempSizeArray.push(e[t][n])):this.completeDataSource[a].push("");else e[t]&&(e[t][n]||0===e[t][n]&&""!==e[t][n].toString())?"object"==typeof e[t][n]?e[t][n].length>0&&!i.i(l.isNullOrUndefined)(e[t][n][0])?this.completeDataSource[a].push(e[t][n][0]):this.completeDataSource[a].push(""):this.completeDataSource[a].push(e[t][n]):this.completeDataSource[a].push("")},e.prototype.getMinMaxValue=function(e,t,i){var l=[];return this.heatMap.bubbleSizeWithColor?("Column"===this.heatMap.paletteSettings.colorGradientMode&&"Gradient"===this.heatMap.paletteSettings.type&&(this.tempSizeArray=i),l.push(this.getMinValue(e,this.tempSizeArray)),l.push(this.getMaxValue(t,this.tempSizeArray)),this.heatMap.minColorValue=this.getMinValue(this.heatMap.minColorValue,this.tempColorArray),this.heatMap.maxColorValue=this.getMaxValue(this.heatMap.maxColorValue,this.tempColorArray)):(l.push(this.getMinValue(e,i)),l.push(this.getMaxValue(t,i))),l},e.prototype.getMinValue=function(e,t){return i.i(l.isNullOrUndefined)(e)?e=this.performSort(t):this.performSort(t)<e?e=this.performSort(t):"Row"!==this.heatMap.paletteSettings.colorGradientMode&&"Column"!==this.heatMap.paletteSettings.colorGradientMode||"Gradient"!==this.heatMap.paletteSettings.type||(e=this.performSort(t)),i.i(l.isNullOrUndefined)(e)?e:parseFloat(e.toString())},e.prototype.getMaxValue=function(e,t){return i.i(l.isNullOrUndefined)(e)&&t.length>0?e=Math.max.apply(Math,t):Math.max.apply(Math,t)>e?e=Math.max.apply(Math,t):"Row"!==this.heatMap.paletteSettings.colorGradientMode&&"Column"!==this.heatMap.paletteSettings.colorGradientMode||"Gradient"!==this.heatMap.paletteSettings.type||(e=Math.max.apply(Math,t)),i.i(l.isNullOrUndefined)(e)?e:parseFloat(e.toString())},e.prototype.performSort=function(e){return e.sort(function(e,t){return e-t}).filter(this.checkmin)[0]},e.prototype.checkmin=function(e){return!i.i(l.isNullOrUndefined)(e)&&""!==e.toString()},e}())},function(e,t,i){"use strict";i.d(t,"a",function(){return d}),i.d(t,"b",function(){return p});var l=i(1),n=(i.n(l),i(0)),a=i(2),o=i(3),s=i(4),r=(i.n(s),this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function l(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(l.prototype=i.prototype,new l)}}()),h=this&&this.__decorate||function(e,t,i,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,l);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,i,o):n(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),h([i.i(l.Property)("")],t.prototype,"height",void 0),h([i.i(l.Property)("")],t.prototype,"width",void 0),h([i.i(l.Complex)({text:"",textStyle:o.a.titleFont},a.f)],t.prototype,"title",void 0),h([i.i(l.Property)("Right")],t.prototype,"position",void 0),h([i.i(l.Property)(!0)],t.prototype,"visible",void 0),h([i.i(l.Property)("Center")],t.prototype,"alignment",void 0),h([i.i(l.Property)(!0)],t.prototype,"showLabel",void 0),h([i.i(l.Property)(!0)],t.prototype,"showGradientPointer",void 0),h([i.i(l.Property)(!1)],t.prototype,"enableSmartLegend",void 0),h([i.i(l.Property)("All")],t.prototype,"labelDisplayType",void 0),h([i.i(l.Complex)(o.a.legendLabelFont,a.a)],t.prototype,"textStyle",void 0),h([i.i(l.Property)("")],t.prototype,"labelFormat",void 0),h([i.i(l.Property)(!0)],t.prototype,"toggleVisibility",void 0),t}(l.ChildProperty),p=function(){function e(e){this.maxLegendLabelSize=new n.e(0,0),this.gradientScaleSize=10,this.segmentCollections=[],this.segmentCollectionsLabels=[],this.textWrapCollections=[],this.labelCollections=[],this.labelCollection=[],this.legendSize=10,this.previousOptions=new n.O(0,0,0,0,0,0),this.listPerPage=0,this.numberOfPages=1,this.listWidth=0,this.fillRect=new n.o(0,0,0,0),this.legendRect=new n.o(0,0,0,0),this.currentPage=1,this.lastList=[],this.navigationCollections=[],this.pagingRect=new n.o(0,0,0,0),this.listInterval=10,this.legendLabelTooltip=[],this.legendTitleTooltip=[],this.labelXCollections=[],this.labelYCollections=[],this.legendXCollections=[],this.legendYCollections=[],this.legendRectPositionCollection=[],this.legendRange=[],this.legendTextRange=[],this.visibilityCollections=[],this.heatMap=e,this.drawSvgCanvas=new n.y(e)}return e.prototype.getModuleName=function(){return"Legend"},e.prototype.destroy=function(){},e.prototype.renderLegendItems=function(){var e=this.heatMap;e.toggleValue=[];var t={color:"transparent",width:0};this.legend=e.renderer.createGroup({id:e.element.id+"_Heatmap_Legend"});var a=new n.m(e.element.id+"_LegendBound","none",t,1,this.legendGroup);this.drawSvgCanvas.drawRectangle(a,this.legend);var o,s=this.legendRectScale,r=e.canvasRenderer.ctx,h=new n.o(s.x,s.y,s.width,s.height);if("Fixed"===e.paletteSettings.type){var d=e.legendSettings.enableSmartLegend?e.legendColorCollection:e.colorCollection;this.legendRange=e.resizing||!e.legendOnLoad&&e.rendering?[]:this.legendRange,this.legendTextRange=e.resizing||!e.legendOnLoad&&e.rendering?[]:this.legendTextRange,e.enableCanvasRendering&&(r.save(),r.clip());for(var p=0;p<d.length;p++){var c=!!i.i(l.isNullOrUndefined)(this.visibilityCollections[p])||this.visibilityCollections[p];e.toggleValue.push(new n.R(c,d[p].value,d[p].startValue,d[p].endValue))}}if("Gradient"===e.paletteSettings.type||"Fixed"===e.paletteSettings.type&&!0===e.legendSettings.enableSmartLegend){if("Gradient"===e.paletteSettings.type){if(e.enableCanvasRendering){var u=void 0,g=e.canvasRenderer.ctx;u=e.horizontalGradient?g.createLinearGradient(s.x,0,s.x+s.width,0):g.createLinearGradient(0,s.y,0,s.y+s.height),e.legendSettings.title.text&&g.clip();for(var p=0;p<e.legendColorCollection.length;p++){var v=((this.heatMap.isColorRange?e.legendColorCollection[p].startValue:e.legendColorCollection[p].value)-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue);v=isNaN(v)?0:v,this.heatMap.isColorRange&&"Gradient"===this.heatMap.paletteSettings.type?this.calculateCanvasColorRange(p,u):u.addColorStop(v,e.legendColorCollection[p].color)}g.fillStyle=u,o=u.toString()}else{for(var m=void 0,y=void 0,f=[],p=0;p<e.legendColorCollection.length;p++){if(this.heatMap.isColorRange&&"Gradient"===this.heatMap.paletteSettings.type)this.calculateColorRange(p,f);else{var x=(e.legendColorCollection[p].value-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue)*100;x=isNaN(x)?0:x,y=new n.F(e.legendColorCollection[p].color,x+"%"),f.push(y)}if(this.legendMaxValue===this.legendMinValue)break}m=e.horizontalGradient?new n.E(e.element.id+"_lineargradient","0%","100%","0%","0%"):new n.E(e.element.id+"_lineargradient","0%","0%","0%","100%");var b=e.renderer.drawGradient("linearGradient",m,f);this.legend.appendChild(b),o="url(#"+e.element.id+"_lineargradient)"}var S=new n.m(e.element.id+"_Gradient_Legend",o,t,1,h);this.drawSvgCanvas.drawRectangle(S,this.legend),this.renderElements(h)}else this.renderSmartLegend(),this.renderTitle(h);e.enableCanvasRendering||e.svgObject.appendChild(this.legend),e.enableCanvasRendering&&r.restore(),this.renderLegendLabel(h)}else{this.legendScale=e.renderer.createGroup({id:e.element.id+"Heatmap_GradientScale"});var C=new n.m(e.element.id+"_Gradient_Scale","none",t,1,this.legendRectScale);this.drawSvgCanvas.drawRectangle(C,this.legendScale),this.renderTitle(h),e.enableCanvasRendering||this.legend.appendChild(this.legendScale),this.translategroup=e.renderer.createGroup({id:e.element.id+"_translate"}),this.calculateListPerPage(h),this.numberOfPages>1&&(this.paginggroup=e.renderer.createGroup({id:e.element.id+"_navigation"})),this.renderListLegendMode(h,!0),e.enableCanvasRendering&&r.restore()}},e.prototype.renderElements=function(e){this.renderTitle(e),this.renderColorAxisGrid(e)},e.prototype.calculateCanvasColorRange=function(e,t){var i=this.heatMap,l=((i.legendColorCollection[e].startValue<i.dataSourceMinValue&&i.legendColorCollection[e].endValue>i.dataSourceMinValue?i.dataSourceMinValue:i.legendColorCollection[e].startValue)-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue);l=isNaN(l)?0:l;var n=((i.legendColorCollection[e].endValue>=this.heatMap.dataSourceMaxValue?this.heatMap.dataSourceMaxValue:i.legendColorCollection[e].endValue)-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue);this.heatMap.legendColorCollection[0].startValue!==this.heatMap.dataSourceMinValue&&0===e&&this.heatMap.legendColorCollection[0].startValue>this.heatMap.dataSourceMinValue&&(l=(this.heatMap.legendColorCollection[0].startValue-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue),t.addColorStop(l/2,this.heatMap.paletteSettings.fillColor.minColor),t.addColorStop(l,this.heatMap.paletteSettings.fillColor.maxColor)),t.addColorStop(l,i.legendColorCollection[e].minColor),t.addColorStop(n,i.legendColorCollection[e].maxColor),this.heatMap.legendColorCollection[e].endValue!==(e===this.heatMap.legendColorCollection.length-1?this.heatMap.dataSourceMaxValue:this.heatMap.legendColorCollection[e+1].startValue)&&this.heatMap.legendColorCollection[e].endValue<this.heatMap.dataSourceMaxValue&&(l=(i.legendColorCollection[e].endValue-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue),t.addColorStop(l,this.heatMap.paletteSettings.fillColor.minColor),l=((e===this.heatMap.legendColorCollection.length-1?this.heatMap.dataSourceMaxValue:i.legendColorCollection[e+1].startValue)-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue),t.addColorStop(l,this.heatMap.paletteSettings.fillColor.maxColor))},e.prototype.calculateColorRange=function(e,t){void 0===t&&(t=[]);var i=this.heatMap;i.toggleValue=[];var l,a,o,s;this.heatMap.legendColorCollection[0].startValue>this.heatMap.dataSourceMinValue&&0===e&&(l=(this.heatMap.dataSourceMinValue-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue)*100,l=isNaN(l)?0:l,a=new n.F(i.paletteSettings.fillColor.minColor,l+"%"),t.push(a),l=(i.legendColorCollection[0].startValue-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue)*100,a=new n.F(i.paletteSettings.fillColor.maxColor,l+"%"),t.push(a)),l=(i.legendColorCollection[e].startValue-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue)*100,l=isNaN(l)?0:l,a=new n.F(i.legendColorCollection[e].minColor,l+"%"),t.push(a),l=(i.legendColorCollection[e].endValue-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue)*100;var r=new n.F(i.legendColorCollection[e].maxColor,l+"%");t.push(r),this.heatMap.legendColorCollection[e].endValue!==(e===this.heatMap.legendColorCollection.length-1?this.heatMap.dataSourceMaxValue:this.heatMap.legendColorCollection[e+1].startValue)&&(l=(i.legendColorCollection[e].endValue-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue)*100,o=new n.F(this.heatMap.paletteSettings.fillColor.minColor,l+"%"),t.push(o),l=((e===this.heatMap.legendColorCollection.length-1?this.heatMap.dataSourceMaxValue:i.legendColorCollection[e+1].startValue)-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue)*100,s=new n.F(this.heatMap.paletteSettings.fillColor.maxColor,l+"%"),t.push(s))},e.prototype.renderTitle=function(e){var t=this.heatMap;if(t.legendSettings.title.text){var l=t.legendSettings.title,a=i.i(n.b)(l.text,l.textStyle),o=t.legendSettings.showLabel?this.labelPadding:t.horizontalGradient?10:6,s=void 0,r="start",h=void 0,d=l.text,p=l.textStyle.textAlignment,c=void 0,u=void 0;if("Trim"===t.legendSettings.title.textStyle.textOverflow&&(h=t.horizontalGradient?e.width-10:this.width-10,d=i.i(n.C)(h,d,l.textStyle)),t.horizontalGradient){s=e.y+("Top"===t.legendSettings.position?0:-(10+a.height+o)),o="Top"===t.legendSettings.position?-(o+a.height/4):o+3*a.height/4,u="Bottom"===t.legendSettings.position?s:s-a.height,0!==d.length&&t.enableCanvasRendering&&this.legendTitleTooltip.push(new n.L(l.text,new n.o(e.x,u,h,a.height))),a.width=e.width<a.width?e.width:a.width;var g=e.x;g=-1!==d.indexOf("...")&&"Far"===p?g+e.width/2-a.width/2:"Near"===p?g:"Far"===p?e.width+g:g+e.width/2-a.width/2,r="Far"===p&&-1===d.indexOf("...")?"end":"start",c=new n.p(t.element.id+"_legendTitle",new n.q(g,s+o,r,d,0,"translate(0,0)",void 0),l.textStyle,l.textStyle.color||t.themeStyle.heatMapTitle)}else o=-(o+a.height/4),0!==d.length&&t.enableCanvasRendering&&this.legendTitleTooltip.push(new n.L(l.text,new n.o(e.x,e.y-a.height,h,a.height))),c=new n.p(t.element.id+"_legendTitle",new n.q(e.x,e.y+o,r,d,0,"translate(0,0)",void 0),l.textStyle,l.textStyle.color||t.themeStyle.heatMapTitle);this.drawSvgCanvas.createText(c,this.legend,d)}},e.prototype.renderSmartLegend=function(){var e,t,a,o,s,r=this.heatMap,h=r.colorCollection,d={color:"transparent",width:0},p=this.legendRectScale,c=p.width/h.length,u=p.height/h.length;this.legendRectPositionCollection=[],this.legendRange=[];for(var g=0;g<r.legendColorCollection.length;g++){var v=new n.P(0,0,0,0,"","");r.horizontalGradient?(t=p.x+g*c,a=p.y,o=c,s=p.height,this.segmentCollections.push("Edge"!==r.legendSettings.labelDisplayType||g!==r.legendColorCollection.length-1||r.legendColorCollection[g].isHidden?t:t+c)):(t=p.x,a=p.y+g*u,o=p.width,s=u,this.segmentCollections.push("Edge"!==r.legendSettings.labelDisplayType||g!==r.legendColorCollection.length-1||r.legendColorCollection[g].isHidden?a:a+u)),e=new n.o(t,a,o,s);var m=new n.Q(0,0,0,0,0,!0,0);if(m.x=t,m.y=a,m.width=o,m.height=s,m.value=this.heatMap.isColorRange?r.legendColorCollection[g].endValue:r.legendColorCollection[g].value,m.currentPage=this.currentPage,h.length!==r.legendColorCollection.length&&g===r.legendColorCollection.length-1&&(r.horizontalGradient?m.width=0:m.height=0,this.visibilityCollections[g]=this.visibilityCollections[g-1]),m.visible=!!i.i(l.isNullOrUndefined)(this.visibilityCollections[g])||this.visibilityCollections[g],this.legendRange.push(m),!r.legendColorCollection[g].isHidden){var y=r.legendOnLoad?this.heatMap.isColorRange?h[g].minColor:h[g].color:this.legendRange[g].visible?this.heatMap.isColorRange?h[g].minColor:h[g].color:this.heatMap.themeStyle.toggledColor||"#D3D3D3",f=new n.m(r.element.id+"_Smart_Legend"+g,y,d,1,e);this.drawSvgCanvas.drawRectangle(f,this.legend),v.x=t,v.y=a,v.width=o,v.height=s,v.label=this.labelCollections[g],v.id=r.element.id+"_Smart_Legend"+g,this.legendRectPositionCollection.push(v);if(0!==i.i(n.z)(this.labelCollections[g],r.legendSettings.textStyle,this.textWrapCollections[g]).length&&r.enableCanvasRendering){var x=i.i(n.b)(this.labelCollections[g],r.legendSettings.textStyle);this.legendLabelTooltip.push(new n.L(this.labelCollections[g],new n.o(v.x,v.y,x.width,x.height)))}}}},e.prototype.colorRangeLegendPosition=function(e,t){if(this.segmentCollections.length!==this.segmentCollectionsLabels.length){for(var i=0;i<this.segmentCollections.length;i++)if(this.segmentCollectionsLabels[e]===this.segmentCollections[i]){t=this.segmentCollectionsLabels[e]+((i===this.segmentCollections.length-1?this.heatMap.horizontalGradient?this.width:this.height:this.segmentCollections[i+1])-this.segmentCollections[i])/2;break}}else t=this.segmentCollectionsLabels[e]+((e===this.segmentCollectionsLabels.length-1?this.heatMap.horizontalGradient?this.width:this.height:this.segmentCollectionsLabels[e+1])-this.segmentCollectionsLabels[e])/2;this.labelPosition=t},e.prototype.renderLegendLabel=function(e){var t=this.heatMap;if(this.legendTextRange=[],t.legendSettings.showLabel&&("Gradient"===t.paletteSettings.type||"Fixed"===t.paletteSettings.type&&"None"!==t.legendSettings.labelDisplayType)){var a="start",o=void 0,s=void 0,r=0,h=void 0;this.legendLabelTooltip=[];var d=void 0,p=t.isColorRange,c=t.legendColorCollection;if(t.enableCanvasRendering){var u=t.canvasRenderer.ctx;u.rect(this.legendGroup.x,this.legendGroup.y,this.legendGroup.width,this.legendGroup.height),u.save(),u.clip(),u.restore()}else s=t.renderer.createGroup({id:t.element.id+"_Heatmap_LegendLabel"});for(var g=void 0,v=void 0,m=0;m<c.length;m++){var y=(c[m].value-Math.round(100*this.legendMinValue)/100)/(Math.round(100*this.legendMaxValue)/100-Math.round(100*this.legendMinValue)/100)*100;if(t.horizontalGradient?(this.heatMap.isColorRange&&"Gradient"===t.paletteSettings.type?(this.colorRangeLegendPosition(m,g),g=this.labelPosition):g=this.heatMap.legendSettings.enableSmartLegend&&this.heatMap.isColorRange&&"Fixed"===t.paletteSettings.type?this.segmentCollections[m]+e.width/c.length/2:this.segmentCollections[m],v=e.y+e.height+this.labelPadding,a=Math.round(100*y)/100==0&&!p||"Fixed"===t.paletteSettings.type&&0===m?"start":Math.round(100*y)/100==100&&"Gradient"===t.paletteSettings.type&&!p||Math.round(100*t.dataSourceMaxValue)/100===c[m].value&&t.legendSettings.enableSmartLegend||t.legendSettings.enableSmartLegend&&"Fixed"===t.paletteSettings.type&&"Edge"===t.legendSettings.labelDisplayType?"end":"middle",o="hanging"):(g=e.x+e.width+this.labelPadding,this.heatMap.isColorRange&&"Gradient"===t.paletteSettings.type?(this.colorRangeLegendPosition(m,v),v=this.labelPosition):v=this.heatMap.legendSettings.enableSmartLegend&&this.heatMap.isColorRange&&"Fixed"===t.paletteSettings.type?this.segmentCollections[m]+e.height/c.length/2:this.segmentCollections[m],o=Math.round(100*y)/100==0&&!p||0===m&&"Fixed"===t.paletteSettings.type?"hanging":Math.round(100*y)/100==100&&!p&&"Gradient"===t.paletteSettings.type||Math.round(100*t.dataSourceMaxValue)/100===c[m].value&&t.legendSettings.enableSmartLegend||t.legendSettings.enableSmartLegend&&"Edge"===t.legendSettings.labelDisplayType&&"Fixed"===t.paletteSettings.type?"auto":"middle"),r=t.horizontalGradient?"None"===t.legendSettings.textStyle.textOverflow?this.segmentCollections[m]:this.textWrapCollections[m]:this.width-(this.legendRectScale.width+this.labelPadding+this.legendRectPadding),h=i.i(n.z)(this.labelCollections[m],t.legendSettings.textStyle,r),d=i.i(n.b)(h[0],t.legendSettings.textStyle),"Fixed"===t.paletteSettings.type){var f="hanging"===o?v:"middle"===o?v-d.height/2:v-d.height,x="end"===a?g-d.width:"middle"===a?g-d.width/2:g,b=new n.Q(x,f,d.width,d.height,c[m].value,!0,this.currentPage);b.visible=!!i.i(l.isNullOrUndefined)(this.visibilityCollections[m])||this.visibilityCollections[m],this.legendTextRange.push(b)}if(""!==this.labelCollections[m]){0!==h.length&&-1!==h[0].indexOf("...")&&t.enableCanvasRendering&&this.legendLabelTooltip.push(new n.L(this.labelCollections[m],new n.o(g,v,d.width,d.height)));var S=new n.q(g,v,a,h,0,"translate(0,0)",o),C=new n.p(t.element.id+"_Legend_Label"+m,S,t.legendSettings.textStyle,t.legendSettings.textStyle.color||t.themeStyle.legendLabel);C.fill=t.legendOnLoad?C.fill:"Fixed"!==t.paletteSettings.type||this.legendRange[m].visible?C.fill:"#D3D3D3",h.length>1?this.drawSvgCanvas.createWrapText(C,t.legendSettings.textStyle,s):this.drawSvgCanvas.createText(C,s,h[0]),l.Browser.isIE&&!t.enableCanvasRendering&&("middle"===o?s.lastChild.setAttribute("dy","0.6ex"):"hanging"===o&&s.lastChild.setAttribute("dy","1.5ex"))}if(this.legendMaxValue===this.legendMinValue&&"Gradient"===t.paletteSettings.type)break}if(!t.enableCanvasRendering){this.legendGroup.height=this.legendGroup.height>0?this.legendGroup.height:0,this.legendGroup.width=this.legendGroup.width>0?this.legendGroup.width:0,this.legend.appendChild(s);var M=t.renderer.createClipPath({id:t.element.id+"_clipPath"}),w=t.renderer.drawRectangle(this.legendGroup);M.appendChild(w),t.svgObject.appendChild(M),this.legend.style.cssText="clip-path:url(#"+M.id+")"}}},e.prototype.renderGradientPointer=function(e,t,i){var l,a,o,s,r,h,d,p,c,u,g=this.heatMap,v=g.heatMapSeries.getCurrentRect(t,i),m=g.bubbleSizeWithColor?""!==v.value[0].bubbleData.toString()?this.heatMap.isColorValueExist?v.value[1].bubbleData.toString():v.value[0].bubbleData.toString():"":v.value.toString(),y=this.legendRectScale;if(""!==m.toString())if(g.horizontalGradient?(l=y.width/100,s=l*((Number(m)-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue))*100,s=isNaN(s)?0:s,r=y.x+s,h=y.y+y.height,d=y.x-5+s,p=u=y.y+y.height+8,c=y.x+5+s):(l=y.height/100,s=l*((Number(m)-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue))*100,s=isNaN(s)?0:s,r=y.x-1,h=y.y+s,d=c=y.x-8,p=y.y-5+s,u=y.y+5+s),a="M "+r+" "+h+" L "+d+" "+p+" L "+c+" "+u+" Z",o=new n.g(g.element.id+"_Gradient_Pointer","gray",.01,"#A0A0A0",1,"0,0",a),g.enableCanvasRendering){this.removeGradientPointer();g.canvasRenderer.drawPath(o,void 0),this.previousOptions.pathX1=r,this.previousOptions.pathY1=h,this.previousOptions.pathX2=d,this.previousOptions.pathY2=p,this.previousOptions.pathX3=c,this.previousOptions.pathY3=u}else this.gradientPointer=g.renderer.drawPath(o),this.gradientPointer.style.visibility="visible",this.legend.appendChild(this.gradientPointer);else this.removeGradientPointer()},e.prototype.removeGradientPointer=function(){var e=this.heatMap;this.gradientPointer&&!e.enableCanvasRendering?this.gradientPointer.style.visibility="hidden":e.enableCanvasRendering&&(0!==Object.keys(this.previousOptions).length&&(e.horizontalGradient?(this.fillRect.x=this.previousOptions.pathX2-1,this.fillRect.y=this.previousOptions.pathY1,this.fillRect.width=this.previousOptions.pathX3-this.previousOptions.pathX2+2,this.fillRect.height=this.previousOptions.pathY2+1-this.previousOptions.pathY1):(this.fillRect.x=this.previousOptions.pathX2-1,this.fillRect.y=this.previousOptions.pathY2-1,this.fillRect.width=this.previousOptions.pathX1-this.previousOptions.pathX2+1,this.fillRect.height=this.previousOptions.pathY3-this.previousOptions.pathY2+2)),e.canvasRenderer.ctx.fillStyle=e.themeStyle.background,e.canvasRenderer.ctx.clearRect(this.fillRect.x,this.fillRect.y,this.fillRect.width,this.fillRect.height))},e.prototype.calculateLegendBounds=function(e){var t=this.heatMap,l=t.legendSettings;this.labelCollection=[],this.labelCollections=[];var a=t.legendColorCollection;"Bottom"!==l.position&&"Top"!==l.position&&"Right"!==l.position&&"Left"!==l.position&&(l.position="Right");var o=t.legendSettings.title,s=i.i(n.b)(o.text,o.textStyle);t.horizontalGradient="Bottom"===l.position||"Top"===l.position,this.legendRectPadding=t.horizontalGradient?t.legendSettings.title.text?s.height+16:16:10,this.labelPadding=l.showLabel?this.heatMap.horizontalGradient?10:6:0,this.legendHeight=l.height,this.legendWidth=l.width;var r=t.legendSettings.labelFormat,h=null!==r.match("{value}");if(this.format=t.intl.getNumberFormat({format:h?"":r}),"Fixed"===t.paletteSettings.type)for(var d=0;d<a.length;d++){var p=a[d].label?a[d].label:this.heatMap.isColorRange?a[d].startValue.toString()+"-"+a[d].endValue.toString():i.i(n.W)(h,r,a[d].value,this.format).toString(),c={cancel:!1,text:p,name:"legendRender"};this.labelCollection.push(p),this.heatMap.trigger("legendRender",c),t.legendRender?t.legendSettings.enableSmartLegend&&"Edge"===t.legendSettings.labelDisplayType&&d>0&&d<a.length-1?this.labelCollections.push(""):c.cancel?this.labelCollections.push(""):this.labelCollections.push(c.text):t.legendSettings.enableSmartLegend&&"Edge"===t.legendSettings.labelDisplayType&&d>0&&d<a.length-1?this.labelCollections.push(""):this.labelCollections.push(p)}else for(var d=0;d<a.length;d++){var p=a[d].isHidden?"":a[d].label?a[d].label:this.heatMap.isColorRange?a[d].startValue.toString()+"-"+a[d].endValue.toString():i.i(n.W)(h,r,a[d].value,this.format).toString(),c={cancel:!1,text:p,name:"legendRender"};a[d].isHidden||this.heatMap.trigger("legendRender",c),t.legendRender?c.cancel?this.labelCollections.push(""):d>0&&d<a.length-1&&"Edge"===t.legendSettings.labelDisplayType?this.labelCollections.push(""):c.cancel?this.labelCollections.push(""):this.labelCollections.push(c.text):d>0&&d<a.length-1&&"Edge"===t.legendSettings.labelDisplayType?this.labelCollections.push(""):this.labelCollections.push(p)}"Gradient"===t.paletteSettings.type||"Fixed"===t.paletteSettings.type&&t.legendSettings.enableSmartLegend?(this.maxLegendLabelSize=this.getMaxLabelSize(),t.horizontalGradient&&""===l.height?this.legendHeight=(2*this.legendRectPadding+this.legendSize+this.maxLegendLabelSize.height).toString():!t.horizontalGradient&&""===l.width&&("None"===l.textStyle.textOverflow||"Fixed"===t.paletteSettings.type&&t.legendSettings.enableSmartLegend&&"None"===t.legendSettings.labelDisplayType)&&(this.legendWidth=(2*this.legendRectPadding+this.legendSize+this.maxLegendLabelSize.width).toString()),this.calculateTitleBounds()):this.calculateListLegendBounds(e),this.legendHeight=this.legendHeight?this.legendHeight:t.horizontalGradient?"50":"100%",this.legendWidth=this.legendWidth?this.legendWidth:t.horizontalGradient?"100%":"Fixed"!==t.paletteSettings.type||t.legendSettings.enableSmartLegend?"50":"70",this.height=i.i(n.a)(this.legendHeight,e.height),this.width=i.i(n.a)(this.legendWidth,e.width),t.horizontalGradient?(this.height=("Gradient"===t.paletteSettings.type||t.legendSettings.enableSmartLegend)&&this.height<50?50:this.height,"Top"===l.position&&(e.y+=this.height),e.height-=this.height):(this.width=("Gradient"===t.paletteSettings.type||t.legendSettings.enableSmartLegend)&&this.width<50?50:this.width,"Left"===l.position&&(e.x+=this.width),e.width-=this.width)},e.prototype.calculateTitleBounds=function(){var e=this.heatMap,t=e.legendSettings.title,l=i.i(n.b)(t.text,t.textStyle);e.legendSettings.title.text&&("Top"!==e.legendSettings.position&&"Bottom"!==e.legendSettings.position||""!==e.legendSettings.height||(this.legendHeight=(2*this.legendRectPadding-l.height+this.legendSize+this.maxLegendLabelSize.height).toString()),""===e.legendSettings.width&&("None"===e.legendSettings.textStyle.textOverflow||"Fixed"===e.paletteSettings.type&&e.legendSettings.enableSmartLegend&&"None"===e.legendSettings.labelDisplayType)&&("Right"===e.legendSettings.position?this.legendWidth=(2*this.legendRectPadding+l.width+this.legendSize+this.maxLegendLabelSize.width).toString():"Left"===e.legendSettings.position&&(l.width=l.width>this.maxLegendLabelSize.width?l.width:this.maxLegendLabelSize.width,this.legendWidth=(2*this.legendRectPadding+l.width+this.legendSize).toString())))},e.prototype.calculateListLegendBounds=function(e){var t=this.heatMap;this.listWidth=0,this.listHeight=0,this.currentPage=1;var l=t.legendSettings.title,a=i.i(n.b)(l.text,l.textStyle),o=(a.height+50).toString();if(t.horizontalGradient){for(var s=0;s<t.colorCollection.length;s++){var r=0;if(t.legendSettings.showLabel){var h=this.labelCollections[s];r=i.i(n.b)(h,t.legendSettings.textStyle).width}var d=this.legendSize+this.labelPadding+r+this.listInterval;this.listWidth+=d}this.listWidth+=this.listInterval+10,""===this.legendWidth&&(this.legendWidth=this.listWidth>e.width?e.width.toString():this.listWidth.toString()),""===this.legendHeight&&(this.numberOfRows=Math.ceil(this.listWidth/i.i(n.a)(this.legendWidth,e.width)),this.numberOfRows=this.numberOfRows>3?3:this.numberOfRows,this.legendHeight=(this.listWidth>e.width||this.listWidth>i.i(n.a)(this.legendWidth,e.width))&&this.numberOfRows>3?((this.legendSize+this.listInterval)*this.numberOfRows+this.legendRectPadding+parseInt(t.legendSettings.textStyle.size,10)+10).toString():((this.legendSize+this.listInterval)*this.numberOfRows+this.legendRectPadding).toString())}else this.listHeight=(this.legendSize+this.listInterval)*t.colorCollection.length+this.listInterval+(t.legendSettings.title.text?a.height:0),""===this.legendHeight&&(this.legendHeight=this.listHeight>e.height?e.height.toString():this.listHeight.toString()),""===this.legendWidth&&"Trim"!==t.legendSettings.textStyle.textOverflow&&(this.maxLegendLabelSize=this.getMaxLabelSize(),this.maxLegendLabelSize.width=a.width>this.maxLegendLabelSize.width?a.width:this.maxLegendLabelSize.width,this.legendWidth=(2*this.legendRectPadding+this.legendSize+this.labelPadding+this.maxLegendLabelSize.width).toString());i.i(n.a)(this.legendHeight,e.height)<50&&(this.legendHeight=o),i.i(n.a)(this.legendWidth,e.width)<70&&(this.legendWidth="70")},e.prototype.getMaxLabelSize=function(){var e=this.heatMap;if(this.maxLegendLabelSize=new n.e(0,0),!e.legendSettings.showLabel||e.horizontalGradient&&"Fixed"===e.paletteSettings.type&&!e.legendSettings.enableSmartLegend||"Fixed"===e.paletteSettings.type&&"None"===e.legendSettings.labelDisplayType)return this.maxLegendLabelSize;for(var t=this.maxLegendLabelSize,l=0;l<e.legendColorCollection.length;l++){var a=i.i(n.b)(this.labelCollections[l],e.legendSettings.textStyle);t.width=t.width>a.width?t.width:a.width,t.height=t.height>a.height?t.height:a.height}return t},e.prototype.calculateLegendSize=function(e,t){var l,a,o,s=this.heatMap,r=s.legendSettings,h=r.alignment,d=i.i(n.a)(this.legendHeight,e.height);o=s.legendSettings.title.text?this.width:i.i(n.a)(this.legendWidth,e.width);var p=s.axisCollections,c=0;if(s.horizontalGradient){o=o>e.width?e.width:o,d="Gradient"===s.paletteSettings.type||s.legendSettings.enableSmartLegend?d>50?d:50:this.height,l="Near"===h?e.x:"Far"===h?e.x+e.width-o:e.x+e.width/2-o/2,""!==s.xAxis.title.text&&(c=i.i(n.b)(s.xAxis.title.text,s.xAxis.textStyle).height+10);var u=p[0].opposedPosition?0:i.i(n.v)(p[0].xAxisMultiLabelHeight)+p[0].maxLabelSize.height+c+10;a="Top"===r.position?s.titleSettings.text?t:s.margin.top:e.y+e.height+u}else{d=d>e.height?e.height:d,o="Gradient"===s.paletteSettings.type||s.legendSettings.enableSmartLegend?o>50?o:50:o,a="Near"===h?e.y:"Far"===h?e.y+e.height-d:e.y+e.height/2-d/2,""!==s.yAxis.title.text&&(c=i.i(n.b)(s.yAxis.title.text,s.yAxis.textStyle).height+10);var g=p[1].opposedPosition?i.i(n.v)(p[1].yAxisMultiLabelHeight)+p[1].maxLabelSize.width+c+20:0;l="Right"===r.position?e.x+e.width+g:s.margin.left}this.legendGroup=new n.o(l,a,o,d),this.calculateGradientScale(this.legendGroup)},e.prototype.measureListLegendBound=function(e){var t=this.heatMap,l=t.legendSettings.title;this.numberOfPages=1;var a=i.i(n.b)(l.text,l.textStyle);if(t.horizontalGradient)this.listWidth>this.width?(this.numberOfRows=Math.ceil(this.listWidth/this.width),this.listHeight=(this.legendSize+this.listInterval)*this.numberOfRows,this.listPerPage=this.numberOfRows<=3?this.numberOfRows:Math.ceil((this.height-15-parseInt(t.legendSettings.textStyle.size,10)-this.legendRectPadding)/(this.legendSize+this.listInterval)),this.numberOfPages=Math.ceil(this.numberOfRows/this.listPerPage)):this.listPerPage=1;else if(this.listHeight>e.height||this.listHeight>this.height){var o=i.i(n.a)(this.legendHeight,e.height);o=o>e.height?e.height:o,o=t.legendSettings.title.text?o-a.height:o,this.listPerPage=Math.floor(o/(this.legendSize+this.listInterval)-1),this.numberOfPages=Math.max(1,Math.ceil(t.colorCollection.length/this.listPerPage))}else this.listPerPage=t.colorCollection.length,this.legendHeight=this.listHeight.toString()},e.prototype.renderPagingElements=function(){var e=this.heatMap;if(this.numberOfPages>1){this.navigationCollections=[],this.legend.appendChild(this.paginggroup);var t=this.legendGroup.x+this.legendGroup.width-10,a=this.legendGroup.y+this.legendGroup.height-10,o=this.currentPage+"/"+this.numberOfPages,s=i.i(n.b)(o,e.legendSettings.textStyle),r=t-s.width-15,h=new n.q(r,a,"start",o,0,"translate(0,0)","middle"),d=new n.p(e.element.id+"_paging",h,e.legendSettings.textStyle,e.legendSettings.textStyle.color||e.themeStyle.legendLabel);this.drawSvgCanvas.createText(d,this.paginggroup,o),l.Browser.isIE&&!e.enableCanvasRendering&&this.paginggroup.lastChild.setAttribute("dy","0.6ex"),this.pagingRect=new n.o(r,a-s.height/2,s.width,s.height);var p=new n.m(e.element.id+"_pagingText","none",{color:"transparent",width:0},1,this.pagingRect);this.drawSvgCanvas.drawRectangle(p,this.paginggroup);var c=new n.m(e.element.id+"_rightArrow","none",{color:"transparent",width:0},1,new n.o(t-10,a-5,10,10));this.drawSvgCanvas.drawRectangle(c,this.paginggroup);var u="M "+t+" "+a+" L "+(t-10)+" "+(a-5)+" L "+(t-10)+" "+(a+5)+"Z",g=r-15,v="M "+g+" "+a+" L "+(g+10)+" "+(a-5)+" L "+(g+10)+" "+(a+5)+"Z",m=new n.m(e.element.id+"_leftArrow","none",{color:"transparent",width:0},1,new n.o(g,a-5,10,10));this.drawSvgCanvas.drawRectangle(m,this.paginggroup);var y=new n.g(e.element.id+"_Legend_leftarrow","gray",.01,"#A0A0A0",1,"0,0",v),f=new n.g(e.element.id+"_Legend_rightarrow","gray",.01,"#A0A0A0",1,"0,0",u);if(this.navigationCollections.push(c),this.navigationCollections.push(m),e.enableCanvasRendering){e.canvasRenderer.drawPath(y,void 0),e.canvasRenderer.drawPath(f,void 0)}else{var x=e.renderer.drawPath(y),b=e.renderer.drawPath(f);this.paginggroup.appendChild(x),this.paginggroup.appendChild(b)}}},e.prototype.calculateGradientScale=function(e){var t,l,a,o,s=this.heatMap,r=s.legendSettings.title,h=i.i(n.b)(r.text,r.textStyle),d=s.legendSettings.title.text?h.height:0;"Fixed"!==s.paletteSettings.type||s.legendSettings.enableSmartLegend||this.measureListLegendBound(s.initialClipRect),s.horizontalGradient?(t=e.x+10,l=e.y+this.legendRectPadding,o="Fixed"!==s.paletteSettings.type||s.legendSettings.enableSmartLegend?e.width-20:e.width-2*this.listInterval,a="Fixed"!==s.paletteSettings.type||s.legendSettings.enableSmartLegend?this.gradientScaleSize:(this.legendSize+this.listInterval)*this.listPerPage-this.listInterval):(t=e.x+this.legendRectPadding,l=e.y+10+d,o="Fixed"!==s.paletteSettings.type||s.legendSettings.enableSmartLegend?this.gradientScaleSize:e.width-10,a="Fixed"!==s.paletteSettings.type||s.legendSettings.enableSmartLegend?e.height-20-d:(this.legendSize+this.listInterval)*this.listPerPage-this.listInterval),this.legendRectScale=new n.o(t,l,o,a),("Gradient"===s.paletteSettings.type||"Fixed"===s.paletteSettings.type&&s.legendSettings.enableSmartLegend)&&this.calculateColorAxisGrid(this.legendRectScale)},e.prototype.calculateColorAxisGrid=function(e){var t,l,a=this.heatMap,o=this.legendRectScale,s=0;this.segmentCollectionsLabels=[],this.segmentCollections=[],this.textWrapCollections=[];var r,h,d="Gradient"===a.paletteSettings.type?a.legendColorCollection:a.colorCollection,p=a.bubbleSizeWithColor?a.minColorValue:a.dataSourceMinValue,c=a.bubbleSizeWithColor?a.maxColorValue:a.dataSourceMaxValue;if(this.legendMinValue=this.heatMap.isColorRange?d[0].startValue>a.dataSourceMinValue?a.dataSourceMinValue:d[0].startValue:d[0].value>p?p:d[0].value,this.legendMaxValue=this.heatMap.isColorRange?d[d.length-1].endValue<a.dataSourceMaxValue?a.dataSourceMaxValue:d[d.length-1].endValue:d[d.length-1].value<c?c:d[d.length-1].value,"Gradient"===a.paletteSettings.type)for(var u=0;u<d.length;u++){var g=void 0;t=(this.heatMap.isColorRange&&a.horizontalGradient?o.width:o.height)/100,this.heatMap.isColorRange?(d[0].startValue!==this.heatMap.dataSourceMinValue&&0===u&&d[0].startValue>this.heatMap.dataSourceMinValue&&(g=(this.heatMap.dataSourceMinValue-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue)*100,h=(a.horizontalGradient?e.x:e.y)+t*g,this.segmentCollections.push(h)),g=((d[u].startValue<a.dataSourceMinValue&&d[u].endValue>a.dataSourceMaxValue?a.dataSourceMinValue:d[u].startValue)-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue)*100,g=isNaN(g)?0:g,h=(a.horizontalGradient?e.x:e.y)+t*g,this.segmentCollections.push(h),this.segmentCollectionsLabels.push(h),d[u].endValue!==(u===d.length-1?this.heatMap.dataSourceMaxValue:d[u+1].startValue)&&this.heatMap.legendColorCollection[u].endValue<this.heatMap.dataSourceMaxValue&&(u===d.length-1&&(g=(d[u].endValue-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue)*100,h=(a.horizontalGradient?e.x:e.y)+t*g,this.segmentCollections.push(h)),g=((u===d.length-1?this.heatMap.dataSourceMaxValue:d[u].endValue)-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue)*100,h=(a.horizontalGradient?e.x:e.y)+t*g,this.segmentCollections.push(h))):(g=(d[u].value-this.legendMinValue)/(this.legendMaxValue-this.legendMinValue)*100,g=isNaN(g)?0:g,a.horizontalGradient?(t=o.width/100,r=e.x+t*g,this.segmentCollections.push(r)):(t=o.height/100,h=e.y+t*g,this.segmentCollections.push(h)))}var v;if(a.horizontalGradient){for(var m=this.heatMap.isColorRange?this.segmentCollectionsLabels:this.segmentCollections,y=0;y<d.length;y++){if("Gradient"===a.paletteSettings.type){var f=(m[y]-m[y-1])/2,x=(m[y+1]-m[y])/2;v=y===d.length-1?this.heatMap.isColorRange?(e.width-m[y-1])/2:f:0===y?x:f<x&&!this.heatMap.isColorRange?f:x}else{var b=this.legendRectScale.width/a.colorCollection.length;v="Edge"===a.legendSettings.labelDisplayType?b:b/2}this.textWrapCollections.push(v),l=i.i(n.z)(this.labelCollections[y],a.legendSettings.textStyle,v),s=l.length>s?l.length:s}"Bottom"===a.legendSettings.position?(a.initialClipRect.height-=this.maxLegendLabelSize.height*(s-1),this.legendGroup.y-=this.maxLegendLabelSize.height*(s-1),this.legendRectScale.y=this.legendGroup.y+this.legendRectPadding,this.legendGroup.height=parseInt(this.legendHeight,10)+this.maxLegendLabelSize.height*(s-1)):(a.initialClipRect.y+=this.maxLegendLabelSize.height*(s-1),a.initialClipRect.height-=this.maxLegendLabelSize.height*(s-1),this.legendRectScale.y=this.legendGroup.y+this.legendRectPadding,this.legendGroup.height=parseInt(this.legendHeight,10)+this.maxLegendLabelSize.height*(s-1))}},e.prototype.renderColorAxisGrid=function(e){var t,i,l,a,o,s=this.heatMap;s.enableCanvasRendering||(t=this.heatMap.renderer.createGroup({id:s.element.id+"_ColorAxis_Grid"}));for(var r=0;r<(s.isColorRange?this.segmentCollections.length:s.legendColorCollection.length);r++){s.horizontalGradient?(i=a=this.segmentCollections[r],l=e.y,o=e.y+e.height):(i=e.x,l=o=this.segmentCollections[r],a=e.x+e.width);var h=new n.r(i,l,a,o),d=new n.s(this.heatMap.element.id+"_ColorAxis_Grid"+r,h,"#EEEEEE",1);this.drawSvgCanvas.drawLine(d,t),s.enableCanvasRendering||this.legend.appendChild(t)}},e.prototype.renderLegendTitleTooltip=function(e,t,l){-1!==e.target.id.indexOf("_legendTitle")&&e.target.textContent.indexOf("...")>-1?(i.i(n.G)(this.heatMap.legendSettings.title.text,t,l,this.heatMap.element.offsetWidth,this.heatMap.element.id+"_legendTitle_Tooltip",i.i(n.J)(this.heatMap.element.id+"_Secondary_Element"),null,this.heatMap),document.getElementById(this.heatMap.element.id+"_legendTitle_Tooltip").style.visibility="visible"):i.i(n.H)(this.heatMap.element.id+"_legendTitle_Tooltip")},e.prototype.renderLegendLabelTooltip=function(e,t,l){if(-1!==e.target.id.indexOf("_Legend_Label")&&e.target.textContent.indexOf("...")>-1){var a=e.target.id.split(this.heatMap.element.id+"_Legend_Label");if(2===a.length){var o=void 0;o=1===a[1].length||"Trim"===this.heatMap.legendSettings.textStyle.textOverflow?parseInt(a[1],10):parseInt(a[1].substring(0,a[1].length-1),10),i.i(n.G)(this.labelCollections[o],t,l,this.heatMap.element.offsetWidth,this.heatMap.element.id+"_LegendLabel_Tooltip",i.i(n.J)(this.heatMap.element.id+"_Secondary_Element"),null,this.heatMap),document.getElementById(this.heatMap.element.id+"_LegendLabel_Tooltip").style.visibility="visible"}}else i.i(n.H)(this.heatMap.element.id+"_LegendLabel_Tooltip")},e.prototype.calculateListPerPage=function(e){var t=this.heatMap;if(t.horizontalGradient){this.lastList=[];var l=e.x,a=e.y,o=0,s=0,r=0,h=0,d=void 0;for(this.labelXCollections=[],this.labelYCollections=[],this.legendXCollections=[],this.legendYCollections=[],d=0;d<t.colorCollection.length;d++){if(t.legendSettings.showLabel){var p=this.labelCollections[d];o=i.i(n.b)(p,t.legendSettings.textStyle).width}r=l+10+5,h=a+5;var c=t.legendSettings.showLabel?r+o:l+this.legendSize+this.listInterval;0!==d&&c>this.legendGroup.width+this.legendGroup.x-this.listInterval&&(s+=1,l=e.x,a=e.y+20*s,r=l+10+5,h=a+5,s%this.listPerPage==0&&(this.lastList.push(d),a=e.y,h=a+5,s=0)),this.labelXCollections.push(r),this.labelYCollections.push(h),this.legendXCollections.push(l),this.legendYCollections.push(a),l=l+this.legendSize+this.labelPadding+o+this.listInterval}this.lastList.push(d),this.numberOfPages=this.lastList.length}},e.prototype.renderListLegendMode=function(e,t){var a=this.heatMap,o={color:"transparent",width:0};this.legendLabelTooltip=[];var s,r=new n.e(0,0),h=0,d=0,p=e.x,c=e.y;t&&this.renderPagingElements();var u,g,v=a.legendSettings.title.text?this.width-2*(this.legendSize+this.labelPadding):this.legendGroup.width-(this.legendSize+this.legendRectPadding+this.labelPadding);a.horizontalGradient?(u=1===this.currentPage?0:this.lastList[this.currentPage-2],g=this.lastList[this.currentPage-1]):(u=this.currentPage*this.listPerPage-this.listPerPage,g=u+this.listPerPage,g=g<a.colorCollection.length?g:a.colorCollection.length);for(var m=u;m<g;m++){if(a.legendSettings.showLabel){var y=this.labelCollections[m];r=i.i(n.b)(y,a.legendSettings.textStyle)}var f={cancel:!1,text:this.labelCollection[m],name:"legendRender"};if(a.horizontalGradient&&(p=this.legendXCollections[m],c=this.legendYCollections[m],h=this.labelXCollections[m],d=this.labelYCollections[m]),h=p+this.legendSize+this.labelPadding,d=c+5,this.heatMap.trigger("legendRender",f),t&&a.rendering&&this.legendRange.length<=a.colorCollection.length){var x=new n.Q(p,c,10,10,a.colorCollection[m].value,!0,this.currentPage);if(x.visible=!!i.i(l.isNullOrUndefined)(this.visibilityCollections[m])||this.visibilityCollections[m],f.cancel){var b=new n.Q(p,c,0,0,a.colorCollection[m].value,!0,this.currentPage);this.legendRange.push(b)}else this.legendRange.push(x);if(a.legendSettings.showLabel){var S=new n.Q(h,d-r.height/2,r.width,r.height,a.colorCollection[m].value,!0,this.currentPage);S.visible=!!i.i(l.isNullOrUndefined)(this.visibilityCollections[m])||this.visibilityCollections[m],this.legendTextRange.push(S)}}if(!f.cancel){if(a.legendSettings.showLabel){var y=i.i(n.z)(this.labelCollections[m],a.legendSettings.textStyle,v);-1!==y[0].indexOf("...")&&a.enableCanvasRendering&&this.legendLabelTooltip.push(new n.L(this.labelCollections[m],new n.o(h,d,r.width,r.height)));var C=new n.q(h,d,"start",y,0,"translate(0,0)","middle"),M=new n.p(a.element.id+"_Legend_Label"+m,C,a.legendSettings.textStyle,a.legendSettings.textStyle.color||a.themeStyle.legendLabel);M.fill=a.legendOnLoad?M.fill:this.legendRange[m].visible?M.fill:"#D3D3D3",this.drawSvgCanvas.createText(M,this.translategroup,y[0]),l.Browser.isIE&&!a.enableCanvasRendering&&this.translategroup.lastChild.setAttribute("dy","0.6ex")}s=new n.o(p,c,10,10);var w=a.legendOnLoad?this.heatMap.isColorRange?a.colorCollection[m].minColor:a.colorCollection[m].color:this.legendRange[m].visible?this.heatMap.isColorRange?a.colorCollection[m].minColor:a.colorCollection[m].color:"#D3D3D3",L=new n.m(a.element.id+"_legend_list"+m,w,o,1,s);this.drawSvgCanvas.drawRectangle(L,this.translategroup),a.horizontalGradient?p=p+this.legendSize+this.labelPadding+r.width+this.listInterval:c+=this.legendSize+this.listInterval}}if(!a.enableCanvasRendering){this.legendGroup.height=this.legendGroup.height>0?this.legendGroup.height:0,this.legendGroup.width=this.legendGroup.width>0?this.legendGroup.width:0;var R=a.renderer.createClipPath({id:a.element.id+"_LegendScale_ClipPath"}),T=a.renderer.drawRectangle(this.legendGroup);R.appendChild(T),this.translategroup.appendChild(R),this.legend.style.cssText="clip-path:url(#"+R.id+")",this.legendScale.appendChild(this.translategroup),a.svgObject.appendChild(this.legend)}},e.prototype.translatePage=function(e,t,i){if(i&&t>=1&&t<this.numberOfPages||!i&&t>1&&t<=this.numberOfPages){if(i?(this.currentPage+=1,this.legendRect.y+=this.legendRect.height):(this.currentPage-=1,this.legendRect.y-=this.legendRect.height),e.enableCanvasRendering){var l=e.canvasRenderer.ctx;l.fillRect(this.legendRectScale.x-5,this.legendRectScale.y-5,this.legendRectScale.width+5,this.legendRectScale.height+10),l.fillRect(this.pagingRect.x,this.pagingRect.y,this.pagingRect.width,this.pagingRect.height)}else for(this.paginggroup.removeChild(this.paginggroup.firstChild);this.translategroup.childNodes.length;)this.translategroup.removeChild(this.translategroup.firstChild);this.renderListLegendMode(this.legendRectScale,!0)}if(e.enableCanvasRendering&&e.allowSelection&&e.rectSelected){var l=e.secondaryCanvasRenderer.ctx,n=e.legendSettings.position,a=e.initialClipRect,o="Right"===n?a.x+a.width:0,s="Bottom"===n?a.y+a.height:0,r="Right"===n?e.availableSize.width-(a.x+a.width):"Left"===n?a.x:e.availableSize.width,h="Top"===n?a.y:"Bottom"===n?e.availableSize.height-(a.y+a.height):e.availableSize.height;l.save(),l.clearRect(o,s,r,h),l.restore();var d=document.getElementById(e.element.id+"_canvas"),p=document.getElementById(e.element.id+"_secondary_canvas"),c=d.getContext("2d").getImageData(o,s,r,h);p.getContext("2d").putImageData(c,o,s),d.style.opacity="0.3"}},e.prototype.createTooltipDiv=function(){var e=i.i(l.createElement)("div",{id:this.heatMap.element.id+"legendLabelTooltipContainer"});e.style.cssText="position: absolute; pointer-events: none;",this.heatMap.element.appendChild(e)},e.prototype.renderTooltip=function(e){var t=this.heatMap,i=[e.label],l=null;l=parseInt(t.legendSettings.textStyle.size,10)/2,this.tooltipObject=new s.Tooltip({offset:l,theme:t.theme,content:i,location:{x:e.x+e.width/2,y:e.y+e.height/2},inverted:!t.horizontalGradient,areaBounds:{height:this.legendGroup.height+this.legendGroup.y,width:this.legendGroup.width+this.legendGroup.x,x:"Right"===t.legendSettings.position?0:this.legendGroup.x,y:"Top"===t.legendSettings.position?""===t.titleSettings.text?this.legendGroup.height-this.legendGroup.y:this.legendGroup.y:0}},"#"+this.heatMap.element.id+"legendLabelTooltipContainer"),this.tooltipObject.element.style.visibility="visible"},e.prototype.createTooltip=function(e,t){for(var i,l=0;l<this.heatMap.colorCollection.length;l++){var n=this.legendRectPositionCollection[l];if(n&&e>n.x&&e<n.width+n.x&&t>n.y&&t<n.height+n.y){i=this.legendRectPositionCollection[l];break}}var a=document.getElementById(this.heatMap.element.id+"legendLabelTooltipContainer");a&&"visible"===a.style.visibility&&this.tooltipObject&&!this.heatMap.isTouch&&(this.tooltipObject.fadeOut(),a.style.visibility="hidden"),i&&this.renderTooltip(i)},e.prototype.legendRangeSelection=function(e){var t=this.heatMap,l=this.legendRange,a=t.horizontalGradient?10:0,o=this.legendRectScale,s=t.canvasRenderer.ctx;if(t.rangeSelection=!0,t.enableCanvasRendering){var r=t.canvasRenderer.ctx;t.legendSettings.enableSmartLegend?r.fillRect(o.x-5,o.y-5,o.width+this.labelPadding+this.maxLegendLabelSize.width+5,o.height+2*(5+a)):r.fillRect(o.x-5,o.y-5,o.width+5,o.height+10)}else{if(t.legendSettings.enableSmartLegend)for(;this.legend&&this.legend.childNodes.length;)this.legend.removeChild(this.legend.firstChild);else for(;this.translategroup&&this.translategroup.childNodes.length;)this.translategroup.removeChild(this.translategroup.firstChild);i.i(n.H)(t.heatMapSeries.containerRectObject.id),t.cellSettings.showLabel&&i.i(n.H)(t.heatMapSeries.containerTextObject.id)}if(t.legendSettings.enableSmartLegend&&t.colorCollection.length!==t.legendColorCollection.length&&(e===t.legendColorCollection.length-1?t.toggleValue[e-1].visible=this.visibilityCollections[e-1]=l[e-1].visible=!l[e].visible:e===t.colorCollection.length-1&&(t.toggleValue[e+1].visible=this.visibilityCollections[e+1]=l[e+1].visible=!l[e].visible)),t.toggleValue[e].visible=this.visibilityCollections[e]=l[e].visible=!l[e].visible,t.legendOnLoad=!1,t.legendSettings.enableSmartLegend){this.renderSmartLegend();var h=new n.o(o.x,o.y,o.width,o.height);this.renderLegendLabel(h),t.enableCanvasRendering&&(s.save(),s.clip()),"SVG"===t.renderingMode&&this.renderTitle(h)}else this.renderListLegendMode(this.legendRectScale,!1);t.enableCanvasRendering&&s.restore(),t.heatMapSeries.renderRectSeries(),t.clearSelection(),t.enableCanvasRendering&&t.allowSelection},e.prototype.updateLegendRangeCollections=function(){var e=this.heatMap;e.rangeSelection=!e.legendOnLoad,this.visibilityCollections=e.legendOnLoad?[]:this.visibilityCollections,e.toggleValue=e.legendOnLoad?[]:e.toggleValue,this.legendRange=e.legendOnLoad?[]:this.legendRange,this.legendTextRange=e.legendOnLoad?[]:this.legendTextRange},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return d}),i.d(t,"b",function(){return p});var l=i(1),n=(i.n(l),i(0)),a=i(5),o=i(2),s=i(3),r=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function l(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(l.prototype=i.prototype,new l)}}(),h=this&&this.__decorate||function(e,t,i,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,l);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,i,o):n(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),h([i.i(l.Property)("")],t.prototype,"labelTemplate",void 0),h([i.i(l.Property)(!0)],t.prototype,"showLabel",void 0),h([i.i(l.Property)("")],t.prototype,"format",void 0),h([i.i(l.Property)(!0)],t.prototype,"enableCellHighlighting",void 0),h([i.i(l.Complex)({},o.j)],t.prototype,"bubbleSize",void 0),h([i.i(l.Complex)({},o.c)],t.prototype,"border",void 0),h([i.i(l.Complex)(s.a.rectLabelFont,o.a)],t.prototype,"textStyle",void 0),h([i.i(l.Property)("Rect")],t.prototype,"tileType",void 0),h([i.i(l.Property)("Color")],t.prototype,"bubbleType",void 0),h([i.i(l.Property)(!1)],t.prototype,"isInversedBubbleSize",void 0),t}(l.ChildProperty),p=function(){function e(e){this.heatMap=e,this.drawSvgCanvas=new n.y(this.heatMap),this.cellColor=new a.c(this.heatMap)}return e.prototype.renderRectSeries=function(){this.createSeriesGroup();var e=this.heatMap,t=!1;e.xLength=e.axisCollections[0].axisLabelSize,e.yLength=e.axisCollections[1].axisLabelSize;var a,o,s=Math.round(100*e.initialClipRect.x)/100,r=Math.round(100*e.initialClipRect.y)/100,h=0,d=0,p=e.cellSettings,c=Math.round((e.initialClipRect.width-p.border.width/2)/e.xLength*100)/100,u=Math.round((e.initialClipRect.height-p.border.width/2)/e.yLength*100)/100,g=0,v=[],m=p.border,y=null;this.rectPositionCollection=[],this.color="",this.bubbleColorValue=[],e.yAxis.opposedPosition&&(s=Math.round(100*(e.initialClipRect.x+parseFloat(m.width.toString())/2))/100),i.i(l.isNullOrUndefined)(this.heatMap.cellSettings.labelTemplate)||""===this.heatMap.cellSettings.labelTemplate||(document.getElementById(this.heatMap.element.id+"_LabelTemplate_Group")&&i.i(n.H)(this.heatMap.element.id+"_LabelTemplate_Group"),y=i.i(l.createElement)("div",{id:e.element.id+"_LabelTemplate_Group"}));for(var f=this.getBubbleRadius(c,u),x=0;x<e.xLength*e.yLength;x++){"Column"===e.paletteSettings.colorGradientMode&&"Gradient"===this.heatMap.paletteSettings.type?(this.heatMap.dataSourceMinValue=this.heatMap.dataMin[d],this.heatMap.dataSourceMaxValue=this.heatMap.dataMax[d]):"Row"===e.paletteSettings.colorGradientMode&&"Gradient"===this.heatMap.paletteSettings.type&&(this.heatMap.dataSourceMinValue=this.heatMap.dataMin[h],this.heatMap.dataSourceMaxValue=this.heatMap.dataMax[h]),this.setTextAndColor(h,d);var b=new n.k(0,0,0,0,0,"",0,0,0,0,!0,"","",!0);if(a=m.color,this.heatMap.bubbleSizeWithColor?this.updateRectDetails(b,s,r,c,u,i.i(l.extend)("",this.bubbleColorValue,null,!0),x,d,h):this.updateRectDetails(b,s,r,c,u,this.text,x,d,h),p.showLabel)if(i.i(l.isNullOrUndefined)(this.heatMap.cellSettings.labelTemplate)||""===this.heatMap.cellSettings.labelTemplate)o=this.getFormatedText(this.text,p.format);else{var S=e.dataSourceSettings.bubbleDataMapping&&e.dataSourceSettings.isJsonData&&"Cell"===e.dataSourceSettings.adaptorType&&!i.i(l.isNullOrUndefined)(b.value[0])?b.value[0].bubbleData:b.value;"number"==typeof S&&"#ffffff"!==this.cellColor.getColorByValue(S)&&i.i(n.h)(this.heatMap.cellSettings.labelTemplate,e,y,b,e.axisCollections[0].axisLabels,e.axisCollections[1].axisLabels.slice().reverse(),x)}else o="";if(b.displayText=o,i.i(l.isNullOrUndefined)(this.heatMap.cellRender)||(o=this.cellRendering(b,o)),("Canvas"===e.renderingMode&&0===parseFloat(m.width.toString())||!a&&"Bubble"===p.tileType&&"Sector"===p.bubbleType)&&(a=this.color),"Rect"===p.tileType)this.renderTileCell(b,m,x,this.color,a),this.updateLabelVisibleStatus(c,u,o);else if("Color"===p.bubbleType)this.renderBubbleCell(b,m,x,this.color,a,f),this.updateLabelVisibleStatus(2*f-12,2*f-6,o);else if(i.i(l.isNullOrUndefined)(this.text)||"Size"!==p.bubbleType&&"SizeAndColor"!==p.bubbleType||""===this.text.toString())"Sector"!==p.bubbleType||i.i(l.isNullOrUndefined)(this.text)||""===this.text.toString()||(this.renderSectorCell(b,m,x.toString(),this.color,a,f,this.text),this.checkLabelXDisplay=!1,this.checkLabelYDisplay=!1);else{"Table"!==this.heatMap.paletteSettings.colorGradientMode&&"Gradient"===this.heatMap.paletteSettings.type&&(this.heatMap.minColorValue=isFinite(this.heatMap.minColorValue)?this.heatMap.minColorValue:this.heatMap.dataSourceMinValue,this.heatMap.maxColorValue=isFinite(this.heatMap.maxColorValue)?this.heatMap.maxColorValue:this.heatMap.dataSourceMaxValue);var C=this.getRadiusBypercentage(parseFloat(this.text.toString()),e.dataSourceMinValue,e.dataSourceMaxValue,f);this.renderBubbleCell(b,m,x,this.color,a,C),this.updateLabelVisibleStatus(2*C-12,2*C-6,o)}if(v.push(b),e.rangeSelection&&"Fixed"===e.paletteSettings.type&&(t=this.isCellValueInRange(h,d),b.visible=t),p.showLabel&&this.checkLabelYDisplay&&this.checkLabelXDisplay){var M=p.textStyle,w=new n.p(e.element.id+"_HeatMapRectLabels_"+x,new n.q(Math.round(100*(s+c/2))/100,Math.round(100*(r+u/2))/100,"middle",o,null,null,"middle"),M,M.color||this.getSaturatedColor(this.color));b.textId=w.id,e.rangeSelection&&"Fixed"===e.paletteSettings.type&&(w.fill=t?w.fill:this.heatMap.themeStyle.toggledColor),l.Browser.isIE&&!e.enableCanvasRendering&&(w.dy="Bubble"===this.heatMap.cellSettings.tileType?"0.5ex":"1ex"),this.drawSvgCanvas.createText(w,this.containerTextObject,o)}g===e.xLength-1?(r=Math.round(100*(r+u))/100,g=0,d=0,s=e.yAxis.opposedPosition?Math.round(100*(e.initialClipRect.x+parseFloat(m.width.toString())/2))/100:Math.round(100*e.initialClipRect.x)/100,this.rectPositionCollection.push(v),v=[],h++):(s=Math.round(100*(s+c))/100,g++,d++)}i.i(l.isNullOrUndefined)(y)||document.getElementById(this.heatMap.element.id+"_Secondary_Element").appendChild(y),e.enableCanvasRendering||(e.svgObject.appendChild(this.containerRectObject),!p.showLabel||"Bubble"===p.tileType&&"Sector"===p.bubbleType||e.svgObject.appendChild(this.containerTextObject))},e.prototype.isCellValueInRange=function(e,t){for(var n=!1,a=0;a<this.heatMap.toggleValue.length;a++){var o=void 0,s=0!==a||this.heatMap.isColorRange?this.heatMap.isColorRange?this.heatMap.toggleValue[a].startValue:this.heatMap.toggleValue[a].value:this.heatMap.dataSourceMinValue;o="Bubble"===this.heatMap.cellSettings.tileType&&"SizeAndColor"===this.heatMap.cellSettings.bubbleType?a===this.heatMap.toggleValue.length-1?this.heatMap.maxColorValue:this.heatMap.toggleValue[a+1].value-.01:a!==this.heatMap.toggleValue.length-1||this.heatMap.isColorRange?this.heatMap.isColorRange?this.heatMap.toggleValue[a].endValue:this.heatMap.toggleValue[a+1].value-.01:this.heatMap.dataSourceMaxValue;var r=this.heatMap.clonedDataSource,h=i.i(l.isNullOrUndefined)(r[e][t][1])||""===r[e][t][1].toString()?"":r[e][t][1],d=parseFloat("Bubble"===this.heatMap.cellSettings.tileType&&"SizeAndColor"===this.heatMap.cellSettings.bubbleType?h.toString():this.text.toString());if(isNaN(d))n=!0;else{if(!isNaN(d)&&d>=s&&d<=o){if(this.heatMap.toggleValue[a].visible){n=!0;break}n=!1;break}if(this.heatMap.isColorRange&&o>=this.heatMap.toggleValue[a].endValue&&a===this.heatMap.toggleValue.length-1){n=!0;break}}}return n},e.prototype.cellRendering=function(e,t){var i=this.heatMap.axisCollections[0],l=this.heatMap.axisCollections[1],n=i.tooltipLabels,a=l.tooltipLabels.slice().reverse(),o=l.labelValue.slice().reverse(),s={heatmap:this.heatMap,cancel:!1,name:"cellRender",value:e.value,xLabel:n[e.xIndex].toString(),yLabel:a[e.yIndex].toString(),displayText:t,xValue:i.labelValue[e.xIndex],yValue:o[e.yIndex],cellColor:this.color};return this.heatMap.trigger("cellRender",s),this.color=s.cellColor,s.displayText},e.prototype.setTextAndColor=function(e,t){this.bubbleColorValue=[];var n=this.heatMap.dataSourceSettings,a=this.heatMap.clonedDataSource;if(this.heatMap.bubbleSizeWithColor){this.text=i.i(l.isNullOrUndefined)(a[e][t][0])||""===a[e][t][0].toString()?"":a[e][t][0],this.color=i.i(l.isNullOrUndefined)(a[e][t][1])||""===a[e][t][1].toString()?this.heatMap.isColorValueExist?this.heatMap.emptyPointColor:this.cellColor.getColorByValue(this.text):this.cellColor.getColorByValue(a[e][t][1]);var s=new o.n(n.isJsonData&&"Cell"===n.adaptorType?n.bubbleDataMapping.size:null,this.text,"Size");this.bubbleColorValue.push(s),this.bubbleColorValue.push({mappingName:n.isJsonData&&"Cell"===n.adaptorType?n.bubbleDataMapping.color:null,bubbleData:i.i(l.isNullOrUndefined)(a[e][t][1])||""===a[e][t][1].toString()?"":a[e][t][1],valueType:"Color"})}else this.text=a[e][t],this.color=this.cellColor.getColorByValue(this.text)},e.prototype.createSeriesGroup=function(){this.heatMap.enableCanvasRendering||(this.containerRectObject=this.heatMap.renderer.createGroup({id:this.heatMap.element.id+"_Container_RectGroup"}),!this.heatMap.cellSettings.showLabel||"Bubble"===this.heatMap.cellSettings.tileType&&"Sector"===this.heatMap.cellSettings.bubbleType||(this.containerTextObject=this.heatMap.renderer.createGroup({id:this.heatMap.element.id+"_Container_TextGroup",transform:"translate( 0, 0)"})))},e.prototype.updateRectDetails=function(e,t,i,l,n,a,o,s,r){e.x=t,e.y=i,e.width=l,e.height=n,e.value=a,e.id=this.heatMap.element.id+"_HeatMapRect_"+o,e.xIndex=s,e.yIndex=r},e.prototype.renderTileCell=function(e,t,i,l,a){var o=new n.m(this.heatMap.element.id+"_HeatMapRect_"+i,l,t,1,new n.o(e.x,e.y,e.width,e.height),a||this.heatMap.themeStyle.cellBorder,t.radius,t.radius);this.drawSvgCanvas.drawRectangle(o,this.containerRectObject,!0)},e.prototype.getBubbleRadius=function(e,t){var i=e/2-2;return t/2<e/2&&(i=t/2-2),i<0?0:i},e.prototype.renderSectorCell=function(e,t,i,l,a,o,s){for(var r,h,d,p,c,u,g,v,m,y,f=Math.round(100*(e.x+e.width/2))/100,x=Math.round(100*(e.y+e.height/2))/100,b=l,S=this.getRadiusBypercentage(s,this.heatMap.dataSourceMinValue,this.heatMap.dataSourceMaxValue,360),C=0;C<2;C++){y=parseFloat(t.width.toString()),0===C?(r=S>=180?1:0,h=-90,d=0===S?270:S-90,p=Math.round(100*(f+o*Math.cos((S-90)*(Math.PI/180))))/100,c=Math.round(100*(x+o*Math.sin((S-90)*(Math.PI/180))))/100,u=Math.round(100*f)/100,g=Math.round(100*(x-o))/100,0===S&&(b=this.heatMap.emptyPointColor)):(r=S>=180?0:1,h=d,d=270,b=this.heatMap.emptyPointColor,i+="_Unfilled",v=p,m=c,p=u,c=g,u=v,g=m,0===S&&(y=1,a=l));var M=new n.u("",!1,f,x,u,g,p,c,h,d,o,!0),w=new n.t(this.heatMap.element.id+"_HeatMapRect_"+i,M,b,t,y,1,a);if(this.calculateShapes(w,M,S,r),this.drawSvgCanvas.drawPath(w,M,this.containerRectObject),360===S)break}},e.prototype.calculateShapes=function(e,t,n,a){var o;switch(n){case 360:case 0:0===n&&t.start===t.end?o="M "+e.x+" "+e.y+" L "+t.x+" "+(t.y-t.radius):(o=this.heatMap.enableCanvasRendering?"":"M "+e.x+" "+e.y+" ",o=o+"m "+-t.radius+" 0 a "+t.radius+" "+t.radius+" 0 1 0 "+2*t.radius+" 0 a "+t.radius+" "+t.radius+" 0 1 0 "+-2*t.radius+" 0 "),i.i(l.merge)(e,{d:o});break;default:o="M "+e.x+" "+e.y+" L "+t.x1+" "+t.y1+" A "+t.radius+" "+t.radius+" 0 "+a+" 1 "+t.cx+" "+t.cy+" Z",i.i(l.merge)(e,{d:o})}},e.prototype.renderBubbleCell=function(e,t,i,l,a,o){var s=new n.n(this.heatMap.element.id+"_HeatMapRect_"+i,l,t,1,a||this.heatMap.themeStyle.cellBorder,Math.round(100*(e.x+e.width/2))/100,Math.round(100*(e.y+e.height/2))/100,o);this.drawSvgCanvas.drawCircle(s,this.containerRectObject)},e.prototype.updateLabelVisibleStatus=function(e,t,n){this.heatMap.cellSettings.showLabel&&(i.i(l.isNullOrUndefined)(this.heatMap.cellSettings.labelTemplate)||""===this.heatMap.cellSettings.labelTemplate)&&(this.checkLabelYDisplay=t>parseInt(this.heatMap.cellSettings.textStyle.size,10),this.checkLabelXDisplay=e>n.length*(parseInt(this.heatMap.cellSettings.textStyle.size,10)/2))},e.prototype.getRadiusBypercentage=function(e,t,i,l){var n=parseInt(this.heatMap.cellSettings.bubbleSize.minimum,10),a=parseInt(this.heatMap.cellSettings.bubbleSize.maximum,10);(n<0||n>100||isNaN(n))&&(n=0),(a<0||a>100||isNaN(a))&&(a=100);var o=(e-t)/(i-t)*100;return o=isNaN(o)?100:o,(this.heatMap.bubbleSizeWithColor||"Bubble"===this.heatMap.cellSettings.tileType&&"Size"===this.heatMap.cellSettings.bubbleType)&&(this.heatMap.cellSettings.isInversedBubbleSize&&(o=100-o),o=o*(a-n)/100+n),l*=o/100,Math.round(100*l)/100<0?0:Math.round(100*l)/100},e.prototype.getSaturatedColor=function(e){var t=e;t="transparent"===t?window.getComputedStyle(document.body,null).backgroundColor:t;var l=i.i(n.V)(i.i(n.S)(t));return Math.round((299*l.R+587*l.G+114*l.B)/1e3)>=128?"black":"white"},e.prototype.highlightSvgRect=function(e){if(-1===e.indexOf("Celltooltip"))if(-1!==e.indexOf("_HeatMapRect")){if(-1!==e.indexOf("_HeatMapRectLabels_")){var t=e.indexOf("_HeatMapRectLabels_")+19;e=this.heatMap.element.id+"_HeatMapRect_"+e.slice(t)}var i=document.getElementById(e);if(this.heatMap.tempRectHoverClass!==e){if(this.heatMap.cellSettings.enableCellHighlighting){var l=void 0;this.heatMap.tempRectHoverClass&&(l=document.getElementById(this.heatMap.tempRectHoverClass)),l&&!this.heatMap.rectSelected&&l.setAttribute("opacity","1"),i&&!this.heatMap.rectSelected&&i.setAttribute("opacity","0.65")}this.heatMap.tempRectHoverClass=e}}else if(this.heatMap.cellSettings.enableCellHighlighting){var l=void 0;this.heatMap.tempRectHoverClass&&(l=document.getElementById(this.heatMap.tempRectHoverClass)),l&&!this.heatMap.rectSelected&&(l.setAttribute("opacity","1"),this.heatMap.tempRectHoverClass="")}},e.prototype.getFormatedText=function(e,t){var l=t,a=null!==l.match("{value}");this.format=this.heatMap.intl.getNumberFormat({format:a?"":l});var o="";return""!==e.toString()&&(o=i.i(n.W)(a,l,e,this.format)),o},e.prototype.getCurrentRect=function(e,t){var i,l=[];l.push(this.heatMap.heatMapSeries.rectPositionCollection[0][0]);var n=Math.ceil((e-l[0].x)/l[0].width)<this.heatMap.axisCollections[0].axisLabelSize?Math.ceil((e-l[0].x)/l[0].width):this.heatMap.axisCollections[0].axisLabelSize,a=Math.floor((t-l[0].y)/l[0].height)<this.heatMap.axisCollections[1].axisLabelSize?Math.floor((t-l[0].y)/l[0].height):this.heatMap.axisCollections[1].axisLabelSize-1;return n=0===n?1:n,i=this.heatMap.heatMapSeries.rectPositionCollection[a][n-1],this.hoverXAxisLabel=this.heatMap.axisCollections[0].tooltipLabels[n-1],this.hoverXAxisValue=this.heatMap.axisCollections[0].labelValue[n-1],this.hoverYAxisLabel=this.heatMap.axisCollections[1].tooltipLabels[this.heatMap.axisCollections[1].tooltipLabels.length-1-a],this.hoverYAxisValue=this.heatMap.axisCollections[1].labelValue[this.heatMap.axisCollections[1].labelValue.length-1-a],i},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var l=i(1),n=(i.n(l),i(15)),a=(i.n(n),i(4)),o=(i.n(a),i(0)),s=function(){function e(e){this.control=e}return e.prototype.export=function(e,t,a){var s,r,h=this,d=this.getControlsValue(),p=d.width,c=d.height,u=this.control.svgObject,g=this.control.enableCanvasRendering;g||(u=i.i(l.createElement)("canvas",{id:"ej2-canvas",attrs:{width:p.toString(),height:c.toString()}}));var v=!(l.Browser.userAgent.toString().indexOf("HeadlessChrome")>-1);a=i.i(l.isNullOrUndefined)(a)?n.PdfPageOrientation.Landscape:a;var m='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+d.svg.outerHTML+"</svg>";if(g)s=u.toDataURL("image/png");else{var y=this.control.svgObject.cloneNode(!0),f=y.childNodes[0],x=f.getAttribute("fill");"Tailwind"!==this.control.theme&&"Bootstrap5"!==this.control.theme&&"Fluent"!==this.control.theme&&"Material3"!==this.control.theme||"rgba(255,255,255, 0.0)"!==x&&"transparent"!==x?"TailwindDark"!==this.control.theme&&"Bootstrap5Dark"!==this.control.theme&&"FluentDark"!==this.control.theme&&"Material3Dark"!==this.control.theme||"rgba(255,255,255, 0.0)"!==x&&"transparent"!==x||f.setAttribute("fill","rgba(0, 0, 0, 1)"):f.setAttribute("fill","rgba(255,255,255, 1)"),s=window.URL.createObjectURL(new Blob("SVG"===e?[m]:[(new XMLSerializer).serializeToString(y)],{type:"image/svg+xml"}))}if("SVG"===e)if("msie"===l.Browser.info.name){var b=new Blob([(new XMLSerializer).serializeToString(d.svg)],{type:"application/octet-stream"});window.navigator.msSaveOrOpenBlob(b,t+"."+e.toLocaleLowerCase())}else this.triggerDownload(t,e,s,v);else if("msie"===l.Browser.info.name){var S=u;g||(S=this.createCanvas()),r=S.toDataURL(e),"PDF"===e?this.exportPdf(S,a,p,c,v,t):this.doExport(e,r,t)}else{var C=new Image,M=u.getContext("2d"),w=M.shadowColor;C.onload=function(){"Tailwind"!==h.control.theme&&"Bootstrap5"!==h.control.theme&&"Fluent"!==h.control.theme&&"Material3"!==h.control.theme||"rgba(0, 0, 0, 0)"!==w&&"transparent"!==w?"TailwindDark"!==h.control.theme&&"Bootstrap5Dark"!==h.control.theme&&"FluentDark"!==h.control.theme&&"Material3Dark"!==h.control.theme||"rgba(0, 0, 0, 0)"!==w&&"transparent"!==w||(M.fillStyle="rgba(0, 0, 0, 1)"):M.fillStyle="rgba(255,255,255, 1)",M.fillRect(0,0,u.width,u.height),M.drawImage(C,0,0),window.URL.revokeObjectURL(s),"PDF"===e?h.exportPdf(u,a,p,c,v,t):window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(u.msToBlob(),t+"."+e.toLocaleLowerCase()):h.triggerDownload(t,e,u.toDataURL("image/png").replace("image/png","image/octet-stream"),v)},C.src=s}if(!g){var L=document.getElementById(this.control.element.id);i.i(o.H)(L+"_canvas")}},e.prototype.triggerDownload=function(e,t,n,a){i.i(l.createElement)("a",{attrs:{download:e+"."+t.toLocaleLowerCase(),href:n}}).dispatchEvent(new MouseEvent(a?"click":"move",{view:window,bubbles:!1,cancelable:!0}))},e.prototype.getControlsValue=function(){var e=0,t=0,i=this.control.enableCanvasRendering,l=new a.SvgRenderer("").createSvg({id:"Svg_Export_Element",width:200,height:200}),n=this.control.svgObject.cloneNode(!0),o=this.control.renderer.createGroup({});return o.style.cssText="transform: translateY("+t+"px)",i||o.appendChild(n),e=Math.max(this.control.availableSize.width,e),t+=this.control.availableSize.height,i||l.appendChild(o),i||(l.setAttribute("width",e+""),l.setAttribute("height",t+"")),{width:e,height:t,svg:l}},e.prototype.createCanvas=function(){var e=this.control,t=e.renderingMode;e.renderingMode="Canvas",e.refresh();var i=e.svgObject;return e.renderingMode=t,e.refresh(),i},e.prototype.exportPdf=function(e,t,i,l,a,o){var s=new n.PdfDocument,r=s.pageSettings.margins,h=s.pageSettings.width,d=s.pageSettings.height,p=e.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream");s.pageSettings.orientation=t;var c=h<i?i+r.left+r.right:h,u=d<l?l+r.top+r.bottom:d;s.pageSettings.size=new n.SizeF(c,u),p=p.slice(p.indexOf(",")+1),s.pages.add().graphics.drawImage(new n.PdfBitmap(p),0,0,i,l),a&&(s.save(o+".pdf"),s.destroy())},e.prototype.doExport=function(e,t,i){var l=[],n=e||"JPG";l=[t],this.exportImage(l,i,n,t)},e.prototype.exportImage=function(e,t,i,n){for(var a=[],o=e instanceof HTMLElement?0:e.length,s=0;s<o;s++){n=e[s],n=n.replace(/^data:[a-z]*;,/,"");for(var r=n.split(","),h=atob(r[1]),d=new ArrayBuffer(h.length),p=new Uint8Array(d),c=0;c<h.length;c++)p[c]=h.charCodeAt(c);a.push(d)}for(var u=0;u<a.length;u++){var g=new Blob([a[u]],{type:"application/octet-stream"});"msie"===l.Browser.info.name&&window.navigator.msSaveOrOpenBlob(g,t+"."+i.toLocaleLowerCase())}},e.prototype.print=function(){if(this.printWindow=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWindow.moveTo(0,0),this.printWindow.resizeTo(screen.availWidth,screen.availHeight),"SVG"===this.control.renderingMode)i.i(l.print)(this.getHTMLContent(),this.printWindow);else{var e=this.control.svgObject,t=e.toDataURL(),n=new Image,a=e.getContext("2d");n.onload=function(){a.drawImage(n,0,0)},n.src=t,i.i(l.print)(n,this.printWindow)}},e.prototype.getHTMLContent=function(){var e=i.i(l.createElement)("div");return e.appendChild(this.control.element.cloneNode(!0)),e},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return h}),i.d(t,"b",function(){return d});var l=i(1),n=(i.n(l),i(4)),a=(i.n(n),i(2)),o=i(3),s=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function l(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(l.prototype=i.prototype,new l)}}(),r=this&&this.__decorate||function(e,t,i,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,l);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,i,o):n(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),r([i.i(l.Property)("")],t.prototype,"template",void 0),r([i.i(l.Property)("")],t.prototype,"fill",void 0),r([i.i(l.Complex)({},a.d)],t.prototype,"border",void 0),r([i.i(l.Complex)(o.a.tooltipFont,a.a)],t.prototype,"textStyle",void 0),t}(l.ChildProperty),d=function(){function e(e){this.isFirst=!0,this.isFadeout=!1,this.heatMap=e}return e.prototype.getModuleName=function(){return"Tooltip"},e.prototype.showHideTooltip=function(e,t){var i=document.getElementById(this.heatMap.element.id+"Celltooltipcontainer");if(e)i.style.visibility="visible";else{if(i&&"hidden"!==i.style.visibility){if(this.tooltipObject&&t&&this.heatMap.isRectBoundary)this.tooltipObject.fadeOut();else if(this.tooltipObject&&this.tooltipObject.element){var l=this.tooltipObject.element.firstChild;l.setAttribute("opacity","0")}i.style.visibility="hidden"}this.isFadeout=!0}},e.prototype.destroy=function(){},e.prototype.createTooltip=function(e,t,a,o){var s=null,r=i.i(l.select)("#"+this.heatMap.element.id+"Celltooltipcontainer");this.heatMap.cellSettings.showLabel&&this.heatMap.heatMapSeries.checkLabelXDisplay&&this.heatMap.heatMapSeries.checkLabelYDisplay&&(s=parseInt(this.heatMap.cellSettings.textStyle.size,10)/2),"Tailwind"===this.heatMap.theme&&this.heatMap.setProperties({tooltipSettings:{textStyle:{size:"12px",fontFamily:"Inter",fontWeight:"500"}}},!0),"TailwindDark"===this.heatMap.theme&&this.heatMap.setProperties({tooltipSettings:{fill:"#F9FAFB",textStyle:{size:"12px",fontFamily:"Inter",fontWeight:"500",color:"#1F2937"}}},!0),"Bootstrap5"===this.heatMap.theme&&this.heatMap.setProperties({tooltipSettings:{textStyle:{size:"14px",fontFamily:'system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',fontWeight:"500"}}},!0),"Bootstrap5Dark"===this.heatMap.theme&&this.heatMap.setProperties({tooltipSettings:{fill:"#E9ECEF",textStyle:{size:"14px",fontFamily:'system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',fontWeight:"500",color:"#212529"}}},!0),"Fluent"===this.heatMap.theme&&this.heatMap.setProperties({tooltipSettings:{textStyle:{size:"12px",fontFamily:'"Segoe UI", -apple-system, BlinkMacSystemFont, "Roboto", "Helvetica Neue", sans-serif',fontWeight:"500"}}},!0),"FluentDark"===this.heatMap.theme&&this.heatMap.setProperties({tooltipSettings:{fill:"#252423",textStyle:{size:"12px",fontFamily:'"Segoe UI", -apple-system, BlinkMacSystemFont, "Roboto", "Helvetica Neue", sans-serif',fontWeight:"500",color:"#F3F2F1"}}},!0),"Material3"===this.heatMap.theme&&this.heatMap.setProperties({tooltipSettings:{fill:"#313033",textStyle:{size:"14px",fontFamily:"Roboto",fontWeight:"400",color:"#F4EFF4"}}},!0),"Material3Dark"===this.heatMap.theme&&this.heatMap.setProperties({tooltipSettings:{fill:"#E6E1E5",textStyle:{size:"14px",fontFamily:"Roboto",fontWeight:"400",color:"#313033"}}},!0),this.tooltipObject=new n.Tooltip({opacity:"Tailwind"===this.heatMap.theme||"TailwindDark"===this.heatMap.theme||"Bootstrap5"===this.heatMap.theme||"Bootstrap5Dark"===this.heatMap.theme||"Fluent"===this.heatMap.theme||"FluentDark"===this.heatMap.theme?1:.75,enableAnimation:!1,offset:s,location:{x:t,y:a},availableSize:this.heatMap.availableSize,data:{xValue:this.heatMap.heatMapSeries.hoverXAxisValue,yValue:this.heatMap.heatMapSeries.hoverYAxisValue,value:e.value,xLabel:this.heatMap.heatMapSeries.hoverXAxisLabel?this.heatMap.heatMapSeries.hoverXAxisLabel.toString():null,yLabel:this.heatMap.heatMapSeries.hoverYAxisLabel?this.heatMap.heatMapSeries.hoverYAxisLabel.toString():null},theme:this.heatMap.theme,content:o,fill:this.heatMap.tooltipSettings.fill,template:""===this.heatMap.tooltipSettings.template?null:this.heatMap.tooltipSettings.template,border:{width:this.heatMap.tooltipSettings.border.width,color:this.heatMap.tooltipSettings.border.color},textStyle:{size:this.heatMap.tooltipSettings.textStyle.size,fontWeight:this.heatMap.tooltipSettings.textStyle.fontWeight.toLowerCase(),color:this.heatMap.tooltipSettings.textStyle.color,fontStyle:this.heatMap.tooltipSettings.textStyle.fontStyle.toLowerCase(),fontFamily:this.heatMap.tooltipSettings.textStyle.fontFamily},areaBounds:{height:this.heatMap.initialClipRect.height+this.heatMap.initialClipRect.y,width:this.heatMap.initialClipRect.width,x:this.heatMap.initialClipRect.x}},r)},e.prototype.createTooltipDiv=function(e){var t=e.enableCanvasRendering&&e.allowSelection?e.availableSize.height:0,n=i.i(l.createElement)("div",{id:this.heatMap.element.id+"Celltooltipcontainer"});n.style.cssText="position:absolute; z-index: 3;top:-"+t+"px";var a=i.i(l.createElement)("div",{id:this.heatMap.element.id+"Celltooltipparent"});a.style.position="relative",a.appendChild(n),this.heatMap.element.appendChild(a)},e.prototype.getTooltipContent=function(e,t){var i,l,n=this.heatMap,a=this.heatMap.dataSourceSettings;if(n.bubbleSizeWithColor){var o=n.xAxis.title&&""!==n.xAxis.title.text?n.xAxis.title.text:"X-Axis",s=n.yAxis.title&&""!==n.yAxis.title.text?n.yAxis.title.text:"Y-Axis",r=a.isJsonData&&"Cell"===a.adaptorType?a.bubbleDataMapping.size:"Value 1",h=a.isJsonData&&"Cell"===a.adaptorType?a.bubbleDataMapping.color:"Value 2";i=t.getFormatedText(e.value[0].bubbleData,this.heatMap.cellSettings.format),l=[o+" : "+t.hoverXAxisLabel+"<br/>"+s+" : "+t.hoverYAxisLabel+"<br/>"+r+" : "+i+"<br/>"+h+" : "+t.getFormatedText(e.value[1].bubbleData,this.heatMap.cellSettings.format)]}else i=e.value,l=[t.hoverXAxisLabel+" | "+t.hoverYAxisLabel+" : "+t.getFormatedText(i,this.heatMap.cellSettings.format)];return l},e.prototype.renderTooltip=function(e){var t=this,n=this.heatMap.heatMapSeries,a=[""];if(this.heatMap.bubbleSizeWithColor?i.i(l.isNullOrUndefined)(e.value)||i.i(l.isNullOrUndefined)(e.value[0].bubbleData)||""===e.value[0].bubbleData.toString():i.i(l.isNullOrUndefined)(e.value)||!i.i(l.isNullOrUndefined)(e.value)&&""===e.value.toString())this.showHideTooltip(!1,!1),e.visible||this.showHideTooltip(!1,!1);else if(i.i(l.isNullOrUndefined)(this.heatMap.tooltipRender))a=this.getTooltipContent(e,n),this.tooltipCallback(e,a);else{var o=this.getTooltipContent(e,n),s={heatmap:this.heatMap,cancel:!1,name:"tooltipRender",value:e.value,xValue:this.heatMap.heatMapSeries.hoverXAxisValue,yValue:this.heatMap.heatMapSeries.hoverYAxisValue,xLabel:this.heatMap.heatMapSeries.hoverXAxisLabel?this.heatMap.heatMapSeries.hoverXAxisLabel.toString():null,yLabel:this.heatMap.heatMapSeries.hoverYAxisLabel?this.heatMap.heatMapSeries.hoverYAxisLabel.toString():null,content:o};this.heatMap.trigger("tooltipRender",s,function(i){i.cancel?t.tooltipObject&&t.showHideTooltip(!1):(a=i.content,t.tooltipCallback(e,a))})}},e.prototype.tooltipCallback=function(e,t){this.tooltipObject?(this.tooltipObject.content=t,this.tooltipObject.data={xValue:this.heatMap.heatMapSeries.hoverXAxisValue,yValue:this.heatMap.heatMapSeries.hoverYAxisValue,xLabel:this.heatMap.heatMapSeries.hoverXAxisLabel?this.heatMap.heatMapSeries.hoverXAxisLabel.toString():null,yLabel:this.heatMap.heatMapSeries.hoverYAxisLabel?this.heatMap.heatMapSeries.hoverYAxisLabel.toString():null,value:e.value}):this.createTooltip(e,e.x+e.width/2,e.y+e.height/2,t),this.showHideTooltip(!0),this.tooltipObject.enableAnimation=!this.isFirst&&!this.isFadeout,this.isFirst=!this.isFirst&&this.isFirst,this.isFadeout=!this.isFadeout&&this.isFadeout,this.tooltipObject.location.x=e.x+e.width/2,this.tooltipObject.location.y=e.y+e.height/2,e.visible||this.showHideTooltip(!1,!1)},e}()},function(e,t){e.exports=i},function(e,t){e.exports=l},function(e,t,i){"use strict";var l=i(17);i.d(t,"a",function(){return l.a});var n=i(7);i.d(t,"b",function(){return n.a});var a=i(6);i.d(t,"c",function(){return a.a});var o=i(8);i.d(t,"d",function(){return o.a}),i.d(t,"e",function(){return o.b}),i.d(t,"f",function(){return o.c});var s=i(9);i.d(t,"g",function(){return s.a});var r=i(10);i.d(t,"h",function(){return r.a}),i.d(t,"i",function(){return r.b});var h=i(2);i.d(t,"j",function(){return h.a}),i.d(t,"k",function(){return h.b}),i.d(t,"l",function(){return h.c}),i.d(t,"m",function(){return h.d}),i.d(t,"n",function(){return h.e}),i.d(t,"o",function(){return h.f}),i.d(t,"p",function(){return h.g}),i.d(t,"q",function(){return h.h}),i.d(t,"r",function(){return h.i}),i.d(t,"s",function(){return h.j}),i.d(t,"t",function(){return h.k}),i.d(t,"u",function(){return h.l}),i.d(t,"v",function(){return h.m}),i.d(t,"w",function(){return h.n}),i.d(t,"x",function(){return h.o}),i.d(t,"y",function(){return h.p});var d=i(11);i.d(t,"z",function(){return d.a}),i.d(t,"A",function(){return d.b});var p=i(5);i.d(t,"B",function(){return p.a}),i.d(t,"C",function(){return p.b}),i.d(t,"D",function(){return p.c});var c=i(13);i.d(t,"E",function(){return c.a}),i.d(t,"F",function(){return c.b});var u=i(12);i.d(t,"G",function(){return u.a});var g=i(0);i.d(t,"H",function(){return g.a}),i.d(t,"I",function(){return g.b}),i.d(t,"J",function(){return g.c}),i.d(t,"K",function(){return g.d}),i.d(t,"L",function(){return g.e}),i.d(t,"M",function(){return g.f}),i.d(t,"N",function(){return g.g}),i.d(t,"O",function(){return g.h}),i.d(t,"P",function(){return g.i}),i.d(t,"Q",function(){return g.j}),i.d(t,"R",function(){return g.k}),i.d(t,"S",function(){return g.l}),i.d(t,"T",function(){return g.m}),i.d(t,"U",function(){return g.n}),i.d(t,"V",function(){return g.o}),i.d(t,"W",function(){return g.p}),i.d(t,"X",function(){return g.q}),i.d(t,"Y",function(){return g.r}),i.d(t,"Z",function(){return g.s}),i.d(t,"_0",function(){return g.t}),i.d(t,"_1",function(){return g.u}),i.d(t,"_2",function(){return g.v}),i.d(t,"_3",function(){return g.w}),i.d(t,"_4",function(){return g.x}),i.d(t,"_5",function(){return g.y}),i.d(t,"_6",function(){return g.z}),i.d(t,"_7",function(){return g.A}),i.d(t,"_8",function(){return g.B}),i.d(t,"_9",function(){return g.C}),i.d(t,"_10",function(){return g.D}),i.d(t,"_11",function(){return g.E}),i.d(t,"_12",function(){return g.F}),i.d(t,"_13",function(){return g.G}),i.d(t,"_14",function(){return g.H}),i.d(t,"_15",function(){return g.I}),i.d(t,"_16",function(){return g.J}),i.d(t,"_17",function(){return g.K}),i.d(t,"_18",function(){return g.L}),i.d(t,"_19",function(){return g.M}),i.d(t,"_20",function(){return g.N}),i.d(t,"_21",function(){return g.O}),i.d(t,"_22",function(){return g.P}),i.d(t,"_23",function(){return g.Q}),i.d(t,"_24",function(){return g.R}),i.d(t,"_25",function(){return g.S}),i.d(t,"_26",function(){return g.T}),i.d(t,"_27",function(){return g.U}),i.d(t,"_28",function(){return g.V}),i.d(t,"_29",function(){return g.W}),i.d(t,"_30",function(){return g.X})},function(e,t,i){"use strict";i.d(t,"a",function(){return x});var l=i(1),n=(i.n(l),i(4)),a=(i.n(n),i(0)),o=i(2),s=i(3),r=i(7),h=i(6),d=i(11),p=i(5),c=i(13),u=i(9),g=i(10),v=i(8),m=i(12),y=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function l(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(l.prototype=i.prototype,new l)}}(),f=this&&this.__decorate||function(e,t,i,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,l);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,i,o):n(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enableCanvasRendering=!1,t.isColorRange=!1,t.isCellTapHold=!1,t.selectedCellCount=0,t.toggleValue=[],t.legendOnLoad=!0,t.resizing=!1,t.rendering=!0,t.multiSelection=!1,t.rectSelected=!1,t.previousSelectedCellsRect=[],t.multiCellCollection=[],t.selectedMultiCellCollection=[],t.tempMultiCellCollection=[],t.tooltipCollection=[],t.isCellData=!1,t}return y(t,e),t.prototype.preRender=function(){this.initPrivateVariable(),this.unWireEvents(),this.wireEvents()},t.prototype.export=function(e,t,i){new m.a(this).export(e,t,i)},t.prototype.initPrivateVariable=function(){this.renderer=new n.SvgRenderer(this.element.id),this.canvasRenderer=new n.CanvasRenderer(this.element.id),this.secondaryCanvasRenderer=new n.CanvasRenderer(this.element.id+"_secondary"),this.heatMapAxis=new h.a(this),this.heatMapSeries=new d.b(this),this.drawSvgCanvas=new a.y(this),this.twoDimensional=new u.a(this),this.cellColor=new p.c(this),this.tempRectHoverClass="",this.tempTooltipRectId="",this.setCulture()},t.prototype.setCulture=function(){this.intl=new l.Internationalization},t.prototype.render=function(){if(this.horizontalGradient="Bottom"===this.legendSettings.position||"Top"===this.legendSettings.position,this.updateBubbleHelperProperty(),this.trigger("load",{heatmap:this}),"TailwindDark"===this.theme||"Tailwind"===this.theme){var e={title:{textStyle:{size:"12px",fontFamily:"Inter",fontWeight:"500"}},textStyle:{size:"12px",fontFamily:"Inter"}};this.setProperties({titleSettings:{textStyle:{size:"14px",fontFamily:"Inter"}}},!0),this.setProperties({legendSettings:e},!0),this.setProperties({xAxis:e},!0),this.setProperties({yAxis:e},!0),this.setProperties({cellSettings:{textStyle:{fontFamily:"Inter"}}},!0)}if("Material3"===this.theme||"Material3Dark"===this.theme){var e={title:{textStyle:{size:"14px",fontFamily:"Roboto",fontWeight:"500"}},textStyle:{size:"12px",fontFamily:"Roboto",fontWeight:"400"}};this.setProperties({titleSettings:{textStyle:{size:"16px",fontFamily:"Roboto"}}},!0),this.setProperties({legendSettings:e},!0),this.setProperties({xAxis:e},!0),this.setProperties({yAxis:e},!0),this.setProperties({cellSettings:{textStyle:{fontFamily:"Roboto",fontWeight:"400"}}},!0)}if("Bootstrap5"===this.theme||"Bootstrap5Dark"===this.theme){var e={title:{textStyle:{size:"12px",fontFamily:'system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',fontWeight:"500"}},textStyle:{size:"12px",fontFamily:'system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"'}};this.setProperties({titleSettings:{textStyle:{size:"16px",fontFamily:'system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"'}}},!0),this.setProperties({legendSettings:e},!0),this.setProperties({xAxis:e},!0),this.setProperties({yAxis:e},!0),this.setProperties({cellSettings:{textStyle:{fontFamily:'system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"'}}},!0)}if("Fluent"===this.theme||"FluentDark"===this.theme){var e={title:{textStyle:{size:"12px",fontFamily:'"Segoe UI", -apple-system, BlinkMacSystemFont, "Roboto", "Helvetica Neue", sans-serif',fontWeight:"500"}},textStyle:{size:"12px",fontFamily:'system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"'}};this.setProperties({titleSettings:{textStyle:{size:"16px",fontFamily:'"Segoe UI", -apple-system, BlinkMacSystemFont, "Roboto", "Helvetica Neue", sans-serif'}}},!0),this.setProperties({legendSettings:e},!0),this.setProperties({xAxis:e},!0),this.setProperties({yAxis:e},!0),this.setProperties({cellSettings:{textStyle:{fontFamily:'"Segoe UI", -apple-system, BlinkMacSystemFont, "Roboto", "Helvetica Neue", sans-serif'}}},!0)}this.initAxis(),this.processInitData(),this.setTheme(),this.calculateMaxLength(),this.heatMapAxis.calculateVisibleLabels(),this.twoDimensional.processDataSource(this.completeAdaptDataSource),this.createSvg(),this.cellColor.getColorCollection(),this.calculateBounds(),this.renderElements(),this.appendSvgObject(),this.tooltipModule&&this.tooltipModule.showHideTooltip(!1),this.renderComplete()},t.prototype.reRenderDatasource=function(){this.dataSourceMinValue=null,this.dataSourceMaxValue=null,this.processInitData(),this.calculateMaxLength(),this.heatMapAxis.calculateVisibleLabels(),this.twoDimensional.processDataSource(this.completeAdaptDataSource),this.cellColor.getColorCollection(),this.calculateBounds()},t.prototype.processInitData=function(){this.adaptorModule?this.adaptorModule.constructDatasource(this.dataSource,this.dataSourceSettings):this.completeAdaptDataSource=this.dataSource},t.prototype.setRenderMode=function(){"Canvas"===this.renderingMode?this.enableCanvasRendering=!0:"Auto"===this.renderingMode&&this.axisCollections[0].axisLabelSize*this.axisCollections[1].axisLabelSize>=1e4?this.enableCanvasRendering=!0:this.enableCanvasRendering=!1},t.prototype.updateBubbleHelperProperty=function(){"Bubble"!==this.cellSettings.tileType||"Size"!==this.cellSettings.bubbleType&&"Sector"!==this.cellSettings.bubbleType?this.legendModule&&this.legendSettings.visible&&(this.legendVisibilityByCellType=!0):this.legendVisibilityByCellType=!1,"Bubble"===this.cellSettings.tileType&&"SizeAndColor"===this.cellSettings.bubbleType?this.bubbleSizeWithColor=!0:this.bubbleSizeWithColor=!1},t.prototype.renderElements=function(){this.tooltipCollection=[],this.renderSecondaryElement(),this.renderBorder(),this.renderTitle(),this.heatMapAxis.renderAxes(),this.tooltipModule&&this.showTooltip&&(this.tooltipModule.tooltipObject=null,this.tooltipModule.createTooltipDiv(this)),this.heatMapSeries.renderRectSeries(),this.legendModule&&this.legendSettings.visible&&this.legendVisibilityByCellType&&(this.legendModule.renderLegendItems(),"Fixed"===this.paletteSettings.type&&this.legendSettings.enableSmartLegend&&"None"===this.legendSettings.labelDisplayType&&this.legendModule.createTooltipDiv()),i.i(a.I)()},t.prototype.getModuleName=function(){return"heatmap"},t.prototype.getPersistData=function(){return""},t.prototype.onPropertyChanged=function(e,t){for(var i=!1,l=!1,n=!0,a=0,o=Object.keys(e);a<o.length;a++){switch(o[a]){case"renderingMode":this.rendering=!1,n=!1,i=!0;break;case"cellSettings":this.updateBubbleHelperProperty(),!this.legendModule||e.cellSettings.tileType===(void 0!==t.cellSettings&&t.cellSettings.tileType)&&e.cellSettings.bubbleType===t.cellSettings.bubbleType||(this.legendOnLoad=!0,this.legendModule.updateLegendRangeCollections()),"Bubble"===this.cellSettings.tileType&&(n=!1),this.reRenderDatasource(),l=!0;break;case"showTooltip":l=!0;break;case"dataSource":case"dataSourceSettings":this.isCellData=!1,this.paletteCellSelectionUpdation(),this.reRenderDatasource(),n=!1,i=!0;break;case"titleSettings":case"width":case"height":case"margin":l=!0;break;case"legendSettings":this.updateBubbleHelperProperty(),!this.legendVisibilityByCellType||e.legendSettings.visible===(void 0!==t.legendSettings&&t.legendSettings.visible)&&e.legendSettings.enableSmartLegend===t.legendSettings.enableSmartLegend?this.legendOnLoad=!1:(this.legendOnLoad=!0,this.legendModule.updateLegendRangeCollections()),l=!0;break;case"yAxis":case"xAxis":this.paletteCellSelectionUpdation(),this.reRenderDatasource(),n=!1,l=!0;break;case"paletteSettings":this.paletteCellSelectionUpdation(),this.twoDimensional.processDataSource(this.completeAdaptDataSource),this.cellColor.getColorCollection(),this.calculateBounds(),i=!0;break;case"theme":this.setTheme(),i=!0;break;case"tooltipSettings":this.tooltipModule&&(this.tooltipModule.tooltipObject.fill=this.tooltipSettings.fill,this.tooltipModule.tooltipObject.border=this.tooltipSettings.border,this.tooltipModule.tooltipObject.textStyle=this.tooltipSettings.textStyle,this.tooltipModule.tooltipObject.template=this.tooltipSettings.template,this.tooltipModule.tooltipObject.refresh())}}!l&&i?(this.createSvg(),this.renderElements(),this.appendSvgObject(),this.trigger("created"),n||this.clearSelection()):l&&(this.createSvg(),this.refreshBound(),this.appendSvgObject(),this.trigger("created")),this.allowSelection&&this.rectSelected&&(n?this.updateCellSelection():this.clearSelection()),this.rendering=!0},t.prototype.paletteCellSelectionUpdation=function(){this.updateBubbleHelperProperty(),this.legendVisibilityByCellType&&(this.legendOnLoad=!0,this.legendModule.updateLegendRangeCollections())},t.prototype.createSvg=function(){this.removeSvg(),this.setRenderMode(),this.calculateSize(),this.enableCanvasRendering?(this.svgObject=this.canvasRenderer.createCanvas({id:this.element.id+"_canvas",width:this.availableSize.width,height:this.availableSize.height}),this.allowSelection&&this.createMultiCellDiv(!0)):(this.svgObject=this.renderer.createSvg({id:this.element.id+"_svg",width:this.availableSize.width,height:this.availableSize.height}),"0"===this.cellSettings.border.width.toString()&&"Rect"===this.cellSettings.tileType&&this.svgObject.setAttribute("shape-rendering","crispEdges"))},t.prototype.removeSvg=function(){if(document.getElementById(this.element.id+"_Secondary_Element")&&i.i(l.remove)(document.getElementById(this.element.id+"_Secondary_Element")),document.getElementById(this.element.id+"Celltooltipcontainer")&&i.i(l.remove)(document.getElementById(this.element.id+"Celltooltipcontainer")),document.getElementById(this.element.id+"legendLabelTooltipContainer")&&i.i(l.remove)(document.getElementById(this.element.id+"legendLabelTooltipContainer")),document.getElementById(this.element.id+"_Multi_CellSelection_Canvas")&&i.i(l.remove)(document.getElementById(this.element.id+"_Multi_CellSelection_Canvas")),document.getElementById(this.element.id+"_CellSelection_Container")&&i.i(l.remove)(document.getElementById(this.element.id+"_CellSelection_Container")),this.svgObject){if(document.getElementById(this.svgObject.id)){for(;this.svgObject.childNodes.length;)this.svgObject.removeChild(this.svgObject.firstChild);i.i(l.remove)(this.svgObject)}}},t.prototype.renderSecondaryElement=function(){var e=this.createElement("div");e.id=this.element.id+"_Secondary_Element",this.element.appendChild(e);var t=this.createElement("div",{id:this.element.id+"_CellSelection_Container"});t.style.cssText="position:absolute; z-index: 2 ; top:"+this.initialClipRect.y+"px; left:"+this.initialClipRect.x+"px",this.element.appendChild(t)},t.prototype.requiredModules=function(){var e=[];return this.showTooltip&&e.push({member:"Tooltip",args:[this]}),this.legendSettings&&e.push({member:"Legend",args:[this]}),this.dataSource&&e.push({member:"Adaptor",args:[this]}),e},t.prototype.destroy=function(){this.unWireEvents(),this.touchInstance.destroy(),this.touchInstance=null,e.prototype.destroy.call(this),i.i(a.I)(),this.element.innerHTML="",this.element.classList.remove("e-heatmap")},t.prototype.refresh=function(){e.prototype.refresh.call(this),this.element.classList.add("e-heatmap")},t.prototype.appendSvgObject=function(){this.enableCanvasRendering&&this.allowSelection?this.createMultiCellDiv(!1):this.element.appendChild(this.svgObject)},t.prototype.renderBorder=function(){this.border={width:0};var e=i.i(l.isNullOrUndefined)(this.backgroundColor)?this.themeStyle.background:this.backgroundColor,t=new a.m(this.element.id+"_HeatmapBorder",e,this.border,1,new a.o(0,0,this.availableSize.width-0,this.availableSize.height-0));this.drawSvgCanvas.drawRectangle(t,this.svgObject)},t.prototype.calculateSize=function(){var e=i.i(a.a)(this.width,this.element.offsetWidth)||this.element.offsetWidth||600,t=i.i(a.a)(this.height,this.element.offsetHeight)||this.element.offsetHeight||450;this.availableSize=new a.e(e,t);for(var l=this.element;l.parentNode&&"BODY"!==l.tagName;){if("center"===l.align){var n=this.availableSize.width.toString();this.element.style.width=n+"px",this.element.style.margin="0 auto";break}l=l.parentElement}},t.prototype.renderTitle=function(){if(this.titleSettings.text){var e=this.titleSettings.textStyle,t="Near"===e.textAlignment?"start":"Far"===e.textAlignment?"end":"middle";this.elementSize=i.i(a.b)(this.titleCollection[0],e);var l=new a.p(this.element.id+"_HeatmapTitle",new a.q(i.i(a.d)(this.availableSize.width-this.margin.left-this.margin.right,this.margin.left,this.margin.right,e),this.margin.top+3*this.elementSize.height/4,t,this.titleCollection),e,e.color||this.themeStyle.heatMapTitle);this.titleCollection.length>1?this.drawSvgCanvas.createWrapText(l,e,this.svgObject):(this.drawSvgCanvas.createText(l,this.svgObject,this.titleCollection[0]),-1!==this.titleCollection[0].indexOf("...")&&this.enableCanvasRendering&&this.tooltipCollection.push(new a.L(this.titleSettings.text,new a.o(this.margin.left,this.margin.top,this.elementSize.width,this.elementSize.height))))}},t.prototype.titleTooltip=function(e,t,l,n){e.target.id===this.element.id+"_HeatmapTitle"&&e.target.textContent.indexOf("...")>-1?i.i(a.G)(this.titleSettings.text,t,l,this.element.offsetWidth,this.element.id+"_Title_Tooltip",i.i(a.J)(this.element.id+"_Secondary_Element"),n,this):i.i(a.H)(this.element.id+"_Title_Tooltip")},t.prototype.axisTooltip=function(e,t,l,n){var o=e.target.id;if(-1!==o.indexOf(this.element.id+"_XAxis_Label")||-1!==o.indexOf(this.element.id+"_YAxis_Label")||-1!==o.indexOf(this.element.id+"_XAxis_MultiLevel")||-1!==o.indexOf(this.element.id+"_YAxis_MultiLevel")){var s=i.i(a.M)(this.tooltipCollection,t,l);s?i.i(a.G)(s,t,l,this.element.offsetWidth,this.element.id+"_axis_Tooltip",i.i(a.J)(this.element.id+"_Secondary_Element"),this.isTouch,this):i.i(a.H)(this.element.id+"_axis_Tooltip")}else i.i(a.H)(this.element.id+"_axis_Tooltip")},t.prototype.isHeatmapRect=function(e,t){var i,l=[],n=[];if(l.push(this.heatMapSeries.rectPositionCollection[0][0]),n.push(this.heatMapSeries.rectPositionCollection[this.yLength-1][this.xLength-1]),this.cellSettings.border.width>5&&e>=l[0].x&&t>=l[0].y&&e<=n[0].x+n[0].width&&t<=n[0].y+n[0].height&&"Rect"===this.cellSettings.tileType){var a=this.heatMapSeries.getCurrentRect(e,t),o=n[0].height,s=n[0].width,r=this.cellSettings.border.width/2;e>=a.x+r&&t>=a.y+r&&e<=a.x+(s-r)&&t<=a.y+(o-r)?(i=!0,this.isRectBoundary=!0):(i=!1,this.isRectBoundary=!1)}else i=e>=l[0].x&&t>=l[0].y&&e<=n[0].x+n[0].width&&t<=n[0].y+n[0].height,this.isRectBoundary=i;return i},t.prototype.setTheme=function(){/*! Set theme */
this.themeStyle=i.i(s.b)(this.theme)},t.prototype.calculateBounds=function(){var e=this.margin,t=0,l=this.legendModule&&"Top"===this.legendSettings.position&&this.legendVisibilityByCellType||"0px"===this.titleSettings.textStyle.size?0:16,n=e.left,o=this.availableSize.width-n-e.right;if(("Column"===this.paletteSettings.colorGradientMode||"Row"===this.paletteSettings.colorGradientMode)&&"Gradient"===this.paletteSettings.type)if(0===this.paletteSettings.palette.length)this.legendVisibilityByCellType=!1;else for(var s=0;s<this.paletteSettings.palette.length;s++)if(null!==this.paletteSettings.palette[s].value)this.legendVisibilityByCellType=!0;else if(null===this.paletteSettings.palette[s].value){this.legendVisibilityByCellType=!1;break}this.titleSettings.text&&(this.titleCollection=i.i(a.z)(this.titleSettings.text,this.titleSettings.textStyle,o),t=i.i(a.b)(this.titleSettings.text,this.titleSettings.textStyle).height*this.titleCollection.length+l);var r=e.top+t;this.titleRect=new a.o(e.left,e.top,this.availableSize.width-e.left-e.right,t);var h=this.availableSize.height-r-e.bottom;this.initialClipRect=new a.o(n,r,o,h);var d=this.initialClipRect.y;this.legendModule&&this.legendSettings.visible&&this.legendVisibilityByCellType&&this.legendModule.calculateLegendBounds(this.initialClipRect),this.heatMapAxis.measureAxis(this.initialClipRect),this.legendModule&&this.legendSettings.visible&&this.legendVisibilityByCellType&&this.legendModule.calculateLegendSize(this.initialClipRect,d),this.heatMapAxis.calculateAxisSize(this.initialClipRect)},t.prototype.refreshBound=function(){this.updateBubbleHelperProperty(),this.calculateBounds(),this.renderElements()},t.prototype.initAxis=function(){var e,t=[this.xAxis,this.yAxis];this.axisCollections=[];for(var i=0,l=t.length;i<l;i++)e=t[i],e.orientation=0===i?"Horizontal":"Vertical",e.jsonCellLabel=[],this.axisCollections.push(e)},t.prototype.wireEvents=function(){var e=this,t=l.Browser.isPointer,i=l.Browser.touchStartEvent,n=l.Browser.touchEndEvent,a=l.Browser.touchMoveEvent,o=t?"pointerleave":"mouseleave";l.EventHandler.add(this.element,l.Browser.isDevice?i:"click",this.heatMapMouseClick,this),l.EventHandler.add(this.element,"dblclick",this.heatMapMouseDoubleClick,this),l.EventHandler.add(this.element,i,this.heatMapMouseMove,this),l.EventHandler.add(this.element,n,this.heatMapMouseLeave,this),l.EventHandler.add(this.element,a,this.heatMapMouseMove,this),l.EventHandler.add(this.element,o,this.heatMapMouseLeave,this),this.resizeEvent=this.heatMapResize.bind(this),window.addEventListener(l.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resizeEvent);var s=this;this.touchInstance=new l.Touch(this.element,{tapHold:function(t){var i=t.originalEvent.target.id;if((-1!==i.indexOf(e.element.id+"_HeatMapRect_")||-1!==i.indexOf(e.element.id+"_HeatMapRectLabels_"))&&e.allowSelection){s.isCellTapHold=!0;for(var l=[],n=0;n<e.multiCellCollection.length;n++)l.push(e.multiCellCollection[n]);t.originalEvent.ctrlKey&&e.enableMultiSelect||(e.multiCellCollection=[]),s.getDataCollection();var a={heatmap:s,cancel:!1,name:"cellSelected",data:s.multiCellCollection};s.trigger("cellSelected",a),a.cancel?(e.multiCellCollection=l,(e.multiCellCollection.length>0||!1===t.ctrlKey||!e.enableMultiSelect)&&e.removeSelectedCellsBorder(!0)):(!1!==t.ctrlKey&&e.enableMultiSelect||e.removeSelectedCellsBorder(!1),s.currentRect.allowCollection=!1),s.setCellOpacity(),window.clearTimeout(e.tooltipTimer),s.tooltipOnMouseMove(null,s.currentRect,s.isCellTapHold)}},tap:function(t){var i=t.originalEvent.target.id;if(-1!==i.indexOf(e.element.id+"_HeatMapRect_")||-1!==i.indexOf(e.element.id+"_HeatMapRectLabels_")||-1!==i.indexOf(e.element.id+"_CellSelection_Container_")){var l=!1;s.isCellTapHold||(l=!0);var n=void 0,a=void 0,o=void 0,r=e.element.getBoundingClientRect();"touchend"===t.originalEvent.type||"touchstart"===t.originalEvent.type?(e.isTouch=!0,o=t.originalEvent,n=o.changedTouches[0].clientX,a=o.changedTouches[0].clientY):(e.isTouch=!1,n=t.originalEvent.clientX,a=t.originalEvent.clientY),n-=r.left,a-=r.top;var h=e.heatMapSeries.getCurrentRect(n,a);window.clearTimeout(e.tooltipTimer),s.tooltipOnMouseMove(null,h,l)}}}),this.setStyle(this.element)},t.prototype.setStyle=function(e){e.style.touchAction="element",e.style.touchAction="element",e.style.zoom="none",e.style.userSelect="none",e.style.webkitUserSelect="none",e.style.position="relative",e.style.display="block"},t.prototype.print=function(){new m.a(this).print()},t.prototype.unWireEvents=function(){/*! Find the Events type */
var e=l.Browser.isPointer,t=l.Browser.touchStartEvent,i=l.Browser.touchEndEvent,n=l.Browser.touchMoveEvent,a=e?"pointerleave":"mouseleave";l.EventHandler.remove(this.element,l.Browser.isDevice?t:"click",this.heatMapMouseClick),l.EventHandler.remove(this.element,"dblclick",this.heatMapMouseDoubleClick),l.EventHandler.remove(this.element,t,this.heatMapMouseMove),l.EventHandler.remove(this.element,i,this.heatMapMouseLeave),l.EventHandler.remove(this.element,n,this.heatMapMouseMove),l.EventHandler.remove(this.element,a,this.heatMapMouseLeave),window.removeEventListener(l.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resizeEvent)},t.prototype.heatMapResize=function(e){var t=this;this.resizing=!0;var i={heatmap:this,cancel:!1,name:"resized",currentSize:new a.e(0,0),previousSize:new a.e(this.availableSize.width,this.availableSize.height)};return this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(function(){if(t.isDestroyed)return void clearTimeout(t.resizeTimer);t.createSvg(),i.currentSize=t.availableSize,t.trigger("resized",i),t.refreshBound(),t.appendSvgObject(),t.allowSelection&&t.updateCellSelection(),t.trigger("loaded",{heatmap:t}),t.resizing=!1},500),!1},t.prototype.updateCellSelection=function(){var e=this.initialClipRect.width/this.axisCollections[0].axisLabelSize,t=this.initialClipRect.height/this.axisCollections[1].axisLabelSize,l=this.initialClipRect.x,n=this.initialClipRect.y;if(this.enableCanvasRendering){if(this.enableCanvasRendering){for(var o=this.multiCellCollection,s=document.getElementById(this.element.id+"_canvas"),r=document.getElementById(this.element.id+"_secondary_canvas"),h=this.initialClipRect,d=h.y+h.height,p=h.x+h.width,c=0;c<this.multiCellCollection.length;c++){this.multiCellCollection[c].width=o[c].width=e,this.multiCellCollection[c].height=o[c].height=t,this.multiCellCollection[c].x=o[c].x=l+e*this.multiCellCollection[c].xPosition,this.multiCellCollection[c].y=o[c].y=n+t*this.multiCellCollection[c].yPosition;var u=s.getContext("2d").getImageData(o[c].x,o[c].y,o[c].width,o[c].height);r.getContext("2d").putImageData(u,o[c].x,o[c].y),s.style.opacity="0.3"}var g=s.getContext("2d").getImageData(0,0,this.availableSize.width,h.y);r.getContext("2d").putImageData(g,0,0);var v=s.getContext("2d").getImageData(0,d,this.availableSize.width,this.availableSize.height-d);r.getContext("2d").putImageData(v,0,h.y+h.height);var m=s.getContext("2d").getImageData(p,0,this.availableSize.width-p,this.availableSize.height);r.getContext("2d").putImageData(m,p,0);var y=s.getContext("2d").getImageData(0,0,h.x,this.availableSize.height);r.getContext("2d").putImageData(y,0,0),i.i(a.H)(this.element.id+"_selectedCells")}}else if(0!==this.multiCellCollection.length){for(var f=document.getElementById(this.element.id+"_Container_RectGroup"),x=document.getElementById(this.element.id+"_Container_TextGroup"),c=0;c<f.childNodes.length;c++)f.childNodes[c].setAttribute("opacity","0.3"),this.cellSettings.showLabel&&x.childNodes[c]&&x.childNodes[c].setAttribute("opacity","0.3");for(var c=0;c<this.multiCellCollection.length;c++){var b=this.multiCellCollection[c].cellElement,S=b.id.replace(this.element.id+"_HeatMapRect_",""),C=parseInt(S,10);if(f.childNodes[C].setAttribute("opacity","1"),this.cellSettings.showLabel&&x.childNodes[c]){var M=document.getElementById(this.element.id+"_HeatMapRectLabels_"+C);M&&M.setAttribute("opacity","1"),this.addSvgClass(f.childNodes[C])}}}},t.prototype.clearSVGSelection=function(){for(var e=document.getElementById(this.element.id+"_Container_RectGroup"),t=document.getElementById(this.element.id+"_Container_TextGroup"),i=0;i<e.childNodes.length;i++){var l=e.childNodes[i].getAttribute("class");l===this.element.id+"_selected"&&this.removeSvgClass(e.childNodes[i],l),e.childNodes[i].setAttribute("opacity","1"),this.cellSettings.showLabel&&t.childNodes[i]&&t.childNodes[i].setAttribute("opacity","1")}},t.prototype.calculateMaxLength=function(){var e=this.completeAdaptDataSource;if(e&&e.length>0){for(var t=e.length-1,i=0,l=0;l<=t;l++){var n=e[l].length;i=i>n?i:n}this.axisCollections[0].maxLength=t,this.axisCollections[1].maxLength=i-1}else this.axisCollections[0].maxLength=0,this.axisCollections[1].maxLength=0},t.prototype.setMouseXY=function(e,t){var i,l=this.element.getBoundingClientRect();i=this.enableCanvasRendering?document.getElementById(this.element.id+"_canvas").getBoundingClientRect():document.getElementById(this.element.id+"_svg").getBoundingClientRect(),this.mouseX=e-l.left-Math.max(i.left-l.left,0),this.mouseY=t-l.top-Math.max(i.top-l.top,0)},t.prototype.triggerClickEvent=function(e,t){var i,l,n,a=this.element.getBoundingClientRect();if("touchstart"===e.type?(t||(this.isTouch=!0),n=e,l=n.changedTouches[0].clientY,i=n.changedTouches[0].clientX):(t||(this.isTouch=!1),l=e.clientY,i=e.clientX),i-=a.left,l-=a.top,this.isHeatmapRect(i,l)){var o=this.heatMapSeries.getCurrentRect(i,l);this.trigger(t?"cellDoubleClick":"cellClick",{heatmap:this,value:o.value,x:o.x,y:o.y,xLabel:this.heatMapSeries.hoverXAxisLabel,yLabel:this.heatMapSeries.hoverYAxisLabel,xValue:this.heatMapSeries.hoverXAxisValue,yValue:this.heatMapSeries.hoverYAxisValue,cellElement:this.enableCanvasRendering?null:document.getElementById(o.id),event:e})}return{x:i,y:l}},t.prototype.heatMapMouseDoubleClick=function(e){this.triggerClickEvent(e,!0)},t.prototype.heatMapMouseClick=function(e){var t=this.triggerClickEvent(e,!1),i=t.x,l=t.y;if(this.notify("click",e),"Gradient"!==this.paletteSettings.type&&this.legendModule&&this.legendSettings.visible&&this.legendVisibilityByCellType){var n=this.legendModule.navigationCollections;n.length&&i>n[0].x&&i<n[0].x+n[0].width&&l>n[0].y&&l<n[0].y+n[0].height?this.legendModule.translatePage(this,this.legendModule.currentPage,!0):n.length&&i>n[1].x&&i<n[1].x+n[1].width&&l>n[1].y&&l<n[1].y+n[1].height&&this.legendModule.translatePage(this,this.legendModule.currentPage,!1);for(var a=this.legendModule.legendRange,o=this.legendModule.legendTextRange,s=!0,r=0;r<a.length;r++)this.legendModule&&this.legendSettings.toggleVisibility&&this.legendModule.currentPage===a[r].currentPage&&(s&&i>=a[r].x&&i<=a[r].width+a[r].x&&l>=a[r].y&&l<=a[r].y+a[r].height||this.legendSettings.showLabel&&"None"!==this.legendSettings.labelDisplayType&&i>=o[r].x&&i<=o[r].width+o[r].x&&l>=o[r].y&&l<=o[r].y+o[r].height)&&(this.legendModule.legendRangeSelection(r),s=!1)}return!1},t.prototype.heatMapMouseMove=function(e){var t,i,l,n=this.element.getBoundingClientRect();return"touchmove"===e.type||"touchstart"===e.type?(this.isTouch=!0,l=e,t=l.changedTouches[0].clientX,i=l.changedTouches[0].clientY):(this.isTouch=!1,t=e.clientX,i=e.clientY),t-=n.left,i-=n.top,this.setMouseXY(t,i),this.mouseAction(e,t,i,l,n),!0},t.prototype.mouseAction=function(e,t,l,n,o){var s;if(e.target&&e.target.id){var r=this.isHeatmapRect(t,l);this.legendModule&&(r?"Gradient"===this.paletteSettings.type&&this.legendSettings.showGradientPointer&&this.legendSettings.visible&&this.legendVisibilityByCellType&&this.legendModule.renderGradientPointer(e,t,l):this.legendModule.removeGradientPointer(),this.renderMousePointer(t,l));var h=void 0,d=void 0;if(h=!(!this.showTooltip||!this.tooltipModule)&&r,r&&(d=this.heatMapSeries.getCurrentRect(t,l),2!==e.which&&3!==e.which&&(h=this.cellSelectionOnMouseMove(e,d,t,l,h))),this.tooltipOnMouseMove(e,d,h,r),this.legendModule&&this.legendSettings.visible&&"Fixed"===this.paletteSettings.type&&this.legendSettings.enableSmartLegend&&"None"===this.legendSettings.labelDisplayType&&this.legendModule.createTooltip(t,l),this.enableCanvasRendering){this.element.getBoundingClientRect();var p="Fixed"!==this.paletteSettings.type||!this.legendSettings.enableSmartLegend||"None"!==this.legendSettings.labelDisplayType;s=i.i(a.M)(this.tooltipCollection,t,l)||this.legendModule&&p&&(i.i(a.M)(this.legendModule.legendLabelTooltip,t,l)||i.i(a.M)(this.legendModule.legendTitleTooltip,t,l)),s?i.i(a.G)(s,t,l,this.element.offsetWidth,this.element.id+"_canvas_Tooltip",i.i(a.J)(this.element.id+"_Secondary_Element"),this.isTouch,this):i.i(a.H)(this.element.id+"_canvas_Tooltip")}else this.titleSettings.text&&"Trim"===this.titleSettings.textStyle.textOverflow&&this.titleTooltip(e,t,l,this.isTouch),this.axisTooltip(e,t,l,this.isTouch),this.legendModule&&this.legendSettings.visible&&this.legendSettings.showLabel&&this.legendVisibilityByCellType&&this.legendModule.renderLegendLabelTooltip(e,t,l),this.legendModule&&this.legendSettings.visible&&this.legendVisibilityByCellType&&this.legendModule.renderLegendTitleTooltip(e,t,l)}return!0},t.prototype.cellSelectionOnMouseMove=function(e,t,i,l,n){return("Rect"===this.cellSettings.tileType&&"mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type)&&this.allowSelection&&(this.previousRect=t,this.multiSelection=!0,this.rectSelected=!0,this.initialCellX=i,this.initialCellY=l,e.preventDefault()),"Rect"===this.cellSettings.tileType&&this.multiSelection&&t&&(n=!1,this.highlightSelectedCells(this.previousRect,t,i,l,e)),n},t.prototype.tooltipOnMouseMove=function(e,t,n,a){var o=this;if(n&&t)this.tempTooltipRectId!==t.id&&(this.showTooltip&&((this.cellSettings.enableCellHighlighting||this.tooltipModule&&this.showTooltip)&&!this.enableCanvasRendering&&this.heatMapSeries.highlightSvgRect(t.id),!this.tooltipTimer||i.i(l.isNullOrUndefined)(e)||"touchstart"!==e.type&&"touchmove"!==e.type||(window.clearTimeout(this.tooltipTimer),this.tooltipTimer=null),this.tooltipModule.renderTooltip(t),this.isTouch&&(this.tooltipTimer=setTimeout(function(){i.i(l.isNullOrUndefined)(o.tooltipModule.tooltipObject)||o.tooltipModule.tooltipObject.fadeOut(),o.tooltipModule.isFadeout=!0,window.clearTimeout(o.tooltipTimer),o.tooltipTimer=null},1500),e&&"touchmove"===e.type&&e.preventDefault())),this.tempTooltipRectId=t.id);else{if(null!==e){a?!this.showTooltip&&this.cellSettings.border.width>5&&this.heatMapSeries.highlightSvgRect(e.target.id):((this.cellSettings.enableCellHighlighting||this.showTooltip)&&!this.enableCanvasRendering&&this.cellSettings.border.width<5&&this.heatMapSeries.highlightSvgRect(e.target.id),this.tooltipModule&&this.showTooltip&&this.tooltipModule.showHideTooltip(!1,!0))}this.tempTooltipRectId=""}},t.prototype.highlightSelectedCells=function(e,t,i,l,n){var o=e.xIndex,s=e.yIndex,r=t.xIndex,h=t.yIndex;this.currentRect=t,this.selectedCellsRect=new a.o(0,0,0,0),this.selectedCellsRect.x=e.x>t.x?t.x:e.x,this.selectedCellsRect.y=e.y>t.y?t.y:e.y,this.selectedCellsRect.width=(1+(e.x>t.x?o-r:r-o))*t.width,this.selectedCellsRect.height=(1+(e.y>t.y?s-h:h-s))*t.height,"touchstart"!==n.type||0!==this.multiCellCollection.length||this.isCellTapHold?this.isCellTapHold=!1:this.isCellTapHold=!0,n.preventDefault();var d=this.initialCellX>i?i:this.initialCellX,p=this.initialCellY>l?l:this.initialCellY,c=new a.o(d-this.initialClipRect.x,p-this.initialClipRect.y,Math.abs(i-this.initialCellX),Math.abs(l-this.initialCellY));if(c.width>0&&this.enableMultiSelect&&!1===n.ctrlKey){this.removeSelectedCellsBorder(!1);var u=document.getElementById(this.element.id+"Celltooltipcontainer_svg");u&&(this.tooltipModule.tooltipObject=null,u.setAttribute("opacity","0"))}var g=document.getElementById(this.element.id+"_CellSelection_Container"),v=this.renderer.createSvg({id:this.element.id+"_CellSelection_Container_svg",width:this.initialClipRect.width,height:this.initialClipRect.height});g.appendChild(v);var m=document.getElementById(this.element.id+"_CellSelection_Container_svg");if(this.enableMultiSelect){var y=new a.m(this.element.id+"_selectedCells","#87ceeb",{color:"transparent",width:1},1,c,"#0000ff");m.appendChild(this.renderer.drawRectangle(y)),document.getElementById(this.element.id+"_selectedCells").style.opacity="0.5"}},t.prototype.getDataCollection=function(){var e=this.previousRect.xIndex,t=this.previousRect.yIndex,i=this.currentRect.xIndex,l=this.currentRect.yIndex,n=i>e?e:i,o=i>e?i:e,s=l>t?t:l,r=l>t?l:t,h=n,d=s,p=this.previousRect.x,c=this.previousRect.y;this.getCellCollection(this.currentRect,this.previousRect,!0,h,d,o,r,n,p,c),h=n,d=s,p=this.previousRect.x,c=this.previousRect.y,this.checkSelectedCells(),this.getCellCollection(this.currentRect,this.previousRect,!1,h,d,o,r,n,p,c),this.selectedMultiCellCollection=[],this.canvasSelectedCells=new a.o(0,0,0,0),this.selectedCellCount=0},t.prototype.getCellCollection=function(e,t,i,l,n,a,o,s,r,h){for(var d=Math.abs(e.xIndex===t.xIndex?0:e.xIndex-t.xIndex)+1,p=Math.abs(e.yIndex===t.yIndex?0:e.yIndex-t.yIndex)+1,c=0;c<d*p;c++)i?this.getSelectedCellData(r,h,!0):this.getSelectedCellData(r,h,!1),l<a?(r+=e.xIndex>t.xIndex?e.width:-e.width,l++):n<o&&(h+=e.yIndex>t.yIndex?e.height:-e.height,r=t.x,l=s)},t.prototype.removeSelectedCellsBorder=function(e){if(this.enableCanvasRendering){for(var t=this.secondaryCanvasRenderer.ctx,i=0;i<this.previousSelectedCellsRect.length;i++){var l=this.previousSelectedCellsRect[i];t.save(),t.clearRect(l.x-1,l.y-1,l.width+2,l.height+2),t.restore()}for(var i=0;i<this.multiCellCollection.length;i++){var n=this.multiCellCollection[i];this.multiCellCollection.length>0&&(t.save(),t.clearRect(n.x-1,n.y-1,n.width+2,n.height+2))}}else for(var a=document.getElementById(this.element.id+"_Container_RectGroup"),o=document.getElementById(this.element.id+"_Container_TextGroup"),i=0;i<a.childNodes.length;i++){var s=a.childNodes[i].getAttribute("class");e?(a.childNodes[i].setAttribute("opacity","1"),this.cellSettings.showLabel&&o.childNodes[i]&&(o.childNodes[i].setAttribute("opacity","1"),this.removeSvgClass(a.childNodes[i],s))):(a.childNodes[i].setAttribute("opacity","0.3"),this.cellSettings.showLabel&&o.childNodes[i]&&(o.childNodes[i].setAttribute("opacity","0.3"),this.removeSvgClass(a.childNodes[i],s)))}},t.prototype.highlightSelectedAreaInCanvas=function(e){if(e.x){var t=document.getElementById(this.element.id+"_canvas"),i=document.getElementById(this.element.id+"_secondary_canvas"),l=this.initialClipRect,n=t.getContext("2d").getImageData(e.x,e.y,e.width,e.height);i.getContext("2d").putImageData(n,e.x,e.y),t.style.opacity="0.3";var a=t.getContext("2d").getImageData(0,0,this.availableSize.width,l.y);i.getContext("2d").putImageData(a,0,0);var o=t.getContext("2d").getImageData(0,l.y+l.height,this.availableSize.width,this.availableSize.height-(l.y+l.height));i.getContext("2d").putImageData(o,0,l.y+l.height);var s=t.getContext("2d").getImageData(l.x+l.width,0,this.availableSize.width-(l.x+l.width),this.availableSize.height);i.getContext("2d").putImageData(s,l.x+l.width,0);var r=t.getContext("2d").getImageData(0,0,l.x,this.availableSize.height);i.getContext("2d").putImageData(r,0,0)}},t.prototype.getSelectedCellData=function(e,t,n){var o=this.axisCollections[0],s=this.axisCollections[1],r=o.tooltipLabels,h=s.tooltipLabels.slice().reverse(),d=this.heatMapSeries.getCurrentRect(e+1,t+1),p=document.getElementById(d.id),c=new a.l(null,"","",0,0,null,0,0,0,0,0,0);if(c.value=d.value,c.xLabel=r[d.xIndex].toString(),c.yLabel=h[d.yIndex].toString(),c.xValue=o.labelValue[d.xIndex],c.yValue=s.labelValue.slice().reverse()[d.yIndex],c.cellElement=this.enableCanvasRendering?null:p,c.xPosition=d.xIndex,c.yPosition=d.yIndex,c.width=this.currentRect.width,c.height=this.currentRect.height,c.x=this.currentRect.x,c.y=this.currentRect.y,this.currentRect.allowCollection=!0,this.addSvgClass(p),n)this.selectedMultiCellCollection.push(c),this.currentRect.allowCollection=!1;else for(var u=0;u<this.multiCellCollection.length;u++)if(this.multiCellCollection[u].xPosition===c.xPosition&&this.multiCellCollection[u].yPosition===c.yPosition&&(this.currentRect.allowCollection=!1,this.selectedCellCount===this.selectedMultiCellCollection.length)){if(this.currentRect.allowCollection=!1,this.enableCanvasRendering){var g=this.secondaryCanvasRenderer.ctx,v=this.canvasSelectedCells;g.save(),g.clearRect(v.x-1,v.y-1,v.width+2,v.height+2),g.restore(),this.selectedCellsRect=new a.o(0,0,0,0)}else for(var m=0;m<this.selectedMultiCellCollection.length;m++){var y=this.selectedMultiCellCollection[m].cellElement;if(y){var f=y.id.replace(this.element.id+"_HeatMapRect_",""),x=(document.getElementById(this.element.id+"_Container_TextGroup"),y.getAttribute("class"));y.setAttribute("opacity","0.3");var b=document.getElementById(this.element.id+"_HeatMapRectLabels_"+f);b&&b.setAttribute("opacity","0.3"),this.removeSvgClass(y,x)}}this.multiCellCollection.splice(u,1)}d.visible&&!i.i(l.isNullOrUndefined)(d.value)&&!0===this.currentRect.allowCollection&&this.multiCellCollection.push(c)},t.prototype.addSvgClass=function(e){if(!this.enableCanvasRendering){var t=this.element.id+"_selected";e.setAttribute("class",t)}},t.prototype.removeSvgClass=function(e,t){t&&e.setAttribute("class",t.replace(t,""))},t.prototype.clearSelection=function(){if(!this.enableCanvasRendering&&this.allowSelection&&this.clearSVGSelection(),this.enableCanvasRendering){for(var e=this.secondaryCanvasRenderer.ctx,t=0;t<this.previousSelectedCellsRect.length;t++)e.save(),e.clearRect(this.previousSelectedCellsRect[t].x-1,this.previousSelectedCellsRect[t].y-1,this.previousSelectedCellsRect[t].width+2,this.previousSelectedCellsRect[t].height+2),e.restore();for(var t=0;t<this.multiCellCollection.length;t++){var i=this.multiCellCollection[t];this.multiCellCollection.length>0&&(e.save(),e.clearRect(i.x-1,i.y-1,i.width+2,i.height+2))}document.getElementById(this.element.id+"_canvas").style.opacity="1"}this.tempMultiCellCollection=[],this.multiCellCollection=[],this.rectSelected=!1},t.prototype.renderMousePointer=function(e,t){for(var n=this.legendModule.legendRange,a=this.legendModule.legendTextRange,o=!0,s=0;s<n.length;s++)if(this.legendSettings.toggleVisibility&&this.legendModule.currentPage===n[s].currentPage)if(o&&e>=n[s].x&&e<=n[s].width+n[s].x&&t>=n[s].y&&t<=n[s].y+n[s].height||this.legendSettings.showLabel&&"None"!==this.legendSettings.labelDisplayType&&e>=a[s].x&&e<=a[s].width+a[s].x&&t>=a[s].y&&t<=a[s].y+a[s].height){if(this.enableCanvasRendering)document.getElementById(this.element.id+"_canvas").style.cursor="Pointer";else{document.getElementById(this.element.id+"_svg").style.cursor="Pointer";var r=document.getElementById(this.element.id+"legendLabelTooltipContainer");i.i(l.isNullOrUndefined)(r)||(r.style.cursor="Pointer")}o=!1}else o&&(this.enableCanvasRendering?document.getElementById(this.element.id+"_canvas").style.cursor="":document.getElementById(this.element.id+"_svg").style.cursor="")},t.prototype.heatMapMouseLeave=function(e){var t=this;if(e.target&&e.target.id&&(this.cellSettings.enableCellHighlighting||this.tooltipModule&&this.showTooltip)&&!this.enableCanvasRendering&&this.heatMapSeries.highlightSvgRect(this.tempTooltipRectId),this.allowSelection&&this.multiSelection&&(this.multiSelection=!1,("mouseup"===e.type||"mouseleave"===e.type||"touchend"===e.type||"pointerup"===e.type)&&2!==e.which&&3!==e.which))if(!1===this.isCellTapHold){var n=void 0,o=document.getElementById(this.element.id+"_selectedCells");if(i.i(l.isNullOrUndefined)(o)){var s=void 0,r=void 0,h=void 0,d=this.element.getBoundingClientRect();"touchend"===e.type?(this.isTouch=!0,h=e,r=h.changedTouches[0].clientY,s=h.changedTouches[0].clientX):(this.isTouch=!1,r=e.clientY,s=e.clientX),s-=d.left,r-=d.top;var p=this.initialCellX>s?s:this.initialCellX,c=this.initialCellY>r?r:this.initialCellY;n=new a.o(p-this.initialClipRect.x,c-this.initialClipRect.y,0!==Math.abs(s-this.initialCellX)?Math.abs(s-this.initialCellX):Math.abs(r-this.initialCellY),Math.abs(r-this.initialCellY))}else{var u=o.getClientRects()[0];n=new a.o(u.left,u.top,u.width,u.height)}if(!(n.width>0)||this.enableMultiSelect){for(var g=[],v=0;v<this.multiCellCollection.length;v++)g.push(this.multiCellCollection[v]);!1!==e.ctrlKey&&this.enableMultiSelect||(this.multiCellCollection=[]),this.getDataCollection();var m={heatmap:this,cancel:!1,name:"cellSelected",data:this.multiCellCollection};this.trigger("cellSelected",m),m.cancel?(this.multiCellCollection=g,(this.multiCellCollection.length>0||!1===e.ctrlKey||!this.enableMultiSelect)&&this.removeSelectedCellsBorder(!0)):(!1!==e.ctrlKey&&this.enableMultiSelect||this.removeSelectedCellsBorder(!1),this.currentRect.allowCollection=!1),this.setCellOpacity(),"touchend"===e.type&&(window.clearTimeout(this.tooltipTimer),this.tooltipOnMouseMove(null,this.currentRect,!0))}}else this.isCellTapHold=!1;if(this.tooltipModule&&this.showTooltip&&"mouseleave"===e.type&&this.tooltipModule.showHideTooltip(!1),this.tempTooltipRectId="",this.legendModule&&this.legendSettings.visible&&this.legendModule.tooltipObject&&this.legendModule.tooltipObject.element){var y=this.legendModule.tooltipObject.element.firstChild;"mouseleave"===e.type?y.setAttribute("opacity","0"):(this.legendTooltipTimer&&window.clearTimeout(this.legendTooltipTimer),this.legendTooltipTimer=setTimeout(function(){y.setAttribute("opacity","0")},1500))}if("Gradient"===this.paletteSettings.type&&this.legendModule&&this.legendSettings.showGradientPointer&&this.legendSettings.visible&&this.legendVisibilityByCellType&&("mouseleave"===e.type?this.legendModule.removeGradientPointer():(this.gradientTimer&&window.clearTimeout(this.gradientTimer),this.gradientTimer=setTimeout(function(){t.legendModule.removeGradientPointer()},1500))),this.enableCanvasRendering){var f=document.getElementById(this.element.id+"_hoverRect_canvas");f&&(f.style.visibility="hidden",this.tempRectHoverClass="")}return this.titleSettings.text&&-1!==this.titleCollection[0].indexOf("...")&&(e.preventDefault(),this.isTouch||(this.enableCanvasRendering?i.i(a.H)(this.element.id+"_canvas_Tooltip"):i.i(a.H)(this.element.id+"_Title_Tooltip"))),!0},t.prototype.checkSelectedCells=function(){if(this.enableCanvasRendering){this.canvasSelectedCells=new a.o(0,0,0,0),this.canvasSelectedCells.x=this.selectedCellsRect.x,this.canvasSelectedCells.y=this.selectedCellsRect.y,this.canvasSelectedCells.width=this.selectedCellsRect.width,this.canvasSelectedCells.height=this.selectedCellsRect.height;for(var e=0;e<this.multiCellCollection.length;e++)for(var t=0;t<this.selectedMultiCellCollection.length;t++)this.selectedMultiCellCollection[t].xPosition===this.multiCellCollection[e].xPosition&&this.selectedMultiCellCollection[t].yPosition===this.multiCellCollection[e].yPosition&&this.selectedCellCount++;this.rectSelected&&"Gradient"===this.paletteSettings.type&&this.legendModule.removeGradientPointer()}else for(var e=0;e<this.multiCellCollection.length;e++)for(var t=0;t<this.selectedMultiCellCollection.length;t++)this.selectedMultiCellCollection[t].cellElement.getAttribute("id")===this.multiCellCollection[e].cellElement.getAttribute("id")&&this.selectedCellCount++},t.prototype.removeOpacity=function(e,t){for(var i=0;i<e.childNodes.length;i++)e.childNodes[i].setAttribute("opacity","0.3"),this.cellSettings.showLabel&&t.childNodes[i]&&t.childNodes[i].setAttribute("opacity","0.3")},t.prototype.setCellOpacity=function(){if(this.enableCanvasRendering)this.previousSelectedCellsRect.push(this.selectedCellsRect),this.highlightSelectedAreaInCanvas(this.selectedCellsRect);else if(0!==this.multiCellCollection.length){this.tempMultiCellCollection.push(this.multiCellCollection);var e=document.getElementById(this.element.id+"_Container_RectGroup"),t=document.getElementById(this.element.id+"_Container_TextGroup");this.removeOpacity(e,t);for(var l=0;l<this.multiCellCollection.length;l++){var n=this.multiCellCollection[l].cellElement,o=parseInt(n.id.replace(this.element.id+"_HeatMapRect_",""),10);if(e.childNodes[o].setAttribute("opacity","1"),this.cellSettings.showLabel){var s=document.getElementById(this.element.id+"_HeatMapRectLabels_"+o);s&&s.setAttribute("opacity","1")}}}i.i(a.H)(this.element.id+"_selectedCells")},t.prototype.createMultiCellDiv=function(e){if(e){var t=this.createElement("div",{id:this.element.id+"_Multi_CellSelection_Canvas"});t.style.position="relative",this.element.appendChild(t),t.appendChild(this.svgObject),this.svgObject.style.position="absolute",this.svgObject.style.left="0px",this.svgObject.style.top="0px",this.svgObject.style.zIndex="0"}else{var i=document.getElementById(this.element.id+"_Multi_CellSelection_Canvas"),l=this.secondaryCanvasRenderer.createCanvas({width:this.availableSize.width,height:this.availableSize.height,x:0,y:0});l.style.cssText="position: absolute; z-index: 1",i.appendChild(l)}},f([i.i(l.Property)(null)],t.prototype,"width",void 0),f([i.i(l.Property)(null)],t.prototype,"height",void 0),f([i.i(l.Property)(!0)],t.prototype,"showTooltip",void 0),f([i.i(l.Event)()],t.prototype,"tooltipRender",void 0),f([i.i(l.Event)()],t.prototype,"resized",void 0),f([i.i(l.Event)()],t.prototype,"loaded",void 0),f([i.i(l.Event)()],t.prototype,"cellRender",void 0),f([i.i(l.Event)()],t.prototype,"cellSelected",void 0),f([i.i(l.Property)("SVG")],t.prototype,"renderingMode",void 0),f([i.i(l.Property)(null)],t.prototype,"dataSource",void 0),f([i.i(l.Complex)({},v.a)],t.prototype,"dataSourceSettings",void 0),f([i.i(l.Property)(null)],t.prototype,"backgroundColor",void 0),f([i.i(l.Property)("Material")],t.prototype,"theme",void 0),f([i.i(l.Property)(!1)],t.prototype,"allowSelection",void 0),f([i.i(l.Property)(!0)],t.prototype,"enableMultiSelect",void 0),f([i.i(l.Complex)({},o.b)],t.prototype,"margin",void 0),f([i.i(l.Complex)({text:"",textStyle:s.a.heatMapTitleFont},o.f)],t.prototype,"titleSettings",void 0),f([i.i(l.Complex)({},r.a)],t.prototype,"xAxis",void 0),f([i.i(l.Complex)({position:"Right"},g.a)],t.prototype,"legendSettings",void 0),f([i.i(l.Complex)({},p.a)],t.prototype,"paletteSettings",void 0),f([i.i(l.Complex)({},c.a)],t.prototype,"tooltipSettings",void 0),f([i.i(l.Complex)({},r.a)],t.prototype,"yAxis",void 0),f([i.i(l.Complex)({},d.a)],t.prototype,"cellSettings",void 0),f([i.i(l.Event)()],t.prototype,"created",void 0),f([i.i(l.Event)()],t.prototype,"load",void 0),f([i.i(l.Event)()],t.prototype,"cellClick",void 0),f([i.i(l.Event)()],t.prototype,"cellDoubleClick",void 0),f([i.i(l.Event)()],t.prototype,"legendRender",void 0),t=f([l.NotifyPropertyChanges],t)}(l.Component)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i(16);i.d(t,"HeatMap",function(){return l.a}),i.d(t,"Axis",function(){return l.b}),i.d(t,"AxisHelper",function(){return l.c}),i.d(t,"Data",function(){return l.d}),i.d(t,"AdaptiveMinMax",function(){return l.e}),i.d(t,"Adaptor",function(){return l.f}),i.d(t,"TwoDimensional",function(){return l.g}),i.d(t,"LegendSettings",function(){return l.h}),i.d(t,"Legend",function(){return l.i}),i.d(t,"Font",function(){return l.j}),i.d(t,"Margin",function(){return l.k}),i.d(t,"Border",function(){return l.l}),i.d(t,"TooltipBorder",function(){return l.m}),i.d(t,"BubbleData",function(){return l.n}),i.d(t,"Title",function(){return l.o}),i.d(t,"FillColor",function(){return l.p}),i.d(t,"PaletteCollection",function(){return l.q}),i.d(t,"AxisLabelBorder",function(){return l.r}),i.d(t,"BubbleSize",function(){return l.s}),i.d(t,"MultiLevelCategories",function(){return l.t}),i.d(t,"MultiLevelLabels",function(){return l.u}),i.d(t,"ColorCollection",function(){return l.v}),i.d(t,"BubbleTooltipData",function(){return l.w}),i.d(t,"LegendColorCollection",function(){return l.x}),i.d(t,"MultipleRow",function(){return l.y}),i.d(t,"CellSettings",function(){return l.z}),i.d(t,"Series",function(){return l.A}),i.d(t,"PaletteSettings",function(){return l.B}),i.d(t,"RgbColor",function(){return l.C}),i.d(t,"CellColor",function(){return l.D}),i.d(t,"TooltipSettings",function(){return l.E}),i.d(t,"Tooltip",function(){return l.F}),i.d(t,"ExportUtils",function(){return l.G}),i.d(t,"stringToNumber",function(){return l.H}),i.d(t,"measureText",function(){return l.I}),i.d(t,"TextElement",function(){return l.J}),i.d(t,"titlePositionX",function(){return l.K}),i.d(t,"Size",function(){return l.L}),i.d(t,"CustomizeOption",function(){return l.M}),i.d(t,"PathOption",function(){return l.N}),i.d(t,"createLabelTemplate",function(){return l.O}),i.d(t,"getTemplateFunction",function(){return l.P}),i.d(t,"convertElement",function(){return l.Q}),i.d(t,"CurrentRect",function(){return l.R}),i.d(t,"SelectedCellDetails",function(){return l.S}),i.d(t,"RectOption",function(){return l.T}),i.d(t,"CircleOption",function(){return l.U}),i.d(t,"Rect",function(){return l.V}),i.d(t,"TextOption",function(){return l.W}),i.d(t,"TextBasic",function(){return l.X}),i.d(t,"Line",function(){return l.Y}),i.d(t,"LineOption",function(){return l.Z}),i.d(t,"PathAttributes",function(){return l._0}),i.d(t,"Path",function(){return l._1}),i.d(t,"sum",function(){return l._2}),i.d(t,"titlePositionY",function(){return l._3}),i.d(t,"rotateTextSize",function(){return l._4}),i.d(t,"DrawSvgCanvas",function(){return l._5}),i.d(t,"getTitle",function(){return l._6}),i.d(t,"getIsLineBreakLabel",function(){return l._7}),i.d(t,"textWrap",function(){return l._8}),i.d(t,"textTrim",function(){return l._9}),i.d(t,"textNone",function(){return l._10}),i.d(t,"Gradient",function(){return l._11}),i.d(t,"GradientColor",function(){return l._12}),i.d(t,"showTooltip",function(){return l._13}),i.d(t,"removeElement",function(){return l._14}),i.d(t,"removeMeasureElement",function(){return l._15}),i.d(t,"getElement",function(){return l._16}),i.d(t,"increaseDateTimeInterval",function(){return l._17}),i.d(t,"CanvasTooltip",function(){return l._18}),i.d(t,"getTooltipText",function(){return l._19}),i.d(t,"PaletterColor",function(){return l._20}),i.d(t,"GradientPointer",function(){return l._21}),i.d(t,"CurrentLegendRect",function(){return l._22}),i.d(t,"LegendRange",function(){return l._23}),i.d(t,"ToggleVisibility",function(){return l._24}),i.d(t,"colorNameToHex",function(){return l._25}),i.d(t,"convertToHexCode",function(){return l._26}),i.d(t,"componentToHex",function(){return l._27}),i.d(t,"convertHexToColor",function(){return l._28}),i.d(t,"formatValue",function(){return l._29}),i.d(t,"MultiLevelPosition",function(){return l._30})}])});